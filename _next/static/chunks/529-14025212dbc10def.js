"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{12144:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(57437);function s(e){var t=e.items;return(0,r.jsx)("nav",{className:"flex items-center text-sm mb-6 bg-gray-50 p-3 rounded-md",children:t.map(function(e,n){return(0,r.jsx)("li",{children:n<t.length-1?(0,r.jsx)("button",{onClick:e.onClick,className:"hover:text-blue-600",children:e.label}):(0,r.jsx)("span",{className:"text-gray-500",children:e.label})},n)})})}n(2265)},93113:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(57437);n(2265);var s=n(99376);function a(e){var t=e.children;return(0,s.useRouter)(),(0,s.usePathname)(),(0,r.jsxs)("div",{className:"container mx-auto p-4 max-w-6xl",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Interview Management System"}),(0,r.jsx)("main",{children:t})]})}},42794:function(e,t,n){n.d(t,{Z:function(){return L}});var r=n(2403),s=n(12249),a=n(5194),i=n(1780),o=n(50059),l=n(85735),c=n(5853),u=n(57437),d=n(2265),m=n(99376),f=n(280),h=n(62869),x=n(66070),p=n(95186),v=n(26815),g=n(12339),y=n(76818),N=n(962),j=N.fC,b=N.wy,_=N.Fw,w=n(40875),C=n(99397),k=n(27413),S=n(51817),I=n(49465),q=n(83229),O=n(91723),z=n(10407),A=n(82431),Q=n(76865),Z=n(14438),R=n(12144),D=n(48614),V=n(40521),E=n(57970),J=n(11411),P=n.n(J),F=n(26110),T=["i.postimg.cc","i.imgur.com","miro.medium.com","cdn-images-1.medium.com"],Y=[{name:"Easy",time:15},{name:"Medium",time:30},{name:"Advanced",time:45}];function L(e){var t,n,N,J,L,M,U,B,G=e.companyId,K=e.user,X=e.testId,H=e.view,$=(0,m.useRouter)(),W=(0,o._)((0,d.useState)([]),2),ee=W[0],et=W[1],en=(0,o._)((0,d.useState)([]),2),er=en[0],es=en[1],ea=(0,o._)((0,d.useState)(null),2),ei=ea[0],eo=ea[1],el=(0,o._)((0,d.useState)(!1),2),ec=el[0],eu=el[1],ed=(0,o._)((0,d.useState)(!1),2),em=ed[0],ef=ed[1],eh=(0,o._)((0,d.useState)(""),2),ex=eh[0],ep=eh[1],ev=(0,o._)((0,d.useState)(""),2),eg=ev[0],ey=ev[1],eN=(0,o._)((0,d.useState)(null),2),ej=eN[0],eb=eN[1],e_=(0,o._)((0,d.useState)("Easy"),2),ew=e_[0],eC=e_[1],ek=(0,o._)((0,d.useState)(null),2),eS=(ek[0],ek[1]),eI=(0,o._)((0,d.useState)(""),2),eq=eI[0],eO=eI[1],ez=(0,o._)((0,d.useState)(900),2),eA=ez[0],eQ=ez[1],eZ=(0,o._)((0,d.useState)("questions"),2),eR=eZ[0],eD=eZ[1],eV=(0,o._)((0,d.useState)(!0),2),eE=eV[0],eJ=eV[1],eP=(0,o._)((0,d.useState)(!1),2),eF=eP[0],eT=eP[1],eY=(0,o._)((0,d.useState)([]),2),eL=eY[0],eM=eY[1],eU=(0,o._)((0,d.useState)(null),2),eB=eU[0],eG=eU[1],eK=(0,o._)((0,d.useState)(0),2),eX=eK[0],eH=eK[1],e$=(0,o._)((0,d.useState)(!1),2),eW=e$[0],e0=e$[1],e1=(0,o._)((0,d.useState)(null),2),e2=e1[0],e4=e1[1],e3=(0,o._)((0,d.useState)(""),2),e6=e3[0],e5=e3[1],e9=(0,o._)((0,d.useState)(!1),2),e7=e9[0],e8=e9[1],te=(0,o._)((0,d.useState)({Easy:{markdown:"",preview:null},Medium:{markdown:"",preview:null},Advanced:{markdown:"",preview:null}}),2),tt=te[0],tn=te[1];(0,d.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e,t,n,r,s,a,i,o,l,u,d,m,h,x,p,v,g,y,N,j,b,_,w,C,k,S,I,q,O;return(0,c.Jh)(this,function(c){switch(c.label){case 0:eJ(!0),c.label=1;case 1:return c.trys.push([1,7,8,9]),[4,f.OQ.from("companies").select("name").eq("id",G).single()];case 2:if(t=(e=c.sent()).data,n=e.error)throw n;return e5(t.name),[4,f.OQ.from("test_menus").select("menu_json").eq("company_id",G).single()];case 3:if(s=(r=c.sent()).data,!(a=r.error))return[3,4];if("PGRST116"===a.code)et([]);else throw a;return[3,6];case 4:if(et(s.menu_json||[]),!X)return[3,6];i=null,o=null,l=!0,u=!1,d=void 0;try{for(m=(s.menu_json||[])[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){if((x=h.value).children){p=!0,v=!1,g=void 0;try{for(y=x.children[Symbol.iterator]();!(p=(N=y.next()).done);p=!0)if((j=N.value).testIds){b=!0,_=!1,w=void 0;try{for(C=Y[Symbol.iterator]();!(b=(k=C.next()).done);b=!0)if(I=(S=k.value).name.toLowerCase(),j.testIds[I]===X){i=j,o=S.name;break}}catch(e){_=!0,w=e}finally{try{b||null==C.return||C.return()}finally{if(_)throw w}}if(i)break}}catch(e){v=!0,g=e}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}}if(i)break}}catch(e){u=!0,d=e}finally{try{l||null==m.return||m.return()}finally{if(u)throw d}}if(!(i&&o))return[3,6];return eo(i),eC(o),[4,f.OQ.from("tests").select("*").eq("id",X).single()];case 5:O=(q=c.sent()).data,!q.error&&O&&(eS(O),eO(O.markdown_content),eQ(O.time_limit)),c.label=6;case 6:return[3,9];case 7:return console.error("Error loading data:",c.sent()),Z.Am.error("Failed to load data"),[3,9];case 8:return eJ(!1),[7];case 9:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[G,X]);var tr=function(e){es(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):(0,l._)(t).concat([e])})},ts=(t=(0,r._)(function(e){var t,n,r,s,a,i,o;return(0,c.Jh)(this,function(l){switch(l.label){case 0:if(eo(e),!e.testIds)return[3,6];if(!(t=e.testIds[ew.toLowerCase()]||""))return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,f.OQ.from("tests").select("*").eq("id",t).single()];case 2:if(r=(n=l.sent()).data,s=n.error){if("PGRST116"===s.code)console.log("No content found for this test/complexity yet"),eS(null),eO(""),eQ((a=Y.find(function(e){return e.name===ew}))?60*a.time:900);else throw s}else eS(r),eO(r.markdown_content||""),eQ(r.time_limit||900),r.markdown_content&&(i=r.markdown_content.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question}),eG({id:t,title:e.name,time_limit:r.time_limit,questions:i}));return[3,4];case 3:return console.error("Error loading test:",l.sent()),Z.Am.error("Failed to load test content"),[3,4];case 4:return[3,6];case 5:eS(null),eO(""),eQ((o=Y.find(function(e){return e.name===ew}))?60*o.time:900),l.label=6;case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),ta=(n=(0,r._)(function(){var e,t,n,r,s;return(0,c.Jh)(this,function(a){switch(a.label){case 0:if(!ex.trim())return Z.Am.error("Category name cannot be empty"),[2];e={id:"category-".concat(Date.now()),name:ex.trim(),children:[]},et(t=(0,l._)(ee).concat([e])),a.label=1;case 1:return a.trys.push([1,7,,8]),[4,f.OQ.from("test_menus").select("id").eq("company_id",G).maybeSingle()];case 2:if(r=(n=a.sent()).data,(s=n.error)&&"PGRST116"!==s.code)throw s;if(!(null==r?void 0:r.id))return[3,4];return[4,f.OQ.from("test_menus").update({menu_json:t,last_modified_by:K.id,updated_at:new Date().toISOString()}).eq("company_id",G)];case 3:return a.sent(),[3,6];case 4:return[4,f.OQ.from("test_menus").insert({company_id:G,menu_json:t,last_modified_by:K.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})];case 5:a.sent(),a.label=6;case 6:return Z.Am.success("Category added successfully"),ep(""),eu(!1),[3,8];case 7:return console.error("Error saving category:",a.sent()),Z.Am.error("Failed to save category"),[3,8];case 8:return[2]}})}),function(){return n.apply(this,arguments)}),ti=(N=(0,r._)(function(){var e,t,n,r,s,a,i,o,u,d,m,h,x;return(0,c.Jh)(this,function(p){switch(p.label){case 0:if(!ej)return Z.Am.error("No category selected"),[2];if(!eg.trim())return Z.Am.error("Test name cannot be empty"),[2];e=Date.now(),t=eg.trim().toUpperCase().replace(/[^A-Z0-9]/g,"-").substring(0,20),n={easy:"".concat(t,"-EASY-").concat(e),medium:"".concat(t,"-MED-").concat(e),advanced:"".concat(t,"-ADV-").concat(e)},r={id:"test-".concat(e),name:eg.trim(),testIds:n},p.label=1;case 1:p.trys.push([1,15,,16]),s=!0,a=!1,i=void 0,p.label=2;case 2:p.trys.push([2,7,8,9]),o=function(){var e,t,r,s;return(0,c.Jh)(this,function(a){switch(a.label){case 0:return t=n[e=d.value],r=e.toLowerCase(),s=60*(Y.find(function(e){return e.name.toLowerCase()===r})||Y[0]).time,[4,f.OQ.from("tests").insert({id:t,title:eg.trim(),company_id:G,complexity:e.toUpperCase(),category:ej.name,time_limit:s,created_at:new Date().toISOString()})];case 1:return a.sent(),[2]}})},u=Object.keys(n)[Symbol.iterator](),p.label=3;case 3:if(s=(d=u.next()).done)return[3,6];return[5,(0,c.XA)(o())];case 4:p.sent(),p.label=5;case 5:return s=!0,[3,3];case 6:return[3,9];case 7:return m=p.sent(),a=!0,i=m,[3,9];case 8:try{s||null==u.return||u.return()}finally{if(a)throw i}return[7];case 9:return h=(0,l._)(ee),(x=function(e){if(!ej)return!1;for(var t=0;t<e.length;t++){if(e[t].id===ej.id){var n=e[t];return n.children||(n.children=[]),n.children.push(r),!0}var s=e[t].children;if(s&&s.length>0&&x((0,l._)(s)))return!0}return!1})(h),et(h),[4,f.OQ.from("test_menus").select("id").eq("company_id",G).single()];case 10:if(!p.sent().data)return[3,12];return[4,f.OQ.from("test_menus").update({menu_json:h,menu_text:JSON.stringify(h),updated_at:new Date().toISOString(),last_modified_by:K.id}).eq("company_id",G)];case 11:return p.sent(),[3,14];case 12:return[4,f.OQ.from("test_menus").insert({company_id:G,menu_json:h,menu_text:JSON.stringify(h),last_modified_by:K.id})];case 13:p.sent(),p.label=14;case 14:return ef(!1),ey(""),Z.Am.success("Test added successfully"),[3,16];case 15:return console.error("Error adding test:",p.sent()),Z.Am.error("Failed to add test"),[3,16];case 16:return[2]}})}),function(){return N.apply(this,arguments)}),to=(J=(0,r._)(function(){var e,t,n,r,s,o,l,u,d,m,h,x;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(!e2)return[2];c.label=1;case 1:if(c.trys.push([1,16,,17]),!e2.children)return[3,2];return e=ee.filter(function(e){return e.id!==e2.id}),[3,10];case 2:if(e=ee.map(function(e){var t;return(null===(t=e.children)||void 0===t?void 0:t.some(function(e){return e.id===e2.id}))?(0,i._)((0,a._)({},e),{children:e.children.filter(function(e){return e.id!==e2.id})}):e}),!e2.testIds)return[3,10];t=!0,n=!1,r=void 0,c.label=3;case 3:c.trys.push([3,8,9,10]),s=Object.keys(e2.testIds)[Symbol.iterator](),c.label=4;case 4:if(t=(o=s.next()).done)return[3,7];if(l=o.value,!(u=e2.testIds[l]))return[3,6];return[4,f.OQ.from("tests").delete().eq("id",u)];case 5:c.sent(),c.label=6;case 6:return t=!0,[3,4];case 7:return[3,10];case 8:return d=c.sent(),n=!0,r=d,[3,10];case 9:try{t||null==s.return||s.return()}finally{if(n)throw r}return[7];case 10:return[4,f.OQ.from("test_menus").select("id").eq("company_id",G).maybeSingle()];case 11:if(h=(m=c.sent()).data,(x=m.error)&&"PGRST116"!==x.code)throw x;if(!(null==h?void 0:h.id))return[3,13];return[4,f.OQ.from("test_menus").update({menu_json:e,menu_text:JSON.stringify(e),updated_at:new Date().toISOString(),last_modified_by:(null==K?void 0:K.id)||null}).eq("company_id",G)];case 12:return c.sent(),[3,15];case 13:return[4,f.OQ.from("test_menus").insert({company_id:G,menu_json:e,menu_text:JSON.stringify(e),last_modified_by:(null==K?void 0:K.id)||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})];case 14:c.sent(),c.label=15;case 15:return et(e),Z.Am.success("Deleted successfully"),e0(!1),e4(null),(null==ei?void 0:ei.id)===e2.id&&(eo(null),eS(null),eO("")),[3,17];case 16:return console.error("Error deleting:",c.sent()),Z.Am.error("Failed to delete"),[3,17];case 17:return[2]}})}),function(){return J.apply(this,arguments)}),tl=(L=(0,r._)(function(e){var t,n,r,o;return(0,c.Jh)(this,function(l){switch(l.label){case 0:if(ei&&tn(function(e){return(0,i._)((0,a._)({},e),(0,s._)({},ew,{markdown:eq,preview:eB}))}),eC(e),eQ((r=Y.find(function(t){return t.name===e}))?60*r.time:900),eO((null===(t=tt[e])||void 0===t?void 0:t.markdown)||""),eG(null===(n=tt[e])||void 0===n?void 0:n.preview),!(ei&&ei.testIds)||!(o=ei.testIds[e.toLowerCase()]))return[3,2];return[4,tc(o).catch(function(e){console.log("Could not load test from database, using cached content")})];case 1:l.sent(),l.label=2;case 2:return[2]}})}),function(e){return L.apply(this,arguments)}),tc=(M=(0,r._)(function(e){var t,n,r,o,l,u,d,m;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,f.OQ.from("tests").select("*").eq("id",e).single()];case 1:if(n=(t=c.sent()).data,r=t.error){if("PGRST116"===r.code)return console.log("No content found for this test/complexity yet"),eS(null),eO(""),eQ((o=Y.find(function(e){return e.name===ew}))?60*o.time:900),ei&&eG({id:e,title:ei.name,time_limit:o?60*o.time:900,questions:[]}),[2,null];throw r}return eS(n),eO(n.markdown_content||""),eQ((l=Y.find(function(e){return e.name===ew}))?60*l.time:900),n.markdown_content&&(u=n.markdown_content.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question}),eG(d={id:e,title:n.title,time_limit:n.time_limit,questions:u}),tn(function(e){return(0,i._)((0,a._)({},e),(0,s._)({},ew,{markdown:n.markdown_content,preview:d}))})),[2,n];case 2:throw console.error("Error loading test:",m=c.sent()),m;case 3:return[2]}})}),function(e){return M.apply(this,arguments)}),tu=(U=(0,r._)(function(){var e,t,n,r,o;return(0,c.Jh)(this,function(l){switch(l.label){case 0:if(!ei||!ei.testIds)return Z.Am.error("No test selected"),[2];eT(!0),l.label=1;case 1:if(l.trys.push([1,7,8,9]),!(t=null===(e=ei.testIds)||void 0===e?void 0:e[ew.toLowerCase()]))return Z.Am.error("Test ID not found for selected complexity"),eT(!1),[2];if((n=tm(eq)).errors.length>0)return eM(n.errors),e8(!0),eT(!1),[2];return r=eq.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question}),o={id:t,title:ei.name,time_limit:eA,questions:r},[4,f.OQ.from("tests").select("id").eq("id",t).single()];case 2:if(l.sent().data)return[3,4];return[4,f.OQ.from("tests").insert({id:t,title:ei.name,company_id:G,complexity:ew.toUpperCase(),category:ei.name,time_limit:eA,markdown_content:eq,created_at:new Date().toISOString()})];case 3:return l.sent(),[3,6];case 4:return[4,f.OQ.from("tests").update({title:ei.name,complexity:ew.toUpperCase(),category:ei.name,time_limit:eA,markdown_content:eq}).eq("id",t)];case 5:l.sent(),l.label=6;case 6:return tn(function(e){return(0,i._)((0,a._)({},e),(0,s._)({},ew,{markdown:eq,preview:o}))}),eG(o),Z.Am.success("Saved successfully"),[3,9];case 7:return console.error("Error saving content:",l.sent()),Z.Am.error("Failed to save content"),[3,9];case 8:return eT(!1),[7];case 9:return[2]}})}),function(){return U.apply(this,arguments)}),td=function(e){var t=!!e.children;return(0,u.jsx)("div",{className:"mb-1",children:(0,u.jsxs)(j,{open:er.includes(e.id),onOpenChange:function(){return tr(e.id)},children:[(0,u.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md ".concat((null==ei?void 0:ei.id)===e.id?"bg-muted":"hover:bg-muted/50"),onClick:function(){return ts(e)},children:[(0,u.jsxs)("div",{className:"flex items-center",children:[t?(0,u.jsx)(b,{asChild:!0,children:(0,u.jsx)(h.z,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",children:(0,u.jsx)(w.Z,{className:"h-4 w-4 transition-transform duration-200 ".concat(er.includes(e.id)?"":"-rotate-90")})})}):(0,u.jsx)("div",{className:"w-6"}),(0,u.jsx)("span",{className:"ml-1 ".concat(t?"font-medium":""),children:e.name})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[t?(0,u.jsx)(h.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:function(t){t.stopPropagation(),eb(e),ef(!0)},children:(0,u.jsx)(C.Z,{className:"h-3 w-3"})}):null,(0,u.jsx)(h.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:function(t){t.stopPropagation(),e4(e),e0(!0)},children:(0,u.jsx)(k.Z,{className:"h-3 w-3"})})]})]}),t&&e.children&&(0,u.jsx)(_,{children:(0,u.jsx)("div",{className:"pl-4 mt-1 border-l-2 border-muted",children:e.children.map(function(e){return(0,u.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md ".concat((null==ei?void 0:ei.id)===e.id?"bg-muted":"hover:bg-muted/50"),onClick:function(){return ts(e)},children:[(0,u.jsx)("span",{className:e.testIds&&!Object.keys(e.testIds).every(function(t){var n,r=null===(n=e.testIds)||void 0===n?void 0:n[t];return r&&r.length>0})?"text-red-500":"",children:e.name}),(0,u.jsx)(h.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:function(t){t.stopPropagation(),e4(e),e0(!0)},children:(0,u.jsx)(k.Z,{className:"h-3 w-3"})})]},e.id)})})})]})},e.id)},tm=function(e){var t,n=[];e.length>5e3&&n.push({type:"error",message:"Content exceeds maximum length (".concat(e.length,"/").concat(5e3," characters)")});var r=e.split("---").filter(function(e){return e.trim()});0===r.length?n.push({type:"error",message:'No questions found. Use "---" to separate questions.'}):r.length>30&&n.push({type:"error",message:"Too many questions (".concat(r.length,"/").concat(30," max)")});for(var s=/!\[.*?\]\((https?:\/\/[^)]+)\)/g,a=[];null!==(t=s.exec(e));){var i=t[1];try{var o=new URL(i).hostname;T.includes(o)||a.push(i)}catch(e){a.push(i)}}return a.length>0&&n.push({type:"warning",message:"Found ".concat(a.length," images from untrusted domains. Only use images from: ").concat(T.join(", "))}),{errors:n}};return eE?(0,u.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,u.jsx)(S.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,u.jsx)("span",{className:"ml-2 text-lg",children:"Loading..."})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(R.Z,{items:[{label:"Companies",onClick:function(){return $.push("/companies?view=list")}},{label:e6,onClick:function(){return $.push("/companies?view=detail&id=".concat(G))}},{label:"Test Manager"}]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,u.jsxs)(x.Zb,{className:"lg:col-span-1",children:[(0,u.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,u.jsx)(x.ll,{children:"Test Structure"}),(0,u.jsxs)(h.z,{size:"sm",onClick:function(){return eu(!0)},children:[(0,u.jsx)(I.Z,{className:"h-4 w-4 mr-1"}),"Add Category"]})]}),(0,u.jsx)(x.aY,{children:(0,u.jsx)("div",{className:"space-y-1",children:ee.length>0?ee.map(function(e){return td(e)}):(0,u.jsxs)("div",{className:"text-center p-8 text-muted-foreground",children:[(0,u.jsx)("p",{children:"No categories defined"}),(0,u.jsx)("p",{className:"text-sm mt-2",children:"Add a category to get started"})]})})})]}),(0,u.jsx)(x.Zb,{className:"lg:col-span-2",children:ei&&ei.testIds?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(x.Ol,{className:"pb-2",children:(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)(x.ll,{children:ei.name}),(0,u.jsx)("div",{className:"flex space-x-2 mt-4",children:Y.map(function(e){return(0,u.jsxs)(h.z,{variant:ew===e.name?"default":"outline",onClick:function(){return tl(e.name)},className:"flex-1",children:[e.name,(0,u.jsxs)("span",{className:"text-xs ml-1 opacity-80",children:[e.time,"m"]})]},e.name)})})]})}),(0,u.jsx)(x.aY,{className:"p-0",children:(0,u.jsxs)(g.mQ,{value:eR,onValueChange:eD,className:"w-full",children:[(0,u.jsxs)(g.dr,{className:"w-full",children:[(0,u.jsx)(g.SP,{value:"questions",className:"flex-1",children:"Questions"}),(0,u.jsx)(g.SP,{value:"preview",className:"flex-1",children:"Preview"})]}),(0,u.jsx)(g.nU,{value:"questions",className:"p-4",children:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)(y.g,{value:eq,onChange:function(e){return eO(e.target.value)},placeholder:"# Question 1  Your question content here  ---  # Question 2",className:"font-mono min-h-[400px]"}),(0,u.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,u.jsxs)("span",{children:[eq.length,"/",5e3," characters"]}),(0,u.jsxs)("span",{children:[eq.split("---").filter(function(e){return e.trim()}).length,"/",30," questions"]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,u.jsx)(h.z,{variant:"outline",onClick:function(){if(!eq.trim()){Z.Am.error("No content to preview");return}var e,t=eq.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question});eG({id:(null==ei?void 0:null===(e=ei.testIds)||void 0===e?void 0:e[ew.toLowerCase()])||"preview",title:(null==ei?void 0:ei.name)||"Preview",time_limit:eA,questions:t}),eH(0),eD("preview")},disabled:!eq.trim(),children:"Preview"}),(0,u.jsx)(h.z,{onClick:tu,disabled:eF||!eq.trim(),children:eF?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(S.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(q.Z,{className:"mr-2 h-4 w-4"}),"Save"]})})]})]})}),(0,u.jsx)(g.nU,{value:"preview",className:"p-0",children:(0,u.jsx)("div",{className:"h-[500px] overflow-hidden",children:eB&&eB.questions.length>0?(0,u.jsxs)("div",{className:"flex flex-col h-full",children:[(0,u.jsxs)("div",{className:"p-3 border-b flex justify-between items-center",children:[(0,u.jsxs)("span",{className:"text-sm font-medium",children:["Question ",eX+1," of ",eB.questions.length]}),(0,u.jsxs)("span",{className:"text-sm",children:[(0,u.jsx)(O.Z,{className:"h-4 w-4 inline mr-1"}),eA/60," minutes"]})]}),(0,u.jsx)(D.M,{mode:"wait",children:(0,u.jsx)(V.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex-grow overflow-auto p-4",children:(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:P().sanitize(E.TU.parse((null===(B=eB.questions[eX])||void 0===B?void 0:B.question)||"",{async:!1}))},className:"prose prose-sm max-w-none dark:prose-invert"})},eX)}),(0,u.jsxs)("div",{className:"p-3 border-t flex justify-between",children:[(0,u.jsxs)(h.z,{onClick:function(){eX>0&&eH(function(e){return e-1})},disabled:0===eX,variant:"outline",size:"sm",children:[(0,u.jsx)(z.Z,{className:"h-4 w-4 mr-1 rotate-180"}),"Previous"]}),(0,u.jsxs)(h.z,{onClick:function(){eB&&eX<eB.questions.length-1&&eH(function(e){return e+1})},disabled:eX===eB.questions.length-1,variant:"outline",size:"sm",children:["Next",(0,u.jsx)(z.Z,{className:"h-4 w-4 ml-1"})]})]})]}):(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)(A.Z,{className:"h-10 w-10 text-muted-foreground mx-auto mb-2"}),(0,u.jsx)("h3",{className:"text-lg font-medium",children:"No Preview Available"})]}),(0,u.jsx)("p",{className:"text-sm text-muted-foreground max-w-md",children:'Write your questions and click "Preview" to see how they will appear.'})]})})})]})})]}):(0,u.jsx)("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6",children:(0,u.jsx)("p",{className:"text-muted-foreground",children:"Select a test from the left panel to edit its content"})})})]}),(0,u.jsx)(F.Vq,{open:ec,onOpenChange:eu,children:(0,u.jsxs)(F.cZ,{children:[(0,u.jsxs)(F.fK,{children:[(0,u.jsx)(F.$N,{children:"Add Category"}),(0,u.jsx)(F.Be,{children:"Create a new category for organizing tests"})]}),(0,u.jsxs)("div",{className:"py-4",children:[(0,u.jsx)(v._,{htmlFor:"category-name",children:"Category Name"}),(0,u.jsx)(p.I,{id:"category-name",value:ex,onChange:function(e){return ep(e.target.value)},placeholder:"e.g., ML Engineer"})]}),(0,u.jsxs)(F.cN,{children:[(0,u.jsx)(h.z,{variant:"outline",onClick:function(){return eu(!1)},children:"Cancel"}),(0,u.jsx)(h.z,{onClick:ta,children:"Add Category"})]})]})}),(0,u.jsx)(F.Vq,{open:em,onOpenChange:ef,children:(0,u.jsxs)(F.cZ,{children:[(0,u.jsxs)(F.fK,{children:[(0,u.jsx)(F.$N,{children:"Add Test"}),(0,u.jsxs)(F.Be,{children:["Add a new test to ",null==ej?void 0:ej.name]})]}),(0,u.jsxs)("div",{className:"py-4",children:[(0,u.jsx)(v._,{htmlFor:"test-name",children:"Test Name"}),(0,u.jsx)(p.I,{id:"test-name",value:eg,onChange:function(e){return ey(e.target.value)},placeholder:"e.g., Mathematics"})]}),(0,u.jsxs)(F.cN,{children:[(0,u.jsx)(h.z,{variant:"outline",onClick:function(){return ef(!1)},children:"Cancel"}),(0,u.jsx)(h.z,{onClick:ti,children:"Add Test"})]})]})}),(0,u.jsx)(F.Vq,{open:eW,onOpenChange:e0,children:(0,u.jsxs)(F.cZ,{children:[(0,u.jsxs)(F.fK,{children:[(0,u.jsx)(F.$N,{children:"Confirm Deletion"}),(0,u.jsxs)(F.Be,{children:["Are you sure you want to delete ",(null==e2?void 0:e2.children)?"category":"test",' "',null==e2?void 0:e2.name,'"?',(null==e2?void 0:e2.children)&&e2.children.length>0&&(0,u.jsx)("p",{className:"text-destructive mt-2",children:"This will also delete all tests within this category!"})]})]}),(0,u.jsxs)(F.cN,{children:[(0,u.jsx)(h.z,{variant:"outline",onClick:function(){return e0(!1)},children:"Cancel"}),(0,u.jsx)(h.z,{variant:"destructive",onClick:to,children:"Delete"})]})]})}),(0,u.jsx)(F.Vq,{open:e7,onOpenChange:e8,children:(0,u.jsxs)(F.cZ,{children:[(0,u.jsxs)(F.fK,{children:[(0,u.jsx)(F.$N,{children:"Validation Issues"}),(0,u.jsx)(F.Be,{children:"Please fix the following issues before saving:"})]}),(0,u.jsx)("div",{className:"py-4 max-h-[60vh] overflow-auto",children:(0,u.jsx)("ul",{className:"space-y-2",children:eL.map(function(e,t){return(0,u.jsx)("li",{className:"p-2 rounded ".concat("error"===e.type?"bg-destructive/10":"bg-amber-500/10"),children:(0,u.jsxs)("div",{className:"flex items-start",children:["error"===e.type?(0,u.jsx)(Q.Z,{className:"h-5 w-5 text-destructive mr-2 flex-shrink-0"}):(0,u.jsx)(Q.Z,{className:"h-5 w-5 text-amber-500 mr-2 flex-shrink-0"}),(0,u.jsx)("span",{children:e.message})]})},t)})})}),(0,u.jsx)(F.cN,{children:(0,u.jsx)(h.z,{onClick:function(){return e8(!1)},children:"Close"})})]})})]})}},62869:function(e,t,n){n.d(t,{d:function(){return u},z:function(){return d}});var r=n(5194),s=n(46796),a=n(57437),i=n(2265),o=n(37053),l=n(90535),c=n(94508),u=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef(function(e,t){var n=e.className,i=e.variant,l=e.size,d=e.asChild,m=(0,s._)(e,["className","variant","size","asChild"]),f=void 0!==d&&d?o.g7:"button";return(0,a.jsx)(f,(0,r._)({className:(0,c.cn)(u({variant:i,size:l,className:n})),ref:t},m))});d.displayName="Button"},66070:function(e,t,n){n.d(t,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return l},aY:function(){return m},eW:function(){return f},ll:function(){return u}});var r=n(5194),s=n(46796),a=n(57437),i=n(2265),o=n(94508),l=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n)},i))});l.displayName="Card";var c=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",n)},i))});c.displayName="CardHeader";var u=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",n)},i))});u.displayName="CardTitle";var d=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n)},i))});d.displayName="CardDescription";var m=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:t,className:(0,o.cn)("p-6 pt-0",n)},i))});m.displayName="CardContent";var f=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",n)},i))});f.displayName="CardFooter"},26110:function(e,t,n){n.d(t,{$N:function(){return v},Be:function(){return g},Vq:function(){return d},cN:function(){return p},cZ:function(){return h},fK:function(){return x}});var r=n(5194),s=n(1780),a=n(46796),i=n(57437),o=n(2265),l=n(49027),c=n(32489),u=n(94508),d=l.fC;l.xz;var m=l.h_;l.x8;var f=o.forwardRef(function(e,t){var n=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)(l.aV,(0,r._)({ref:t,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},s))});f.displayName=l.aV.displayName;var h=o.forwardRef(function(e,t){var n=e.className,o=e.children,d=(0,a._)(e,["className","children"]);return(0,i.jsxs)(m,{children:[(0,i.jsx)(f,{}),(0,i.jsxs)(l.VY,(0,s._)((0,r._)({ref:t,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},d),{children:[o,(0,i.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(c.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});h.displayName=l.VY.displayName;var x=function(e){var t=e.className,n=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,r._)({className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};x.displayName="DialogHeader";var p=function(e){var t=e.className,n=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,r._)({className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};p.displayName="DialogFooter";var v=o.forwardRef(function(e,t){var n=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)(l.Dx,(0,r._)({ref:t,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",n)},s))});v.displayName=l.Dx.displayName;var g=o.forwardRef(function(e,t){var n=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)(l.dk,(0,r._)({ref:t,className:(0,u.cn)("text-sm text-muted-foreground",n)},s))});g.displayName=l.dk.displayName},95186:function(e,t,n){n.d(t,{I:function(){return l}});var r=n(5194),s=n(46796),a=n(57437),i=n(2265),o=n(94508),l=i.forwardRef(function(e,t){var n=e.className,i=e.type,l=(0,s._)(e,["className","type"]);return(0,a.jsx)("input",(0,r._)({type:i,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},l))});l.displayName="Input"},26815:function(e,t,n){n.d(t,{_:function(){return d}});var r=n(5194),s=n(46796),a=n(57437),i=n(2265),o=n(6394),l=n(90535),c=n(94508),u=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)(o.f,(0,r._)({ref:t,className:(0,c.cn)(u(),n)},i))});d.displayName=o.f.displayName},12339:function(e,t,n){n.d(t,{SP:function(){return d},dr:function(){return u},mQ:function(){return c},nU:function(){return m}});var r=n(5194),s=n(46796),a=n(57437),i=n(2265),o=n(20271),l=n(94508),c=o.fC,u=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)(o.aV,(0,r._)({ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n)},i))});u.displayName=o.aV.displayName;var d=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)(o.xz,(0,r._)({ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n)},i))});d.displayName=o.xz.displayName;var m=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)(o.VY,(0,r._)({ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},i))});m.displayName=o.VY.displayName},76818:function(e,t,n){n.d(t,{g:function(){return l}});var r=n(5194),s=n(46796),a=n(57437),i=n(2265),o=n(94508),l=i.forwardRef(function(e,t){var n=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("textarea",(0,r._)({className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},i))});l.displayName="Textarea"},46281:function(e,t,n){n.d(t,{H:function(){return l},V:function(){return o}});var r=n(50059),s=n(57437),a=n(2265),i=n(280),o=(0,a.createContext)(null);function l(e){var t=e.children,n=(0,r._)((0,a.useState)(null),2),l=n[0],c=n[1],u=(0,r._)((0,a.useState)(!0),2),d=u[0],m=u[1];return(0,a.useEffect)(function(){i.OQ.auth.getSession().then(function(e){var t,n=e.data.session;c(null!==(t=null==n?void 0:n.user)&&void 0!==t?t:null),m(!1)});var e=i.OQ.auth.onAuthStateChange(function(e,t){var n;c(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null)}).data.subscription;return function(){return e.unsubscribe()}},[]),(0,s.jsx)(o.Provider,{value:{user:l,loading:d},children:t})}},76362:function(e,t,n){n.d(t,{a:function(){return a}});var r=n(2265),s=n(46281),a=function(){var e=(0,r.useContext)(s.V);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},280:function(e,t,n){n.d(t,{OQ:function(){return r}});var r=(0,n(93777).eI)("https://xwrjwvspbayowtwbrbcd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3cmp3dnNwYmF5b3d0d2JyYmNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEzNDQ4OTksImV4cCI6MjA1NjkyMDg5OX0.mrgp3CeKu8eeoC0tRN_y-XpFgklVltYBqQYjY4HSIhQ")},94508:function(e,t,n){n.d(t,{cn:function(){return a}});var r=n(61994),s=n(53335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}}}]);