(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{90033:function(e,a,n){Promise.resolve().then(n.bind(n,27252))},27252:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return y}});var t=n(57437),r=n(2265),s=n(99376),i=n(93113),o=n(2403),c=n(50059),u=n(5853),l=n(280),d=n(62869),f=n(66070),m=n(14438),v=n(4506),p=n(32832),h=n(32660),b=n(83229),x=n(76818);function g(e){var a,n=e.companyId,i=(0,s.useRouter)(),g=(0,c._)((0,r.useState)(null),2),N=g[0],y=g[1],j=(0,c._)((0,r.useState)(!0),2),_=j[0],w=j[1],C=(0,c._)((0,r.useState)(!1),2),k=C[0],S=C[1],I=(0,c._)((0,r.useState)(null),2),V=(I[0],I[1]),M=(0,c._)((0,r.useState)(""),2),R=M[0],F=M[1],z=(0,c._)((0,r.useState)(null),2),O=z[0],T=z[1];(0,r.useEffect)(function(){function e(){return(e=(0,o._)(function(){var e,a,t,r,s,i,o,c;return(0,u.Jh)(this,function(u){switch(u.label){case 0:w(!0),u.label=1;case 1:return u.trys.push([1,7,8,9]),[4,l.OQ.from("companies").select("id, name").eq("id",n).single()];case 2:if(a=(e=u.sent()).data,t=e.error)throw t;return y(a),r="chatbot-flow-".concat(n,".json"),[4,l.OQ.storage.from("test-flows").download(r)];case 3:if(i=(s=u.sent()).data,!(!s.error&&i))return[3,5];return[4,i.text()];case 4:F(o=u.sent());try{V(JSON.parse(o))}catch(e){T("Invalid JSON format in flow file")}return[3,6];case 5:V(c={metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),company:a.name,description:"".concat(a.name," interview questions")},nodes:{root:{question:"Which area are you interested in exploring?",options:[]}},options:{}}),F(JSON.stringify(c,null,2)),u.label=6;case 6:return[3,9];case 7:return console.error("Error fetching data:",u.sent()),T("Failed to load company or flow data"),m.Am.error("Failed to load data"),[3,9];case 8:return w(!1),[7];case 9:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n]);var Z=(a=(0,o._)(function(){var e,a,t;return(0,u.Jh)(this,function(r){switch(r.label){case 0:if(!N)return[2];S(!0),r.label=1;case 1:r.trys.push([1,3,4,5]);try{e=JSON.parse(R)}catch(e){return m.Am.error("Invalid JSON format"),[2]}return a="chatbot-flow-".concat(n,".json"),[4,l.OQ.storage.from("test-flows").upload(a,new Blob([R],{type:"application/json"}),{upsert:!0})];case 2:if(t=r.sent().error)throw t;return m.Am.success("Flow saved successfully"),V(e),[3,5];case 3:return console.error("Error saving flow:",r.sent()),m.Am.error("Failed to save flow"),[3,5];case 4:return S(!1),[7];case 5:return[2]}})}),function(){return a.apply(this,arguments)});return _?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{items:[{label:"Companies",href:(0,v.G)("/companies?view=list")},{label:"Loading..."}]}),(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"}),(0,t.jsx)("span",{className:"ml-2",children:"Loading..."})]})]}):N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{items:[{label:"Companies",href:(0,v.G)("/companies?view=list")},{label:N.name,href:(0,v.G)("/companies?view=detail&id=".concat(n))},{label:"Manage Test Flow"}]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Manage Test Flow"}),(0,t.jsxs)("p",{className:"text-gray-500",children:["Configure the test structure and options for ",N.name]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,t.jsxs)(f.Zb,{children:[(0,t.jsx)(f.Ol,{children:(0,t.jsx)(f.ll,{children:"Edit Flow JSON"})}),(0,t.jsxs)(f.aY,{children:[O&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 p-4 mb-4 rounded-md",children:O}),(0,t.jsx)(x.g,{value:R,onChange:function(e){return F(e.target.value)},className:"font-mono text-sm h-[500px]"}),(0,t.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,t.jsxs)(d.z,{variant:"outline",className:"mr-2",onClick:function(){return i.push((0,v.G)("/companies?view=detail&id=".concat(n)))},children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,t.jsxs)(d.z,{onClick:Z,disabled:k,children:[(0,t.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),k?"Saving...":"Save Flow"]})]})]})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{items:[{label:"Companies",href:(0,v.G)("/companies?view=list")},{label:"Company Not Found"}]}),(0,t.jsx)("div",{className:"text-center p-8",children:"Company not found"})]})}function N(){var e=(0,s.useSearchParams)().get("companyId");return e?(0,t.jsx)(g,{companyId:e}):(0,t.jsx)("div",{className:"p-4",children:"Company ID is required"})}function y(){return(0,t.jsx)(i.Z,{children:(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"p-4 text-center",children:"Loading..."}),children:(0,t.jsx)(N,{})})})}},32832:function(e,a,n){"use strict";n.d(a,{Z:function(){return c}});var t=n(57437),r=n(2265),s=n(27648),i=(0,n(79205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),o=n(10407);function c(e){var a=e.items;return(0,t.jsxs)("nav",{className:"flex items-center text-sm mb-6 bg-gray-50 p-3 rounded-md",children:[(0,t.jsxs)(s.default,{href:"/",className:"flex items-center text-gray-600 hover:text-blue-600",children:[(0,t.jsx)(i,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("span",{children:"Home"})]}),a.map(function(e,a){return(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mx-2 text-gray-400"}),e.href?(0,t.jsx)(s.default,{href:e.href,className:"text-gray-600 hover:text-blue-600",children:e.label}):(0,t.jsx)("span",{className:"text-gray-900 font-medium",children:e.label})]},a)})]})}},93113:function(e,a,n){"use strict";n.d(a,{Z:function(){return i}});var t=n(57437);n(2265);var r=n(12339),s=n(99376);function i(e){var a=e.children,n=(0,s.useRouter)(),i=(0,s.usePathname)();return(0,t.jsxs)("div",{className:"container mx-auto p-4 max-w-6xl",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Interview Management System"}),(0,t.jsx)(r.mQ,{defaultValue:(null==i?void 0:i.includes("/tests"))?"tests":(null==i?void 0:i.includes("/question-sets"))?"question-sets":"companies",className:"mb-8",onValueChange:function(e){switch(e){case"companies":n.push("/companies");break;case"tests":n.push("/tests");break;case"question-sets":n.push("/question-sets")}},children:(0,t.jsxs)(r.dr,{className:"grid w-full grid-cols-3 h-14 text-lg",children:[(0,t.jsx)(r.SP,{value:"companies",className:"py-3",children:"Companies"}),(0,t.jsx)(r.SP,{value:"tests",className:"py-3",children:"Tests"}),(0,t.jsx)(r.SP,{value:"question-sets",className:"py-3",children:"Question Sets"})]})}),(0,t.jsx)("main",{children:a})]})}},62869:function(e,a,n){"use strict";n.d(a,{d:function(){return l},z:function(){return d}});var t=n(5194),r=n(46796),s=n(57437),i=n(2265),o=n(37053),c=n(90535),u=n(94508),l=(0,c.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef(function(e,a){var n=e.className,i=e.variant,c=e.size,d=e.asChild,f=(0,r._)(e,["className","variant","size","asChild"]),m=void 0!==d&&d?o.g7:"button";return(0,s.jsx)(m,(0,t._)({className:(0,u.cn)(l({variant:i,size:c,className:n})),ref:a},f))});d.displayName="Button"},66070:function(e,a,n){"use strict";n.d(a,{Ol:function(){return u},SZ:function(){return d},Zb:function(){return c},aY:function(){return f},eW:function(){return m},ll:function(){return l}});var t=n(5194),r=n(46796),s=n(57437),i=n(2265),o=n(94508),c=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)("div",(0,t._)({ref:a,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n)},i))});c.displayName="Card";var u=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)("div",(0,t._)({ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",n)},i))});u.displayName="CardHeader";var l=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)("div",(0,t._)({ref:a,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",n)},i))});l.displayName="CardTitle";var d=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)("div",(0,t._)({ref:a,className:(0,o.cn)("text-sm text-muted-foreground",n)},i))});d.displayName="CardDescription";var f=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)("div",(0,t._)({ref:a,className:(0,o.cn)("p-6 pt-0",n)},i))});f.displayName="CardContent";var m=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)("div",(0,t._)({ref:a,className:(0,o.cn)("flex items-center p-6 pt-0",n)},i))});m.displayName="CardFooter"},12339:function(e,a,n){"use strict";n.d(a,{SP:function(){return d},dr:function(){return l},mQ:function(){return u},nU:function(){return f}});var t=n(5194),r=n(46796),s=n(57437),i=n(2265),o=n(20271),c=n(94508),u=o.fC,l=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)(o.aV,(0,t._)({ref:a,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n)},i))});l.displayName=o.aV.displayName;var d=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)(o.xz,(0,t._)({ref:a,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n)},i))});d.displayName=o.xz.displayName;var f=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)(o.VY,(0,t._)({ref:a,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},i))});f.displayName=o.VY.displayName},76818:function(e,a,n){"use strict";n.d(a,{g:function(){return c}});var t=n(5194),r=n(46796),s=n(57437),i=n(2265),o=n(94508),c=i.forwardRef(function(e,a){var n=e.className,i=(0,r._)(e,["className"]);return(0,s.jsx)("textarea",(0,t._)({className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:a},i))});c.displayName="Textarea"},280:function(e,a,n){"use strict";n.d(a,{OQ:function(){return t}});var t=(0,n(93777).eI)("https://xwrjwvspbayowtwbrbcd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3cmp3dnNwYmF5b3d0d2JyYmNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEzNDQ4OTksImV4cCI6MjA1NjkyMDg5OX0.mrgp3CeKu8eeoC0tRN_y-XpFgklVltYBqQYjY4HSIhQ")},94508:function(e,a,n){"use strict";n.d(a,{cn:function(){return s}});var t=n(61994),r=n(53335);function s(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return(0,r.m6)((0,t.W)(a))}},32660:function(e,a,n){"use strict";n.d(a,{Z:function(){return t}});var t=(0,n(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},83229:function(e,a,n){"use strict";n.d(a,{Z:function(){return t}});var t=(0,n(79205).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},99376:function(e,a,n){"use strict";var t=n(35475);n.o(t,"usePathname")&&n.d(a,{usePathname:function(){return t.usePathname}}),n.o(t,"useRouter")&&n.d(a,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(a,{useSearchParams:function(){return t.useSearchParams}})},4506:function(e,a,n){"use strict";n.d(a,{G:function(){return t}});var t=function(e){var a=e.startsWith("/")?e:"/".concat(e);return window.location.hostname.includes("github.io")?a.startsWith("/job-pass-v1/")?a:"/job-pass-v1".concat(a):a}},20271:function(e,a,n){"use strict";n.d(a,{VY:function(){return Z},aV:function(){return O},fC:function(){return z},xz:function(){return T}});var t=n(5194),r=n(1780),s=n(46796),i=n(50059),o=n(2265),c=n(6741),u=n(73966),l=n(1353),d=n(71599),f=n(66840),m=n(29114),v=n(80886),p=n(99255),h=n(57437),b="Tabs",x=(0,i._)((0,u.b)(b,[l.Pc]),2),g=x[0];x[1];var N=(0,l.Pc)(),y=(0,i._)(g(b),2),j=y[0],_=y[1],w=o.forwardRef(function(e,a){var n=e.__scopeTabs,o=e.value,c=e.onValueChange,u=e.defaultValue,l=e.orientation,d=void 0===l?"horizontal":l,b=e.dir,x=e.activationMode,g=(0,s._)(e,["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"]),N=(0,m.gm)(b),y=(0,i._)((0,v.T)({prop:o,onChange:c,defaultProp:u}),2),_=y[0],w=y[1];return(0,h.jsx)(j,{scope:n,baseId:(0,p.M)(),value:_,onValueChange:w,orientation:d,dir:N,activationMode:void 0===x?"automatic":x,children:(0,h.jsx)(f.WV.div,(0,r._)((0,t._)({dir:N,"data-orientation":d},g),{ref:a}))})});w.displayName=b;var C="TabsList",k=o.forwardRef(function(e,a){var n=e.__scopeTabs,i=e.loop,o=(0,s._)(e,["__scopeTabs","loop"]),c=_(C,n),u=N(n);return(0,h.jsx)(l.fC,(0,r._)((0,t._)({asChild:!0},u),{orientation:c.orientation,dir:c.dir,loop:void 0===i||i,children:(0,h.jsx)(f.WV.div,(0,r._)((0,t._)({role:"tablist","aria-orientation":c.orientation},o),{ref:a}))}))});k.displayName=C;var S="TabsTrigger",I=o.forwardRef(function(e,a){var n=e.__scopeTabs,i=e.value,o=e.disabled,u=void 0!==o&&o,d=(0,s._)(e,["__scopeTabs","value","disabled"]),m=_(S,n),v=N(n),p=R(m.baseId,i),b=F(m.baseId,i),x=i===m.value;return(0,h.jsx)(l.ck,(0,r._)((0,t._)({asChild:!0},v),{focusable:!u,active:x,children:(0,h.jsx)(f.WV.button,(0,r._)((0,t._)({type:"button",role:"tab","aria-selected":x,"aria-controls":b,"data-state":x?"active":"inactive","data-disabled":u?"":void 0,disabled:u,id:p},d),{ref:a,onMouseDown:(0,c.M)(e.onMouseDown,function(e){u||0!==e.button||!1!==e.ctrlKey?e.preventDefault():m.onValueChange(i)}),onKeyDown:(0,c.M)(e.onKeyDown,function(e){[" ","Enter"].includes(e.key)&&m.onValueChange(i)}),onFocus:(0,c.M)(e.onFocus,function(){var e="manual"!==m.activationMode;x||u||!e||m.onValueChange(i)})}))}))});I.displayName=S;var V="TabsContent",M=o.forwardRef(function(e,a){var n=e.__scopeTabs,i=e.value,c=e.forceMount,u=e.children,l=(0,s._)(e,["__scopeTabs","value","forceMount","children"]),m=_(V,n),v=R(m.baseId,i),p=F(m.baseId,i),b=i===m.value,x=o.useRef(b);return o.useEffect(function(){var e=requestAnimationFrame(function(){return x.current=!1});return function(){return cancelAnimationFrame(e)}},[]),(0,h.jsx)(d.z,{present:c||b,children:function(n){var s=n.present;return(0,h.jsx)(f.WV.div,(0,r._)((0,t._)({"data-state":b?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":v,hidden:!s,id:p,tabIndex:0},l),{ref:a,style:(0,r._)((0,t._)({},e.style),{animationDuration:x.current?"0s":void 0}),children:s&&u}))}})});function R(e,a){return"".concat(e,"-trigger-").concat(a)}function F(e,a){return"".concat(e,"-content-").concat(a)}M.displayName=V;var z=w,O=k,T=I,Z=M}},function(e){e.O(0,[518,825,266,648,438,971,117,744],function(){return e(e.s=90033)}),_N_E=e.O()}]);