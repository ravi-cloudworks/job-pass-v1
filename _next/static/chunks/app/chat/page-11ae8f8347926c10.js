(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{62852:function(e,t,n){Promise.resolve().then(n.bind(n,87747))},87747:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eC}});var a,s,r=n(2403),o=n(5194),i=n(1780),c=n(50059),l=n(85735),d=n(5853),u=n(57437),m=n(2265),f=n(12249),x=n(62869),p=n(46796),h=n(43643),g=n(94508),v=m.forwardRef(function(e,t){var n=e.className,a=e.children,s=(0,p._)(e,["className","children"]);return(0,u.jsxs)(h.fC,(0,i._)((0,o._)({ref:t,className:(0,g.cn)("relative overflow-hidden",n)},s),{children:[(0,u.jsx)(h.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,u.jsx)(y,{}),(0,u.jsx)(h.Ns,{})]}))});v.displayName=h.fC.displayName;var y=m.forwardRef(function(e,t){var n=e.className,a=e.orientation,s=void 0===a?"vertical":a,r=(0,p._)(e,["className","orientation"]);return(0,u.jsx)(h.gb,(0,i._)((0,o._)({ref:t,orientation:s,className:(0,g.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n)},r),{children:(0,u.jsx)(h.q4,{className:"relative flex-1 rounded-full bg-border"})}))});y.displayName=h.gb.displayName;var b=n(16831),N=n(91723),j=n(82222),w=n(92369),_=n(65613),S=JSON.parse('{"nodes":{"root":{"question":"What area of tech are you interested in exploring?","options":["absolute_beginners","web_development","frameworks","languages_platforms","devops","mobile_development","databases","computer_science","machine_learning","management","game_development","design","blockchain","cyber_security"]},"absolute_beginners":{"text":"Absolute Beginners","question":"Choose a beginner-friendly path to start your journey:","options":["frontend_beginner","backend_beginner","devops_beginner"],"isEndpoint":true,"questionSetId":{"frontend_beginner":{"standard":{"easy":["FRONT-BEG-001"],"medium":["FRONT-BEG-002"],"Advanced":["FRONT-BEG-003"]}},"backend_beginner":{"standard":{"easy":["BACK-BEG-001"],"medium":["BACK-BEG-002"],"Advanced":["BACK-BEG-003"]}},"devops_beginner":{"standard":{"easy":["DEVOPS-BEG-001"],"medium":["DEVOPS-BEG-002"],"Advanced":["DEVOPS-BEG-003"]}}}},"web_development":{"text":"Web Development","question":"What aspect of web development interests you?","options":["frontend","backend","full_stack","api_design","qa","graphql","git_github"],"isEndpoint":true,"questionSetId":{"frontend":{"standard":{"easy":["FRONTEND-001"],"medium":["FRONTEND-002"],"Advanced":["FRONTEND-003"]}},"backend":{"standard":{"easy":["BACKEND-001"],"medium":["BACKEND-002"],"Advanced":["BACKEND-003"]}},"full_stack":{"standard":{"easy":["FULLSTACK-001"],"medium":["FULLSTACK-002"],"Advanced":["FULLSTACK-003"]}},"api_design":{"standard":{"easy":["API-001"],"medium":["API-002"],"Advanced":["API-003"]}},"qa":{"standard":{"easy":["QA-001"],"medium":["QA-002"],"Advanced":["QA-003"]}},"graphql":{"standard":{"easy":["GRAPHQL-001"],"medium":["GRAPHQL-002"],"Advanced":["GRAPHQL-003"]}},"git_github":{"standard":{"easy":["GIT-001"],"medium":["GIT-002"],"Advanced":["GIT-003"]}}}},"frameworks":{"text":"Frameworks","question":"Which framework would you like to explore?","options":["react","vue","angular","spring_boot","aspnet_core"],"isEndpoint":true,"questionSetId":{"react":{"standard":{"easy":["REACT-001"],"medium":["REACT-002"],"Advanced":["REACT-003"]}},"vue":{"standard":{"easy":["VUE-001"],"medium":["VUE-002"],"Advanced":["VUE-003"]}},"angular":{"standard":{"easy":["ANGULAR-001"],"medium":["ANGULAR-002"],"Advanced":["ANGULAR-003"]}},"spring_boot":{"standard":{"easy":["SPRING-001"],"medium":["SPRING-002"],"Advanced":["SPRING-003"]}},"aspnet_core":{"standard":{"easy":["ASPNET-001"],"medium":["ASPNET-002"],"Advanced":["ASPNET-003"]}}}},"languages_platforms":{"text":"Languages / Platforms","question":"Which programming language or platform would you like to learn?","options":["javascript","typescript","nodejs","php","cpp","go","rust","python","java","sql"],"isEndpoint":true,"questionSetId":{"javascript":{"standard":{"easy":["JS-001"],"medium":["JS-002"],"Advanced":["JS-003"]}},"typescript":{"standard":{"easy":["TS-001"],"medium":["TS-002"],"Advanced":["TS-003"]}},"nodejs":{"standard":{"easy":["NODE-001"],"medium":["NODE-002"],"Advanced":["NODE-003"]}},"php":{"standard":{"easy":["PHP-001"],"medium":["PHP-002"],"Advanced":["PHP-003"]}},"cpp":{"standard":{"easy":["CPP-001"],"medium":["CPP-002"],"Advanced":["CPP-003"]}},"go":{"standard":{"easy":["GO-001"],"medium":["GO-002"],"Advanced":["GO-003"]}},"rust":{"standard":{"easy":["RUST-001"],"medium":["RUST-002"],"Advanced":["RUST-003"]}},"python":{"standard":{"easy":["PYTHON-001"],"medium":["PYTHON-002"],"Advanced":["PYTHON-003"]}},"java":{"standard":{"easy":["JAVA-001"],"medium":["JAVA-002"],"Advanced":["JAVA-003"]}},"sql":{"standard":{"easy":["SQL-001"],"medium":["SQL-002"],"Advanced":["SQL-003"]}}}},"devops":{"text":"DevOps","question":"Which DevOps area would you like to focus on?","options":["devops_general","docker","kubernetes","aws","cloudflare","linux","terraform"],"isEndpoint":true,"questionSetId":{"devops_general":{"standard":{"easy":["DEVOPS-001"],"medium":["DEVOPS-002"],"Advanced":["DEVOPS-003"]}},"docker":{"standard":{"easy":["DOCKER-001"],"medium":["DOCKER-002"],"Advanced":["DOCKER-003"]}},"kubernetes":{"standard":{"easy":["K8S-001"],"medium":["K8S-002"],"Advanced":["K8S-003"]}},"aws":{"standard":{"easy":["AWS-001"],"medium":["AWS-002"],"Advanced":["AWS-003"]}},"cloudflare":{"standard":{"easy":["CLOUDFLARE-001"],"medium":["CLOUDFLARE-002"],"Advanced":["CLOUDFLARE-003"]}},"linux":{"standard":{"easy":["LINUX-001"],"medium":["LINUX-002"],"Advanced":["LINUX-003"]}},"terraform":{"standard":{"easy":["TERRAFORM-001"],"medium":["TERRAFORM-002"],"Advanced":["TERRAFORM-003"]}}}},"mobile_development":{"text":"Mobile Development","question":"Which mobile development path interests you?","options":["android","ios","react_native","flutter"],"isEndpoint":true,"questionSetId":{"android":{"standard":{"easy":["ANDROID-001"],"medium":["ANDROID-002"],"Advanced":["ANDROID-003"]}},"ios":{"standard":{"easy":["IOS-001"],"medium":["IOS-002"],"Advanced":["IOS-003"]}},"react_native":{"standard":{"easy":["REACTNATIVE-001"],"medium":["REACTNATIVE-002"],"Advanced":["REACTNATIVE-003"]}},"flutter":{"standard":{"easy":["FLUTTER-001"],"medium":["FLUTTER-002"],"Advanced":["FLUTTER-003"]}}}},"databases":{"text":"Databases","question":"Which database technology would you like to learn?","options":["postgresql","mongodb","redis"],"isEndpoint":true,"questionSetId":{"postgresql":{"standard":{"easy":["POSTGRES-001"],"medium":["POSTGRES-002"],"Advanced":["POSTGRES-003"]}},"mongodb":{"standard":{"easy":["MONGODB-001"],"medium":["MONGODB-002"],"Advanced":["MONGODB-003"]}},"redis":{"standard":{"easy":["REDIS-001"],"medium":["REDIS-002"],"Advanced":["REDIS-003"]}}}},"computer_science":{"text":"Computer Science","question":"Which computer science topic interests you?","options":["cs_fundamentals","data_structures","system_design","design_architecture","software_architect","code_review","technical_writer","devrel_engineer"],"isEndpoint":true,"questionSetId":{"cs_fundamentals":{"standard":{"easy":["CS-001"],"medium":["CS-002"],"Advanced":["CS-003"]}},"data_structures":{"standard":{"easy":["DS-001"],"medium":["DS-002"],"Advanced":["DS-003"]}},"system_design":{"standard":{"easy":["SYSDESIGN-001"],"medium":["SYSDESIGN-002"],"Advanced":["SYSDESIGN-003"]}},"design_architecture":{"standard":{"easy":["ARCH-001"],"medium":["ARCH-002"],"Advanced":["ARCH-003"]}},"software_architect":{"standard":{"easy":["SWARCH-001"],"medium":["SWARCH-002"],"Advanced":["SWARCH-003"]}},"code_review":{"standard":{"easy":["CODEREVIEW-001"],"medium":["CODEREVIEW-002"],"Advanced":["CODEREVIEW-003"]}},"technical_writer":{"standard":{"easy":["TECHWRITER-001"],"medium":["TECHWRITER-002"],"Advanced":["TECHWRITER-003"]}},"devrel_engineer":{"standard":{"easy":["DEVREL-001"],"medium":["DEVREL-002"],"Advanced":["DEVREL-003"]}}}},"machine_learning":{"text":"Machine Learning","question":"Which ML/AI role are you interested in?","options":["ai_data_scientist","ai_engineer","data_analyst","mlops","prompt_engineering"],"isEndpoint":true,"questionSetId":{"ai_data_scientist":{"standard":{"easy":["AIDSCI-001"],"medium":["AIDSCI-002"],"Advanced":["AIDSCI-003"]}},"ai_engineer":{"standard":{"easy":["AIENG-001"],"medium":["AIENG-002"],"Advanced":["AIENG-003"]}},"data_analyst":{"standard":{"easy":["DATAANA-001"],"medium":["DATAANA-002"],"Advanced":["DATAANA-003"]}},"mlops":{"standard":{"easy":["MLOPS-001"],"medium":["MLOPS-002"],"Advanced":["MLOPS-003"]}},"prompt_engineering":{"standard":{"easy":["PROMPTENG-001"],"medium":["PROMPTENG-002"],"Advanced":["PROMPTENG-003"]}}}},"management":{"text":"Management","question":"Which management role are you interested in?","options":["product_manager","engineering_manager"],"isEndpoint":true,"questionSetId":{"product_manager":{"standard":{"easy":["PM-001"],"medium":["PM-002"],"Advanced":["PM-003"]}},"engineering_manager":{"standard":{"easy":["EM-001"],"medium":["EM-002"],"Advanced":["EM-003"]}}}},"game_development":{"text":"Game Development","question":"Which aspect of game development interests you?","options":["client_side_game_dev","server_side_game_dev"],"isEndpoint":true,"questionSetId":{"client_side_game_dev":{"standard":{"easy":["CLIENTGAME-001"],"medium":["CLIENTGAME-002"],"Advanced":["CLIENTGAME-003"]}},"server_side_game_dev":{"standard":{"easy":["SERVERGAME-001"],"medium":["SERVERGAME-002"],"Advanced":["SERVERGAME-003"]}}}},"design":{"text":"Design","question":"Which design discipline are you interested in?","options":["ux_design","design_system"],"isEndpoint":true,"questionSetId":{"ux_design":{"standard":{"easy":["UX-001"],"medium":["UX-002"],"Advanced":["UX-003"]}},"design_system":{"standard":{"easy":["DESIGNSYS-001"],"medium":["DESIGNSYS-002"],"Advanced":["DESIGNSYS-003"]}}}},"blockchain":{"text":"Blockchain","question":"Are you interested in blockchain development?","options":["blockchain_dev"],"isEndpoint":true,"questionSetId":{"blockchain_dev":{"standard":{"easy":["BLOCKCHAIN-001"],"medium":["BLOCKCHAIN-002"],"Advanced":["BLOCKCHAIN-003"]}}}},"cyber_security":{"text":"Cyber Security","question":"Are you interested in cybersecurity?","options":["cybersecurity_specialist"],"isEndpoint":true,"questionSetId":{"cybersecurity_specialist":{"standard":{"easy":["CYBERSEC-001"],"medium":["CYBERSEC-002"],"Advanced":["CYBERSEC-003"]}}}}},"options":{"frontend_beginner":{"text":"Frontend Beginner"},"backend_beginner":{"text":"Backend Beginner"},"devops_beginner":{"text":"DevOps Beginner"},"frontend":{"text":"Frontend"},"backend":{"text":"Backend"},"full_stack":{"text":"Full Stack"},"api_design":{"text":"API Design"},"qa":{"text":"QA"},"graphql":{"text":"GraphQL"},"git_github":{"text":"Git and GitHub"},"react":{"text":"React"},"vue":{"text":"Vue"},"angular":{"text":"Angular"},"spring_boot":{"text":"Spring Boot"},"aspnet_core":{"text":"ASP.NET Core"},"javascript":{"text":"JavaScript"},"typescript":{"text":"TypeScript"},"nodejs":{"text":"Node.js"},"php":{"text":"PHP"},"cpp":{"text":"C++"},"go":{"text":"Go"},"rust":{"text":"Rust"},"python":{"text":"Python"},"java":{"text":"Java"},"sql":{"text":"SQL"},"devops_general":{"text":"DevOps"},"docker":{"text":"Docker"},"kubernetes":{"text":"Kubernetes"},"aws":{"text":"AWS"},"cloudflare":{"text":"Cloudflare"},"linux":{"text":"Linux"},"terraform":{"text":"Terraform"},"android":{"text":"Android"},"ios":{"text":"iOS"},"react_native":{"text":"React Native"},"flutter":{"text":"Flutter"},"postgresql":{"text":"PostgreSQL"},"mongodb":{"text":"MongoDB"},"redis":{"text":"Redis"},"cs_fundamentals":{"text":"Computer Science"},"data_structures":{"text":"Data Structures"},"system_design":{"text":"System Design"},"design_architecture":{"text":"Design and Architecture"},"software_architect":{"text":"Software Architect"},"code_review":{"text":"Code Review"},"technical_writer":{"text":"Technical Writer"},"devrel_engineer":{"text":"DevRel Engineer"},"ai_data_scientist":{"text":"AI and Data Scientist"},"ai_engineer":{"text":"AI Engineer"},"data_analyst":{"text":"Data Analyst"},"mlops":{"text":"MLOps"},"prompt_engineering":{"text":"Prompt Engineering"},"product_manager":{"text":"Product Manager"},"engineering_manager":{"text":"Engineering Manager"},"client_side_game_dev":{"text":"Client Side Game Dev."},"server_side_game_dev":{"text":"Server Side Game Dev."},"ux_design":{"text":"UX Design"},"design_system":{"text":"Design System"},"blockchain_dev":{"text":"Blockchain"},"cybersecurity_specialist":{"text":"Cyber Security"}},"metadata":{"version":"2.0","lastUpdated":"2025-03-04","defaultLanguage":"en"}}'),E=(0,n(93777).eI)("https://xwrjwvspbayowtwbrbcd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3cmp3dnNwYmF5b3d0d2JyYmNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEzNDQ4OTksImV4cCI6MjA1NjkyMDg5OX0.mrgp3CeKu8eeoC0tRN_y-XpFgklVltYBqQYjY4HSIhQ");console.log("\uD83D\uDD04 chatbotFlow.ts module loading");var C="chatbot-flows";function A(){var e=new URLSearchParams(window.location.search).get("company_id");return console.log('\uD83D\uDD0D Getting company_id from URL: "'.concat(e,'"')),e}var D={companies:{},default:"chatbot-flow.json"},I={};function T(){return(T=(0,r._)(function(){var e,t,n,a,s,r,o;return(0,d.Jh)(this,function(i){switch(i.label){case 0:if(e=localStorage.getItem("company-registry-data"))try{return console.log("Found cached company registry"),t=JSON.parse(e),console.log("⚡ Using cached company registry (skipping metadata check)"),D=t,[2,t]}catch(e){console.warn("Error parsing cached company registry:",e)}i.label=1;case 1:return i.trys.push([1,3,,4]),console.log("\uD83D\uDCE5 Fetching company registry from Supabase"),[4,E.from("companies").select("id, name, json_file, logo, updated_at").order("name")];case 2:if(a=(n=i.sent()).data,s=n.error,console.log("READ COMPANIES TABLE FROM SUPABASE"),s)throw Error("Error fetching company registry: ".concat(s.message));if(!a||0===a.length)throw Error("No companies found in registry");return r={companies:{},default:"chatbot-flow.json",lastUpdated:new Date().toISOString()},a.forEach(function(e){r.companies[e.id]={name:e.name,jsonFile:e.json_file,logo:e.logo}}),D=r,localStorage.setItem("company-registry-data",JSON.stringify(r)),console.log("\uD83D\uDCBE Stored company registry in localStorage"),[2,r];case 3:return console.error("Error loading company registry:",i.sent()),D=o={companies:{default:{name:"Default",jsonFile:"chatbot-flow.json",logo:"default-logo.svg"}},default:"chatbot-flow.json"},[2,o];case 4:return[2]}})})).apply(this,arguments)}function k(){return(k=(0,r._)(function(e){var t,n,a,s,r,o,i,c,l,u,m,f,x,p,h,g;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(!e)return console.log("Using default chatbot flow"),[2,S];if(console.log("Loading flow for company ID: ".concat(e)),!(D.companies&&e in D.companies))return[3,14];t=D.companies[e],console.log("Found company in registry: ".concat(e," (").concat(t.name,")")),d.label=1;case 1:if(d.trys.push([1,12,,13]),!(a=localStorage.getItem("".concat(e,"-flow-data"))))return[3,8];d.label=2;case 2:return d.trys.push([2,6,,7]),console.log("Found cached data for ".concat(e)),s=JSON.parse(a),console.log("⚡ Using cached flow for company: ".concat(e," (skipping metadata check)")),[2,s.data];case 3:if(null==(o=d.sent())?void 0:o.lastUpdated){if(i=new Date(o.lastUpdated).getTime(),console.log("Server data timestamp: ".concat(o.lastUpdated)),r>=i)return console.log("✅ Using cached flow for company: ".concat(e," (cache is current)")),[2,s.data];console.log("⚠️ Cache outdated for company: ".concat(e,", fetching updated data"))}return[3,5];case 4:console.log("Cached data has no timestamp, fetching fresh data"),d.label=5;case 5:return[3,7];case 6:return c=d.sent(),console.warn("Error parsing cached data for company ".concat(e,":"),c),[3,7];case 7:return[3,9];case 8:console.log("No cached data found for ".concat(e)),d.label=9;case 9:return console.log("\uD83D\uDCE5 Fetching full flow data for company: ".concat(e)),u=t.jsonFile,console.log("Fetching from storage bucket: ".concat(C,", file: ").concat(u)),[4,E.storage.from(C).download(u)];case 10:if(f=(m=d.sent()).data,x=m.error)throw Error("Failed to fetch flow data: ".concat(x.message));return[4,f.text()];case 11:p=d.sent();try{l=JSON.parse(p)}catch(e){throw h=e instanceof Error?e.message:"Unknown JSON parsing error",Error("Failed to parse JSON data: ".concat(h))}return I[e]=l,(null===(n=l.metadata)||void 0===n?void 0:n.lastUpdated)&&(localStorage.setItem("".concat(e,"-flow-data"),JSON.stringify({metadata:l.metadata,data:l})),console.log("\uD83D\uDCBE Stored flow data in localStorage for company: ".concat(e))),[2,l];case 12:return g=d.sent(),console.error("Error loading flow for company ".concat(e,":"),g),[3,13];case 13:return[3,15];case 14:console.warn('Company ID "'.concat(e,'" not found in registry')),d.label=15;case 15:return console.warn('Using default flow (company ID "'.concat(e,'" not found or load failed)')),[2,S]}})})).apply(this,arguments)}var R=S;function U(){return(U=(0,r._)(function(){var e;return(0,d.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,function(){return T.apply(this,arguments)}()];case 1:if(t.sent(),console.log("✅ Loaded company registry"),!(e=A()))return[3,3];return[4,function(e){return k.apply(this,arguments)}(e)];case 2:R=t.sent(),t.label=3;case 3:return window.dispatchEvent(new CustomEvent("company-flow-ready")),console.log("\uD83D\uDCE3 Dispatched company-flow-ready event"),[3,5];case 4:return console.error("Error initializing chatbot:",t.sent()),window.dispatchEvent(new CustomEvent("company-flow-error",{detail:{error:"Failed to initialize chatbot"}})),[3,5];case 5:return[2]}})})).apply(this,arguments)}console.log("⚡ Initial default flow loaded synchronously"),console.log("\uD83D\uDCE3 Setting up initialization for browser environment");var O=!1,P=!1,q=(a=(0,r._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:if(O||P)return console.log("\uD83D\uDD04 Flow initialization already in progress or completed"),[2];O=!0,e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,function(){return U.apply(this,arguments)}()];case 2:return e.sent(),P=!0,[3,5];case 3:return console.error("Error in initializeFlow:",e.sent()),[3,5];case 4:return O=!1,[7];case 5:return[2]}})}),function(){return a.apply(this,arguments)});function L(e){console.log('\uD83D\uDD0D Getting node with key: "'.concat(e,'" from flow')),console.log('\uD83D\uDD0D Current root question: "'.concat(R.nodes.root.question,'"'));var t=R.nodes[e];if(!t){console.warn('⚠️ Node with key "'.concat(e,'" not found in chatbot flow'));var n=R.options[e];return n?(console.log('✓ Found option with key "'.concat(e,'": ').concat(n.text)),{question:"You selected ".concat(n.text,". What complexity level do you prefer?"),options:["Easy","Medium","Advanced"],isEndpoint:!0,text:n.text}):(console.error('❌ Node or option with key "'.concat(e,'" not found in chatbot flow.')),{question:"I'm sorry, but I couldn't find the next question. Let's start over.",options:["root"]})}return console.log('✓ Found node with key "'.concat(e,'": ').concat(t.text||t.question)),(0,i._)((0,o._)({},t),{question:t.question||t.text||""})}function M(e){return"start_over"===e?"Start Over Again":e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")}"loading"===document.readyState?(console.log("\uD83D\uDD04 Document still loading, adding DOMContentLoaded listener"),document.addEventListener("DOMContentLoaded",function(){console.log("\uD83D\uDD04 DOMContentLoaded fired, initializing flow"),q()})):(console.log("\uD83D\uDD04 Document already loaded, initializing flow immediately"),q()),window.addEventListener("popstate",function(){console.log("\uD83D\uDD04 URL changed, re-initializing flow"),P=!1,q()});var F=n(37099),G=n(48614),Y=n(40521),z=n(66070),V=n(26815),Z=n(95186),B={Easy:15,Medium:30,Advanced:45},J=(s=(0,r._)(function(e){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return setTimeout(e,1e3)})];case 1:return e.sent(),[2,!0]}})}),function(e){return s.apply(this,arguments)});function H(e){var t=e.text,n=e.messageIndex,a=e.onComplete,s=(0,c._)((0,m.useState)(""),2),r=s[0],o=s[1],i=(0,c._)((0,m.useState)(!1),2),l=i[0],d=i[1],f=(0,m.useRef)(null);return(0,m.useEffect)(function(){return f.current&&clearTimeout(f.current),o(""),d(!1),f.current=setTimeout(function(){var e="",s=function(r){if(r>=t.length){d(!0),setTimeout(function(){a(n,t)},300);return}o(e+=t.charAt(r)),f.current=setTimeout(function(){return s(r+1)},20)};s(0)},50),function(){f.current&&clearTimeout(f.current)}},[t,n,a]),(0,u.jsxs)(u.Fragment,{children:[r,!l&&(0,u.jsx)("span",{className:"inline-block w-1.5 h-4 ml-0.5 align-[-0.1em] bg-current opacity-70 animate-pulse",children:"|"})]})}function W(e){var t,n,a,s,p=e.onSendMessage,h=e.onGenerateImage,g=(0,c._)((0,m.useState)([]),2),y=g[0],S=g[1],E=(0,c._)((0,m.useState)(L("root")),2),C=E[0],I=E[1],T=(0,c._)((0,m.useState)(!1),2),k=T[0],U=T[1],O=(0,c._)((0,m.useState)(15),2),P=O[0],q=O[1],W=(0,c._)((0,m.useState)(null),2),Q=(W[0],W[1]),K=(0,c._)((0,m.useState)(!1),2),$=K[0],ee=K[1],et=(0,c._)((0,m.useState)(null),2),en=et[0],ea=et[1],es=(0,m.useRef)(null),er=(0,c._)((0,m.useState)(!1),2),eo=er[0],ei=er[1],ec=(0,c._)((0,m.useState)(""),2),el=ec[0],ed=ec[1],eu=(0,c._)((0,m.useState)({}),2),em=eu[0],ef=eu[1],ex=(0,c._)((0,m.useState)(!1),2),ep=ex[0],eh=ex[1],eg=(0,c._)((0,m.useState)(null),2),ev=eg[0],ey=eg[1],eb=(0,c._)((0,m.useState)(!1),2),eN=eb[0],ej=eb[1],ew=(0,m.useCallback)(function(e,t){ef(function(n){return(0,i._)((0,o._)({},n),(0,f._)({},e,t))})},[]);(0,m.useEffect)(function(){var e=L("root");S([{role:"ai",content:e.question,options:(0,l._)(e.options||[])}]),console.log("Chat history reset with new flow data")},[R]),(0,m.useEffect)(function(){var e=C===L("root");S([{role:"ai",content:C.question,options:e?(0,l._)(C.options||[]):(0,l._)(C.options||[]).concat(["start_over"])}])},[C]);var e_=function(){var e;null===(e=es.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},eS=(0,m.useRef)(!0);console.log("\uD83D\uDCE2 Chat component is mounting"),(0,m.useEffect)(function(){var e=setTimeout(function(){!ep&&eS.current&&(console.log("⚠️ Failsafe: Setting flow ready after timeout"),eh(!0))},5e3);return function(){return clearTimeout(e)}},[ep]),(0,m.useEffect)(function(){console.log("\uD83C\uDFA7 Setting up event listeners for flow");var e=function(e){console.log("✅ Received company-flow-ready event"),eh(!0)},t=function(e){eS.current&&(console.log("❌ Received company-flow-error event:",e.detail.error),ey(e.detail.error),eh(!0))},n=A();return console.log('\uD83D\uDD0D Chat component checking company_id: "'.concat(n,'"')),window.addEventListener("company-flow-ready",e),window.addEventListener("company-flow-error",t),n&&!((null==D?void 0:D.companies)&&n in D.companies)?(console.log('❌ Invalid company ID in Chat component: "'.concat(n,'"')),ey('Invalid company ID: "'.concat(n,'"')),eh(!0)):n?(console.log('✓ Valid company ID found: "'.concat(n,'", waiting for flow ready event')),setTimeout(function(){if(!ep&&eS.current){var e,t;console.log("⏱️ Checking flow status after delay..."),R&&(null===(e=R.metadata)||void 0===e?void 0:e.company)===(null===(t=D.companies[n])||void 0===t?void 0:t.name)&&(console.log("✅ Company flow already loaded, setting ready state"),eh(!0))}},1e3)):(console.log("ℹ️ No company ID, proceeding with default flow"),R&&R.nodes&&R.nodes.root&&(console.log("✅ Default flow already initialized, setting ready"),eh(!0))),function(){console.log("\uD83E\uDDF9 Cleaning up event listeners"),eS.current=!1,window.removeEventListener("company-flow-ready",e),window.removeEventListener("company-flow-error",t)}},[]),(0,m.useEffect)(function(){e_()},[y,em]);var eE=(t=(0,r._)(function(e){var t,n,a;return(0,d.Jh)(this,function(s){return"start_over"===e?(I(L("root")),S([{role:"ai",content:L("root").question,options:(0,l._)(L("root").options||[])}]),Q(null),ef({}),setTimeout(function(){ew(0,L("root").question)},100)):(t={role:"user",content:M(e)},S(function(e){return(0,l._)(e).concat([t])}),U(!0),p(e),I(n=L(e)),a={role:"ai",content:n.question,options:(0,l._)(n.options||[]).concat(["start_over"])},S(function(e){return(0,l._)(e).concat([a])}),U(!1)),[2]})}),function(e){return t.apply(this,arguments)}),eC=function(e){if(!eN){if(P<B[e]){var t={role:"ai",type:"payment-options",content:"Insufficient minutes remaining. Please choose a payment option:",options:["use_prepaid_code"]};S(function(e){return(0,l._)(e).concat([t])}),ea(e);return}ea(e),ej(!0),ee(!0)}},eA=(n=(0,r._)(function(e){return(0,d.Jh)(this,function(t){return"use_prepaid_code"===e&&ei(!0),[2]})}),function(e){return n.apply(this,arguments)}),eD=(a=(0,r._)(function(e){var t,n,a,s,r,o,i,u,m;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(ee(!1),!e||!en)return ej(!1),[2];t=B[en],n={role:"user",content:en},S(function(e){return(0,l._)(e).concat([n])}),q(function(e){return e-t}),Q(en),U(!0),d.label=1;case 1:if(d.trys.push([1,4,,5]),!(a=function(e,t){var n;if(console.log("Getting question set ID for:",{nodeText:e.text,complexity:t,hasQuestionSetId:!!e.questionSetId}),!e||!t){console.log("No node or complexity provided");return}if((null===(n=e.question)||void 0===n?void 0:n.includes("You selected"))&&e.text){var a=Object.entries(R.nodes).find(function(t){var n,a=(0,c._)(t,2);return null===(n=(a[0],a[1]).options)||void 0===n?void 0:n.some(function(t){var n;return(null===(n=R.options[t])||void 0===n?void 0:n.text)===e.text})});if(a){var s=(0,c._)(a,2),r=s[0],o=s[1];console.log("Found parent node:",r,o);var i=null===(l=o.options)||void 0===l?void 0:l.find(function(t){var n;return(null===(n=R.options[t])||void 0===n?void 0:n.text)===e.text});if(i&&(null===(u=o.questionSetId)||void 0===u?void 0:null===(d=u[i])||void 0===d?void 0:d.standard)){var l,d,u,m,f=null===(m=o.questionSetId[i].standard[t.toLowerCase()])||void 0===m?void 0:m[0];return console.log("Found question set ID:",f),f}}}if(e.questionSetId&&e.text){var x=Object.keys(e.questionSetId)[0];if(x){var p,h=null===(p=e.questionSetId[x].standard[t.toLowerCase()])||void 0===p?void 0:p[0];return console.log("Found direct question set ID:",h),h}}console.log("No question set ID found")}(C,en)))throw Error("No valid question set found for the selected complexity");for(s=C.text||"",r=C.parent;r;)(o=L(r)).text&&(s="".concat(o.text," > ").concat(s)),r=o.parent;return i="".concat(s," - ").concat(en),[4,new Promise(function(e){return setTimeout(e,4e4)})];case 2:return d.sent(),[4,h(i,a,en,s)];case 3:return d.sent(),U(!1),ej(!1),u={role:"ai",type:"image-generation",content:"Your AI interview for ".concat(s," with ").concat(en,' complexity has been generated successfully! You can find "New" in Assessment Vault.'),options:["start_over"],questionSetId:a,complexity:en,category:s},S(function(e){return(0,l._)(e).concat([u])}),[3,5];case 4:return console.error("Error in handleComplexitySelection:",d.sent()),U(!1),m={role:"ai",content:"I'm sorry, there was an error generating AI Interview. Please try again.",options:["start_over"]},S(function(e){return(0,l._)(e).concat([m])}),ej(!1),[3,5];case 5:return[2]}})}),function(e){return a.apply(this,arguments)}),eI=(s=(0,r._)(function(){var e,t,n;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,J(el)];case 1:return a.sent()?(ei(!1),ed(""),q(e=P+30),en&&(e>=B[en]?(ea(en),ee(!0)):(t={role:"ai",type:"payment-options",content:"Insufficient minutes remaining. Please choose a payment option:",options:["use_prepaid_code"]},S(function(e){return(0,l._)(e).concat([t])})))):(n={role:"ai",content:"Invalid prepaid code. Please try again.",options:["use_prepaid_code"]},S(function(e){return(0,l._)(e).concat([n])})),[3,3];case 2:return console.error("Error validating prepaid code:",a.sent()),[3,3];case 3:return[2]}})}),function(){return s.apply(this,arguments)}),eT=function(e){return e.map(function(e,t){return(0,u.jsx)(x.z,{variant:"use_prepaid_code"===e?"default":"secondary",size:"sm",disabled:eN&&("Easy"===e||"Medium"===e||"Advanced"===e||"start_over"===e),className:"w-full text-left justify-start text-xs \n    ".concat(eN&&("Easy"===e||"Medium"===e||"Advanced"===e||"start_over"===e)?"opacity-50 cursor-not-allowed":"hover:scale-102 transition-transform"," ").concat("use_prepaid_code"===e?"bg-primary hover:bg-primary/90 text-primary-foreground":"Easy"===e||"Medium"===e||"Advanced"===e?"bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-800":"start_over"===e?"bg-gray-100 hover:bg-gray-200 text-gray-800":"bg-white hover:bg-gray-50 border border-gray-200 shadow-sm"),onClick:function(){eN&&("Easy"===e||"Medium"===e||"Advanced"===e||"start_over"===e)||("use_prepaid_code"===e?eA(e):"Easy"===e||"Medium"===e||"Advanced"===e?eC(e):eE(e))},children:"use_prepaid_code"===e?(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("span",{className:"mr-2 text-xs",children:"\uD83D\uDCB3"}),(0,u.jsx)("span",{children:"Use Prepaid Code"})]}):"start_over"===e?(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("span",{className:"mr-2 text-xs",children:"\uD83D\uDD04"}),(0,u.jsx)("span",{children:M(e)})]}):"Easy"===e||"Medium"===e||"Advanced"===e?(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("span",{className:"mr-2 text-xs",children:"Easy"===e?"⭐":"Medium"===e?"⭐⭐":"⭐⭐⭐"}),(0,u.jsx)("span",{children:e}),(0,u.jsxs)("span",{className:"ml-2 text-xs font-normal text-gray-500",children:["(",B[e]," min)"]})]}):(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("span",{className:"mr-2 text-xs",children:"→"}),(0,u.jsx)("span",{children:M(e)})]})},t)})};return(0,u.jsx)("div",{className:"flex flex-col h-full bg-background",children:ep?ev?(0,u.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,u.jsxs)("div",{className:"text-center p-6 max-w-md",children:[(0,u.jsx)("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),(0,u.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Error Loading Chat"}),(0,u.jsx)("p",{className:"text-gray-600 mb-4",children:ev}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Please check the company ID in your URL or contact support for assistance."})]})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"py-3 px-4 border-b",children:(0,u.jsxs)(_.bZ,{className:"border-primary/20 bg-primary/5",children:[(0,u.jsx)(N.Z,{className:"h-4 w-4 text-primary"}),(0,u.jsxs)(_.Cd,{className:"text-sm font-medium",children:["Time Remaining: ","".concat(Math.floor(P/60),"h ").concat(P%60,"m")]})]})}),(0,u.jsxs)(v,{className:"flex-1 px-4 py-3",children:[(0,u.jsx)(G.M,{initial:!1,mode:"sync",children:y.map(function(e,t){return(0,u.jsx)(Y.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,height:0,marginBottom:0,overflow:"hidden"},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex ".concat("user"===e.role?"justify-end":"justify-start"," mb-5"),children:(0,u.jsxs)("div",{className:"flex items-start max-w-[80%] ".concat("user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,u.jsx)(b.qE,{className:"w-8 h-8 ".concat("user"===e.role?"ml-3":"mr-3"," flex-shrink-0"),children:(0,u.jsx)(b.Q5,{className:"user"===e.role?"bg-primary":"bg-muted",children:"ai"===e.role?(0,u.jsx)(j.Z,{className:"w-4 h-4 text-foreground/80"}):(0,u.jsx)(w.Z,{className:"w-4 h-4 text-primary-foreground"})})}),(0,u.jsxs)("div",{className:"p-3 rounded-lg ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-muted text-foreground"),children:[(0,u.jsx)("p",{className:"text-sm",children:"ai"===e.role?(0,u.jsx)(H,{text:e.content,messageIndex:t,onComplete:ew}):e.content}),e.options&&(0,u.jsx)(u.Fragment,{children:"ai"===e.role?em[t]===e.content&&(0,u.jsx)(Y.E.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-3 space-y-2",children:eT(e.options)}):(0,u.jsx)("div",{className:"mt-3 space-y-2",children:eT(e.options)})})]})]})},t)})}),k&&(0,u.jsx)("div",{className:"flex justify-start mb-4",children:(0,u.jsxs)("div",{className:"flex items-start",children:[(0,u.jsx)(b.qE,{className:"w-8 h-8 mr-3 flex-shrink-0",children:(0,u.jsx)(b.Q5,{className:"bg-muted",children:(0,u.jsx)(j.Z,{className:"w-4 h-4 text-foreground/80"})})}),(0,u.jsx)(z.Zb,{className:"p-2 bg-muted border-none shadow-none",children:(0,u.jsx)(z.aY,{className:"p-2",children:(0,u.jsx)(X,{})})})]})}),(0,u.jsx)("div",{ref:es})]}),(0,u.jsx)(F.aR,{open:$,onOpenChange:ee,children:(0,u.jsxs)(F._T,{className:"sm:max-w-md",children:[(0,u.jsxs)(F.fY,{children:[(0,u.jsx)(F.f$,{children:"Confirm Interview Generation"}),(0,u.jsxs)(F.yT,{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/50",children:[(0,u.jsx)("p",{className:"font-medium mb-2 text-sm",children:"Selected Interview Details:"}),(0,u.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"text-muted-foreground",children:"Category:"})," ",C.text]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"text-muted-foreground",children:"Complexity:"})," ",en]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"text-muted-foreground",children:"Duration:"})," ",B[en]," minutes"]})]})]}),(0,u.jsxs)("div",{className:"flex gap-2 items-start p-3 bg-amber-50 rounded-md border border-amber-200",children:[(0,u.jsx)(N.Z,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,u.jsxs)("p",{className:"text-amber-800 text-sm",children:["This action will deduct ",B[en]," minutes from your remaining time and cannot be reversed."]})]})]})]}),(0,u.jsxs)(F.xo,{className:"mt-4",children:[(0,u.jsx)(F.le,{onClick:function(){return eD(!1)},children:"Cancel"}),(0,u.jsx)(F.OL,{onClick:function(){return eD(!0)},className:"bg-primary hover:bg-primary/90",children:"Generate Interview"})]})]})}),(0,u.jsx)(F.aR,{open:eo,onOpenChange:ei,children:(0,u.jsxs)(F._T,{className:"sm:max-w-md",children:[(0,u.jsxs)(F.fY,{children:[(0,u.jsx)(F.f$,{children:"Enter Prepaid Code"}),(0,u.jsx)(F.yT,{children:"Please enter your prepaid code to add more minutes."})]}),(0,u.jsx)("div",{className:"grid gap-4 py-4",children:(0,u.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,u.jsx)(V.Label,{htmlFor:"prepaid-code",className:"text-right text-sm",children:"Code"}),(0,u.jsx)(Z.I,{id:"prepaid-code",value:el,onChange:function(e){return ed(e.target.value)},className:"col-span-3",placeholder:"Enter your code"})]})}),(0,u.jsxs)(F.xo,{children:[(0,u.jsx)(F.le,{onClick:function(){return ei(!1)},children:"Cancel"}),(0,u.jsx)(F.OL,{onClick:eI,children:"Submit"})]})]})})]}):(0,u.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,u.jsx)("div",{className:"space-y-3",children:(0,u.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}}),(0,u.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"Loading interviews for you..."})]})})})})}function X(){var e=(0,c._)((0,m.useState)(0),2),t=e[0],n=e[1],a=(0,c._)((0,m.useState)([]),2),s=a[0],r=a[1],o=(0,c._)((0,m.useState)(Date.now()),1)[0],i=["AI is generating","Generating your questions","Generating your video infrastructure","Finalizing your interview"];return(0,m.useEffect)(function(){var e=setInterval(function(){var e=Math.min(Math.floor((Date.now()-o)/1e4),i.length-1);n(e);for(var t=[],a=0;a<e;a++)t.push(a);r(t)},100);return function(){clearInterval(e)}},[o,i.length]),(0,u.jsx)("div",{className:"space-y-3",children:i.map(function(e,n){return(0,u.jsxs)("div",{className:"flex items-center space-x-3 min-h-[1.75rem]",children:[(0,u.jsx)("div",{className:"w-6 flex justify-center",children:s.includes(n)?(0,u.jsx)("span",{className:"text-green-500 text-base animate-fade-in",children:"✓"}):t===n?(0,u.jsxs)("div",{className:"flex space-x-1",children:[(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}):(0,u.jsx)("span",{className:"w-4"})}),(0,u.jsx)("span",{className:"transition-colors duration-300 text-sm ".concat(s.includes(n)?"text-green-500 font-medium":t===n?"text-primary font-medium":"text-muted-foreground"),children:e})]},n)})})}var Q=n(27107),K=n(12339),$=n(86595),ee=n(74767),et=n(87117),en=n(76858),ea=n(32759),es=n(51817),er=n(32489),eo=n(76865),ei=n(70933),ec=n(92451),el=n(10407),ed=n(88178),eu=n(33276),em=n(35153),ef=n(24457),ex=n.n(ef),ep=n(57970),eh={WIDTH:1280,HEIGHT:720};function eg(e){var t,n,a,s,o,i,f,p=e.onClose,h=e.onComplete,g=e.questionSetId,v=e.category,y=e.complexity,b=(0,em.pm)().toast,j=(0,c._)((0,m.useState)(0),2),w=j[0],S=j[1],E=(0,c._)((0,m.useState)(!1),2),C=E[0],A=E[1],D=(0,c._)((0,m.useState)(!1),2),I=D[0],T=D[1],k=(0,c._)((0,m.useState)(0),2),R=k[0],U=k[1],O=(0,c._)((0,m.useState)([]),2),P=O[0],q=O[1],L=(0,c._)((0,m.useState)(""),2),M=L[0],z=L[1],V=(0,c._)((0,m.useState)(!0),2),Z=V[0],B=V[1],J=(0,c._)((0,m.useState)(null),2),H=J[0],W=J[1],X=(0,c._)((0,m.useState)(!1),2),Q=X[0],K=X[1],$=(0,c._)((0,m.useState)(0),2),ee=$[0],et=$[1],en=(0,c._)((0,m.useState)([]),2),ef=(en[0],en[1]),eg=(0,c._)((0,m.useState)(0),2),ev=eg[0],ey=eg[1],eb=(0,c._)((0,m.useState)(!1),2),eN=eb[0],ej=eb[1],ew=(0,c._)((0,m.useState)(!1),2),e_=ew[0],eS=ew[1],eE=(0,m.useRef)(null),eC=(0,m.useRef)(null),eA=(0,m.useRef)(null),eD=(0,m.useRef)([]),eI=(0,m.useRef)(null),eT=(0,m.useRef)(null),ek=(0,m.useRef)(null),eR=(t=(0,r._)(function(){var e;return(0,d.Jh)(this,function(t){switch(t.label){case 0:W(null),t.label=1;case 1:return t.trys.push([1,5,,6]),eI.current&&eI.current.getTracks().forEach(function(e){return e.stop()}),eC.current&&(eC.current.srcObject=null),[4,navigator.mediaDevices.getUserMedia({video:{width:{ideal:eh.WIDTH},height:{ideal:eh.HEIGHT}},audio:!0})];case 2:if(e=t.sent(),!eC.current)return[3,4];return eC.current.srcObject=e,eI.current=e,[4,new Promise(function(e){eC.current&&(eC.current.onloadedmetadata=function(){return e(!0)})})];case 3:t.sent(),T(!0),W(null),t.label=4;case 4:return[3,6];case 5:return console.error("Camera preview error:",t.sent()),W("Unable to access camera. Please check permissions."),T(!1),[3,6];case 6:return[2]}})}),function(){return t.apply(this,arguments)}),eU=function(){eI.current&&(eI.current.getTracks().forEach(function(e){return e.stop()}),eI.current=null),eC.current&&(eC.current.srcObject=null),T(!1)};(0,m.useEffect)(function(){return eR(),function(){eU()}},[]),(0,m.useEffect)(function(){var e;if(!g){W("No question set ID provided"),B(!1);return}(e=(0,r._)(function(){var e,t,n,a,s,r,o,i,c,l;return(0,d.Jh)(this,function(d){switch(d.label){case 0:d.trys.push([0,12,13,14]),B(!0),e=["data/mock-interviews/".concat(g,".json")],t=null,n=!0,a=!1,s=void 0,d.label=1;case 1:d.trys.push([1,8,9,10]),r=e[Symbol.iterator](),d.label=2;case 2:if(n=(o=r.next()).done)return[3,7];i=o.value,d.label=3;case 3:return d.trys.push([3,5,,6]),[4,fetch(i)];case 4:if((t=d.sent()).ok)return[3,7];return[3,6];case 5:return d.sent(),[3,6];case 6:return n=!0,[3,2];case 7:return[3,10];case 8:return c=d.sent(),a=!0,s=c,[3,10];case 9:try{n||null==r.return||r.return()}finally{if(a)throw s}return[7];case 10:if(!t||!t.ok)throw Error("Failed to fetch from any URL. Last status: ".concat(null==t?void 0:t.status));return[4,t.json()];case 11:return q((l=d.sent()).questions),z(l.title),U(l.time_limit),[3,14];case 12:return console.error("Error loading questions:",d.sent()),W("Failed to load interview questions"),[3,14];case 13:return B(!1),[7];case 14:return[2]}})}),function(){return e.apply(this,arguments)})()},[g]),(0,m.useEffect)(function(){var e;return C&&R>0&&!e_?e=setInterval(function(){U(function(e){return e-1})},1e3):0===R&&C&&eY(),function(){return clearInterval(e)}},[C,R,e_]);var eO=(n=(0,r._)(function(){var e,t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:if(!eE.current)return[2,null];n.label=1;case 1:if(n.trys.push([1,3,,4]),!((e=C?eE.current.querySelector(".question-content"):eE.current.querySelector(".content-section"))instanceof HTMLElement))return console.error("Content section not found"),[2,null];return[4,ex()(e,{backgroundColor:"white",scale:window.devicePixelRatio||1,width:Math.floor(.6*eh.WIDTH),height:eh.HEIGHT,useCORS:!0,logging:!0})];case 2:return t=n.sent(),[2,{timestamp:Date.now()-ev,imageData:t,questionIndex:w}];case 3:return console.error("Error taking snapshot:",n.sent()),[2,null];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),eP=(a=(0,r._)(function(){var e,t,n,a,s,r,o,i,c,l;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(!eE.current)return[2];d.label=1;case 1:return d.trys.push([1,4,,5]),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0,preferCurrentTab:!0,systemAudio:"include"})];case 2:return e=d.sent(),eT.current=e,[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 3:return t=d.sent(),n=new MediaStream,e.getVideoTracks().forEach(function(e){n.addTrack(e)}),s=(a=new AudioContext).createMediaStreamDestination(),e.getAudioTracks().length>0&&(r=a.createMediaStreamSource(e),(o=a.createGain()).gain.value=1,r.connect(o).connect(s)),i=a.createMediaStreamSource(t),(c=a.createGain()).gain.value=1,i.connect(c).connect(s),s.stream.getAudioTracks().forEach(function(e){n.addTrack(e)}),ek.current=n,l=new MediaRecorder(n,{mimeType:"video/webm;codecs=vp9,opus"}),eA.current=l,eD.current=[],l.ondataavailable=function(e){e.data.size>0&&eD.current.push(e.data)},l.start(1e3),ey(Date.now()),A(!0),e.getVideoTracks()[0].onended=function(){e_||eY()},[3,5];case 4:return console.error("Error starting screen recording:",d.sent()),b({title:"Recording Error",description:"Failed to start screen recording. Please try again.",variant:"destructive"}),[3,5];case 5:return[2]}})}),function(){return a.apply(this,arguments)}),eq=function(){eA.current&&"recording"===eA.current.state&&(eA.current.pause(),eS(!0))},eL=function(){eA.current&&"paused"===eA.current.state&&(eA.current.resume(),eS(!1))},eM=(s=(0,r._)(function(){var e;return(0,d.Jh)(this,function(t){switch(t.label){case 0:if(!C)return[3,2];return[4,eO()];case 1:(e=t.sent())&&ef(function(t){return(0,l._)(t).concat([e])}),t.label=2;case 2:return[2]}})}),function(){return s.apply(this,arguments)});(0,m.useEffect)(function(){C&&eM()},[w]);var eF=(o=(0,r._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:if(0===P.length)return W("No questions available"),[2];return[4,eP()];case 1:return e.sent(),[2]}})}),function(){return o.apply(this,arguments)}),eG=function(e){ej(!1),e?eY():eL()},eY=(i=(0,r._)(function(){var e,t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:if(!eA.current||!C)return[2];eA.current.stop(),A(!1),eS(!1),K(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,new Promise(function(e){return setTimeout(e,1500)})];case 2:return n.sent(),e=new Blob(eD.current,{type:"video/webm"}),t=URL.createObjectURL(e),eT.current&&(eT.current.getTracks().forEach(function(e){e.stop()}),eT.current=null),ek.current&&(ek.current.getTracks().forEach(function(e){e.stop()}),ek.current=null),eA.current.stream&&eA.current.stream.getTracks().forEach(function(e){e.stop()}),h(t),[3,5];case 3:return console.error("Error processing video:",n.sent()),b({title:"Processing Error",description:"Failed to process the recording. Please try again.",variant:"destructive"}),[3,5];case 4:return K(!1),et(0),[7];case 5:return[2]}})}),function(){return i.apply(this,arguments)});(0,m.useEffect)(function(){return function(){eT.current&&(eT.current.getTracks().forEach(function(e){e.stop()}),eT.current=null),ek.current&&(ek.current.getTracks().forEach(function(e){e.stop()}),ek.current=null)}},[]);var ez=function(e){return"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0"))};return Z?(0,u.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,u.jsxs)("div",{className:"bg-background p-6 rounded-lg shadow-md flex flex-col items-center",children:[(0,u.jsx)(es.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,u.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"Loading interview questions..."})]})}):Q?(0,u.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,u.jsxs)("div",{className:"bg-background p-6 rounded-lg shadow-md w-[400px]",children:[(0,u.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,u.jsx)("span",{className:"text-muted-foreground",children:"Processing recording"}),(0,u.jsxs)("span",{className:"font-medium",children:[Math.round(ee),"%"]})]}),(0,u.jsx)(ea.E,{value:ee,className:"h-2"})]}),(0,u.jsxs)("div",{className:"flex space-x-1",children:[(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}):(0,u.jsxs)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",children:[(0,u.jsxs)("div",{ref:eE,className:"bg-background rounded-lg shadow-md w-[90vw] h-[90vh] flex flex-col border border-border overflow-hidden",children:[(0,u.jsxs)("div",{className:"py-3 px-4 border-b flex justify-between items-center",children:[(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[v&&(0,u.jsxs)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 border border-blue-200",children:[function(e){switch(e){case"Easy":default:return"⭐";case"Medium":return"⭐⭐";case"Advanced":return"⭐⭐⭐"}}(y||"Easy")," ",y]}),v&&(0,u.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-gray-50 text-gray-700 border border-gray-200",children:v})]}),(0,u.jsx)("h1",{className:"text-lg font-semibold",children:M.split("\n")[0].replace(/^#\s+/,"")})]}),!C&&(0,u.jsx)(x.z,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8",onClick:p,children:(0,u.jsx)(er.Z,{className:"h-4 w-4"})})]}),C&&(0,u.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between ".concat(e_?"bg-amber-50 border-b border-amber-200":"bg-primary/5 border-b border-primary/20"),children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(N.Z,{className:"h-4 w-4 mr-2 ".concat(e_?"text-amber-600":"text-primary")}),(0,u.jsxs)("span",{className:"text-sm font-medium",children:["Time remaining: ",ez(R)]})]}),e_&&(0,u.jsx)("div",{className:"flex items-center",children:(0,u.jsxs)("span",{className:"text-xs font-medium text-amber-600 flex items-center",children:[(0,u.jsx)(eo.Z,{className:"h-3 w-3 mr-1"}),"Recording paused"]})})]}),(0,u.jsxs)("div",{className:"flex-grow grid grid-cols-5 gap-6 p-4 overflow-hidden",children:[(0,u.jsx)("div",{className:"content-section col-span-3 border rounded-lg overflow-hidden flex flex-col",children:C?(0,u.jsx)(G.M,{mode:"wait",children:(0,u.jsxs)(Y.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex-grow flex flex-col p-4",children:[(0,u.jsx)("div",{className:"flex items-center mb-2",children:(0,u.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Question ",w+1," of ",P.length]})}),(0,u.jsx)("div",{className:"question-content flex-grow overflow-y-auto mb-4",children:(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:'\n                            <style>\n                              .md-content h1 { font-size: 1.8em; font-weight: bold; margin-bottom: 0.5em; }\n                              .md-content h2 { font-size: 1.5em; font-weight: bold; margin-bottom: 0.5em; }\n                              .md-content pre { background-color: #f4f4f4; padding: 1rem; border-radius: 4px; }\n                              .md-content ul { list-style-type: disc; margin-left: 1.5em; }\n                              .md-content ol { list-style-type: decimal; margin-left: 1.5em; }\n                            </style>\n                            <div class="md-content">'.concat((0,ep.TU)((null===(f=P[w])||void 0===f?void 0:f.question)||""),"</div>\n                          ")},className:"question-content flex-grow overflow-y-auto mb-4"})}),(0,u.jsxs)("div",{className:"flex justify-between mt-auto pt-2 border-t",children:[(0,u.jsxs)(x.z,{onClick:function(){w>0&&S(function(e){return e-1})},disabled:0===w,variant:"ghost",size:"sm",className:"text-xs",children:[(0,u.jsx)(ec.Z,{className:"mr-1 h-4 w-4"})," Previous"]}),(0,u.jsxs)(x.z,{onClick:function(){w<P.length-1&&S(function(e){return e+1})},disabled:w===P.length-1,variant:"ghost",size:"sm",className:"text-xs",children:["Next ",(0,u.jsx)(el.Z,{className:"ml-1 h-4 w-4"})]})]})]},w)}):(0,u.jsx)("div",{className:"flex-grow flex flex-col p-4",children:(0,u.jsxs)("div",{className:"space-y-5",children:[(0,u.jsxs)("div",{className:"bg-primary/5 border border-primary/20 rounded-lg overflow-hidden",children:[(0,u.jsxs)("div",{className:"bg-primary/10 border-b border-primary/20 px-4 py-2 flex items-center",children:[(0,u.jsx)(ei.Z,{className:"h-5 w-5 text-primary mr-2"}),(0,u.jsx)("h3",{className:"text-base font-medium text-primary",children:"Interview Instructions"})]}),(0,u.jsx)("div",{className:"p-4",children:(0,u.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,u.jsxs)("li",{className:"flex items-start",children:[(0,u.jsx)("div",{className:"bg-primary/20 h-5 w-5 rounded-full flex items-center justify-center text-xs text-primary font-medium mr-2 mt-0.5 flex-shrink-0",children:"1"}),(0,u.jsx)("div",{children:"Take a moment to position yourself and check your camera view"})]}),(0,u.jsxs)("li",{className:"flex items-start",children:[(0,u.jsx)("div",{className:"bg-primary/20 h-5 w-5 rounded-full flex items-center justify-center text-xs text-primary font-medium mr-2 mt-0.5 flex-shrink-0",children:"2"}),(0,u.jsx)("div",{children:"Each response will be recorded for your review"})]}),(0,u.jsxs)("li",{className:"flex items-start",children:[(0,u.jsx)("div",{className:"bg-primary/20 h-5 w-5 rounded-full flex items-center justify-center text-xs text-primary font-medium mr-2 mt-0.5 flex-shrink-0",children:"3"}),(0,u.jsxs)("div",{children:["You'll have ",Math.floor(R/60)," minutes to complete all questions"]})]}),(0,u.jsxs)("li",{className:"flex items-start",children:[(0,u.jsx)("div",{className:"bg-primary/20 h-5 w-5 rounded-full flex items-center justify-center text-xs text-primary font-medium mr-2 mt-0.5 flex-shrink-0",children:"4"}),(0,u.jsx)("div",{children:"Ensure you speak clearly and maintain good posture"})]})]})})]}),(0,u.jsxs)("div",{className:"rounded-lg border border-amber-200 overflow-hidden",children:[(0,u.jsxs)("div",{className:"bg-amber-50 px-4 py-2 border-b border-amber-200 flex items-center",children:[(0,u.jsx)(N.Z,{className:"h-5 w-5 text-amber-600 mr-2"}),(0,u.jsx)("h3",{className:"text-base font-medium text-amber-800",children:"Before you begin"})]}),(0,u.jsx)("div",{className:"bg-amber-50/50 p-4",children:(0,u.jsxs)("div",{className:"space-y-2.5",children:[(0,u.jsxs)("label",{className:"flex items-center text-sm text-amber-900",children:[(0,u.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-amber-300 text-amber-600 mr-2"}),(0,u.jsx)("span",{children:"Ensure you're in a quiet environment"})]}),(0,u.jsxs)("label",{className:"flex items-center text-sm text-amber-900",children:[(0,u.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-amber-300 text-amber-600 mr-2"}),(0,u.jsx)("span",{children:"Check your camera position and lighting"})]}),(0,u.jsxs)("label",{className:"flex items-center text-sm text-amber-900",children:[(0,u.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-amber-300 text-amber-600 mr-2"}),(0,u.jsx)("span",{children:"Test your microphone"})]}),(0,u.jsxs)("label",{className:"flex items-center text-sm text-amber-900",children:[(0,u.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-amber-300 text-amber-600 mr-2"}),(0,u.jsx)("span",{children:"Have water nearby if needed"})]})]})})]})]})})}),(0,u.jsxs)("div",{className:"col-span-2 flex flex-col space-y-4",children:[(0,u.jsxs)("div",{className:"flex-grow rounded-lg overflow-hidden relative border border-gray-200 bg-gray-50",children:[H&&(0,u.jsxs)(_.bZ,{variant:"destructive",className:"absolute top-4 left-4 right-4 z-10",children:[(0,u.jsx)(_.Cd,{children:"Camera Error"}),(0,u.jsx)(_.X,{children:H})]}),(0,u.jsx)("video",{ref:eC,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),!I&&(0,u.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-50",children:[(0,u.jsx)(ed.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,u.jsx)("p",{className:"text-sm text-gray-600",children:"Camera preview unavailable"})]}),I&&!C&&(0,u.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,u.jsx)("div",{className:"border border-dashed border-gray-300 rounded-lg w-2/3 h-2/3 flex items-center justify-center",children:(0,u.jsx)("p",{className:"text-xs text-gray-500",children:"Position yourself within the frame"})})}),e_&&(0,u.jsx)("div",{className:"absolute inset-0 bg-amber-900/20 flex flex-col items-center justify-center",children:(0,u.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 shadow-md max-w-xs text-center",children:[(0,u.jsx)(eo.Z,{className:"h-8 w-8 text-amber-600 mx-auto mb-2"}),(0,u.jsx)("p",{className:"text-sm font-medium text-amber-800",children:"Recording paused"}),(0,u.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"Please confirm or cancel to continue"})]})})]}),C?(0,u.jsxs)(x.z,{size:"sm",onClick:function(){if(R<=0){eY();return}eq(),ej(!0)},variant:"outline",className:"text-xs border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100",children:[(0,u.jsx)(ei.Z,{className:"mr-1.5 h-4 w-4"})," Complete Interview"]}):(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center text-sm",children:[(0,u.jsx)(N.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,u.jsxs)("span",{className:"text-muted-foreground",children:["Duration: ",ez(R)]})]}),(0,u.jsxs)(x.z,{size:"sm",onClick:eF,disabled:0===R||0===P.length||!I,variant:"default",className:"text-xs",children:[(0,u.jsx)(eu.Z,{className:"mr-1.5 h-4 w-4"})," Start Interview"]})]})]})]})]}),(0,u.jsx)(F.aR,{open:eN,onOpenChange:ej,children:(0,u.jsxs)(F._T,{className:"sm:max-w-md",children:[(0,u.jsxs)(F.fY,{children:[(0,u.jsxs)(F.f$,{className:"flex items-center",children:[(0,u.jsx)(eo.Z,{className:"h-5 w-5 text-amber-600 mr-2"}),(0,u.jsx)("span",{children:"Confirm Interview Completion"})]}),(0,u.jsxs)(F.yT,{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"border rounded-lg p-4 bg-amber-50/50 border-amber-200",children:[(0,u.jsx)("p",{className:"font-medium mb-2 text-sm text-amber-900",children:"Warning: You still have time remaining"}),(0,u.jsxs)("div",{className:"space-y-2 text-sm text-amber-800",children:[(0,u.jsxs)("p",{className:"flex items-center",children:[(0,u.jsx)(N.Z,{className:"h-4 w-4 mr-2 text-amber-600"}),(0,u.jsxs)("span",{children:["Time remaining: ",(0,u.jsx)("span",{className:"font-medium",children:ez(R)})]})]}),(0,u.jsx)("p",{children:"Completing now will end your interview early and the remaining time will be lost."})]})]}),(0,u.jsx)("div",{className:"flex items-start p-3 bg-gray-50 rounded-md border border-gray-200",children:(0,u.jsx)("div",{className:"text-gray-800 text-sm",children:"Are you sure you want to complete your interview now?"})})]})]}),(0,u.jsxs)(F.xo,{className:"mt-4",children:[(0,u.jsx)(F.le,{onClick:function(){return eG(!1)},className:"text-xs",children:"Continue Recording"}),(0,u.jsx)(F.OL,{onClick:function(){return eG(!0)},className:"bg-blue-600 hover:bg-blue-700 text-xs",children:"Complete & Save"})]})]})})]})}var ev=n(18229),ey=n(41671),eb=n(96362),eN=n(33245),ej=n(78867),ew=n(79235),e_=n(26110);function eS(e){var t,n,a=e.onClose,s=e.videoUrl,o=e.category,i=void 0===o?"":o,l=e.complexity,f=void 0===l?"Easy":l,p=e.onUploadSuccess,h=(0,em.pm)().toast,g=(0,c._)((0,m.useState)(s),2),v=g[0],y=g[1],b=(0,c._)((0,m.useState)(null),2),N=b[0],j=b[1],w=(0,c._)((0,m.useState)(null),2),S=w[0],E=w[1],C=(0,c._)((0,m.useState)(0),2),A=C[0],D=C[1],I=(0,c._)((0,m.useState)(!1),2),T=I[0],k=I[1],R=(0,c._)((0,m.useState)(!1),2),U=R[0],O=R[1],P=(0,c._)((0,m.useState)(!1),2),q=P[0],L=P[1],M=(0,c._)((0,m.useState)(!1),2),F=(M[0],M[1]),G=(0,c._)((0,m.useState)(!0),2),z=G[0],V=G[1],Z=(0,c._)((0,m.useState)(0),2),B=Z[0],J=Z[1],H=(0,c._)((0,m.useState)(null),2),W=H[0],X=H[1];(0,m.useEffect)(function(){if(console.log("Initial URL processing:",s),null==s?void 0:s.includes("|")){var e=(0,c._)(s.split("|"),2),t=e[0],n=e[1];if(n&&n.includes("youtu")){y(s);var a=n.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^?&/]+)/),r=a?a[1]:null;r&&E(r)}else y(t)}else y(s)},[s]),(0,m.useEffect)(function(){console.log("1. ViewModal - Current state:",{videoUrl:v,initialVideoUrl:s,parsedUrl:{blobUrl:(null==v?void 0:v.includes("|"))?v.split("|")[0]:v,youtubeUrl:(null==v?void 0:v.includes("|"))?v.split("|")[1]:null},videoId:S,isYouTubeVideo:(null==v?void 0:v.includes("youtu"))||(null==v?void 0:v.includes("|")),urlContainsYouTube:null==v?void 0:v.includes("youtu"),hasVideoId:!!S})},[v,s,S]),(0,m.useEffect)(function(){if((null==v?void 0:v.includes("youtu.be/"))||(null==v?void 0:v.includes("youtube.com/"))){var e=v.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^?&/]+)/),t=e?e[1]:null;t&&(E(t),fetch("https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=".concat(t,"&format=json")).then(function(e){V(e.ok)}).catch(function(){V(!1)}))}},[v]);var Q=function(){L(!0),J(1),k(!0)},K=(0,ev.Nq)({onSuccess:(t=(0,r._)(function(e){return(0,d.Jh)(this,function(t){return console.log("Login Success:",e),j(e.access_token),J(3),h({title:"Step 1 Complete",description:"Successfully logged in, now uploading video...",duration:3e3}),setTimeout(function(){e.access_token&&$(e.access_token)},1e3),[2]})}),function(e){return t.apply(this,arguments)}),onError:function(e){console.error("Login Failed:",e),X("Google login failed. Please try again."),L(!1),J(0),h({title:"Login Failed",description:"Could not login to Google",variant:"destructive",duration:5e3})},flow:"implicit",prompt:"consent",scope:"https://www.googleapis.com/auth/youtube.upload https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.force-ssl"}),$=(n=(0,r._)(function(e){var t,n,a,s,r,o,c,l,u,m,x,g,b,j,w,_,S;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(!(t=e||N))return X("Authentication error. Please try again."),L(!1),J(0),[2];d.label=1;case 1:return d.trys.push([1,8,9,10]),F(!0),J(3),D(10),n=setInterval(function(){D(function(e){return e>=90?(clearInterval(n),e):e+Math.floor(10*Math.random())})},1e3),[4,fetch(v.includes("|")?v.split("|")[0]:v)];case 2:return[4,d.sent().blob()];case 3:return a=new File([d.sent()],"interview.webm",{type:"video/webm"}),s={snippet:{title:"Mock Interview - ".concat(i," (").concat(f,")"),description:"Interview Category: ".concat(i,"\nComplexity: ").concat(f,"\nRecorded on: ").concat(new Date().toLocaleDateString()),tags:["mock interview",i,f],categoryId:"22"},status:{privacyStatus:"unlisted"}},o="\r\n--"+(r="foo_bar_baz")+"\r\n",c="\r\n--"+r+"--",l=new Blob([o+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(s)+o+"Content-Type: video/webm\r\nContent-Transfer-Encoding: binary\r\n\r\n"],{type:"text/plain"}),u=new Blob([a],{type:"video/webm"}),m=new Blob([c],{type:"text/plain"}),x=new Blob([l,u,m],{type:"multipart/mixed; boundary=".concat(r)}),[4,fetch("https://www.googleapis.com/upload/youtube/v3/videos?part=snippet,status&uploadType=multipart",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/mixed; boundary=".concat(r),"X-Upload-Content-Length":x.size.toString()},body:x})];case 4:if(g=d.sent(),clearInterval(n),D(100),g.ok)return[3,6];return[4,g.text()];case 5:if(b=d.sent(),console.error("Upload response:",g.status,b),b.includes("youtubeSignupRequired")||b.includes("channelNotFound")||b.toLowerCase().includes("channel")||401===g.status)return X("You need to create a YouTube channel before uploading"),h({title:"YouTube Channel Required",description:"You need to create a YouTube channel first before uploading videos.",variant:"destructive",duration:1e4}),J(0),L(!1),[2];throw Error("Upload failed: ".concat(g.status," ").concat(b));case 6:return[4,g.json()];case 7:if((j=d.sent()).id)E(j.id),console.log("2. ViewModal - Upload success:",{originalVideoUrl:v,newYoutubeUrl:w="https://youtu.be/".concat(j.id),youtubeId:j.id}),y("".concat(v,"|").concat(w)),p&&(console.log("3. ViewModal - Calling onUploadSuccess with:",{localUrl:v,youtubeUrl:w,youtubeId:j.id}),p(v,w,j.id)),O(!0),h({title:"Upload Successful",description:"Your video has been uploaded to YouTube",duration:5e3});else throw Error((null===(_=j.error)||void 0===_?void 0:_.message)||"Upload failed");return[3,10];case 8:return console.error("Upload error:",S=d.sent()),X("".concat((null==S?void 0:S.message)||"Could not upload to YouTube")),h({title:"Upload Failed",description:"".concat((null==S?void 0:S.message)||"Could not upload to YouTube"),variant:"destructive",duration:5e3}),[3,10];case 9:return L(!1),J(0),D(0),F(!1),[7];case 10:return[2]}})}),function(e){return n.apply(this,arguments)});(0,m.useEffect)(function(){S&&U&&setTimeout(function(){(0,ew.Z)({particleCount:100,spread:70,origin:{y:.6}})},300)},[S,U]);var et=function(){return 0===B?0:1===B?33:2===B?66:66+A/100*34},es={blobUrl:(null==v?void 0:v.includes("|"))?v.split("|")[0]:v,youtubeUrl:(null==v?void 0:v.includes("|"))?v.split("|")[1]:null},ei=(null==v?void 0:v.includes("youtu"))||null!=es.youtubeUrl||!!S;return(0,m.useEffect)(function(){console.log("11. ViewModal - Rendering section:",{parsedUrl:es,videoId:S,isYouTubeVideo:ei,isProcessing:q,hasError:!!W})},[es,S,ei,q,W]),(0,u.jsxs)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",children:[(0,u.jsxs)("div",{className:"bg-background rounded-lg shadow-md w-[90vw] h-[90vh] flex flex-col border border-border overflow-hidden",children:[(0,u.jsx)("div",{className:"py-3 px-4 border-b flex justify-between items-center",children:(0,u.jsx)(x.z,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8",onClick:a,disabled:q,children:(0,u.jsx)(er.Z,{className:"h-4 w-4"})})}),q&&(0,u.jsx)("div",{className:"px-4 py-2 bg-primary/5 border-b border-primary/20",children:(0,u.jsxs)("div",{className:"space-y-1",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[1===B&&(0,u.jsx)("span",{className:"text-primary font-medium",children:"Step 1: Instructions"}),2===B&&(0,u.jsx)("span",{className:"text-primary font-medium",children:"Step 2: Google Authentication"}),3===B&&(0,u.jsx)("span",{className:"text-primary font-medium",children:"Step 3: Uploading to YouTube"})]}),(0,u.jsxs)("span",{className:"text-muted-foreground",children:[Math.round(et()),"%"]})]}),(0,u.jsx)(ea.E,{value:et(),className:"h-1.5"})]})}),(0,u.jsx)("div",{className:"flex-grow grid grid-cols-1 gap-6 p-4 overflow-hidden",children:(0,u.jsx)("div",{className:"border rounded-lg overflow-hidden flex flex-col",children:(0,u.jsxs)("div",{className:"flex-grow relative",children:[function(){if(!z&&(null==v?void 0:v.includes("youtu")))return(0,u.jsxs)("div",{className:"bg-gray-100 w-full h-full flex flex-col items-center justify-center p-8 text-center",children:[(0,u.jsx)(eo.Z,{className:"h-12 w-12 text-amber-500 mb-4"}),(0,u.jsx)("h3",{className:"text-lg font-medium mb-2",children:"YouTube Video Unavailable"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"This video is no longer available on YouTube. It may have been deleted or made private."})]});if(!es.youtubeUrl)return(0,u.jsx)("video",{src:es.blobUrl,controls:!0,className:"w-full h-full"});if(es.youtubeUrl){var e,t=null===(e=es.youtubeUrl.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^?&/]+)/))||void 0===e?void 0:e[1];if(t)return(0,u.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(t),className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}return(0,u.jsx)("video",{src:es.blobUrl,controls:!0,className:"w-full h-full"})}(),q&&2===B&&(0,u.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40",children:(0,u.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg text-center space-y-3 max-w-sm",children:[(0,u.jsx)("div",{className:"flex justify-center",children:(0,u.jsxs)("div",{className:"flex space-x-1",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,u.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,u.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}),(0,u.jsx)("p",{className:"text-sm font-medium",children:"Waiting for Google Authentication"}),(0,u.jsx)("p",{className:"text-xs text-gray-500",children:"Please complete the Google sign-in process"}),(0,u.jsx)(x.z,{variant:"outline",size:"sm",className:"mt-2 text-xs",onClick:function(){L(!1),J(0),X("Authentication canceled. Please try again with a different account.")},children:"Cancel Authentication"})]})})]})})}),(0,u.jsx)("div",{className:"px-4 pb-4 pt-1 border-t",children:(0,u.jsx)("div",{className:"flex items-center gap-4",children:es.youtubeUrl?(0,u.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,u.jsxs)(_.bZ,{className:"flex-1 bg-green-50 border-green-200 text-green-800",children:[(0,u.jsx)(ey.Z,{className:"h-4 w-4 text-green-600"}),(0,u.jsx)(_.Cd,{className:"text-sm font-medium text-green-800",children:"Video available on YouTube"}),(0,u.jsx)(_.X,{className:"text-xs mt-1 text-green-700",children:"Your recording is published as an unlisted video"})]}),(0,u.jsxs)(x.z,{onClick:function(){return window.open(es.youtubeUrl||"","_blank")},size:"sm",className:"text-xs",children:[(0,u.jsx)(ee.Z,{className:"mr-1.5 h-4 w-4"}),"Open on YouTube"]})]}):W?(0,u.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,u.jsxs)(_.bZ,{className:"flex-1 bg-red-50 border-red-200 text-red-800",children:[(0,u.jsx)(eo.Z,{className:"h-4 w-4 text-red-600"}),(0,u.jsx)(_.Cd,{className:"text-sm font-medium text-red-800",children:"Error"}),(0,u.jsxs)(_.X,{className:"text-xs mt-1 text-red-700",children:[W,(null==W?void 0:W.includes("YouTube channel"))&&(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsxs)("a",{href:"https://www.youtube.com/create_channel",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:underline font-medium",children:[(0,u.jsx)(eb.Z,{className:"h-3 w-3 mr-1"}),"Click here to create a YouTube channel"]}),(0,u.jsx)("p",{className:"mt-1 text-xs text-red-600",children:"After creating your channel, return here and try again"})]})]})]}),(0,u.jsxs)(x.z,{onClick:function(){X(null),Q()},disabled:q,variant:"default",size:"sm",className:"text-xs",children:[(0,u.jsx)(en.Z,{className:"mr-1.5 h-4 w-4"}),"Try Again"]})]}):q?(0,u.jsx)("div",{className:"flex-1",children:(0,u.jsxs)(_.bZ,{className:"bg-primary/5 border-primary/20",children:[(0,u.jsx)(eN.Z,{className:"h-4 w-4 text-primary"}),(0,u.jsx)(_.Cd,{className:"text-sm font-medium",children:"Processing your recording"}),(0,u.jsx)(_.X,{className:"text-xs mt-1",children:"Please complete all steps to save your recording"})]})}):(0,u.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,u.jsxs)(_.bZ,{className:"flex-1 bg-primary/5 border-primary/20",children:[(0,u.jsx)(eN.Z,{className:"h-4 w-4 text-primary"}),(0,u.jsx)(_.Cd,{className:"text-sm font-medium",children:"Save your recording"}),(0,u.jsx)(_.X,{className:"text-xs mt-1",children:"Save your recording to YouTube as an unlisted video"})]}),(0,u.jsxs)(x.z,{onClick:Q,disabled:q,variant:"default",size:"sm",className:"text-xs",children:[(0,u.jsx)(ee.Z,{className:"mr-1.5 h-4 w-4"}),"Save to YouTube"]})]})})})]}),(0,u.jsx)(e_.Vq,{open:T,onOpenChange:function(e){!e&&q&&(L(!1),J(0)),k(e)},children:(0,u.jsxs)(e_.cZ,{className:"sm:max-w-md",children:[(0,u.jsxs)(e_.fK,{children:[(0,u.jsx)(e_.$N,{children:"YouTube Upload Instructions"}),(0,u.jsx)(e_.Be,{children:"Please follow these steps to successfully upload your video:"})]}),(0,u.jsxs)("div",{className:"space-y-4 py-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("h3",{className:"font-medium",children:"Before you begin:"}),(0,u.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[(0,u.jsx)("li",{children:"You must have a YouTube channel associated with your Google account"}),(0,u.jsx)("li",{children:"If you don't have a YouTube channel yet, you'll need to create one first"})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("h3",{className:"font-medium",children:"Step 1: Login Process (TWO SCREENS)"}),(0,u.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[(0,u.jsx)("li",{children:"After clicking \"I Understand\", you'll see Google's login screens"}),(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"First screen"}),": Choose your Google account"]}),(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"Second screen"}),": You'll see two options - your email account and YouTube account"]}),(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{className:"text-red-500",children:"IMPORTANT: You MUST select the YouTube option"}),", not your email"]}),(0,u.jsx)("li",{children:"Selecting your email account instead of YouTube will cause an authorization error"})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("h3",{className:"font-medium",children:"Step 2: Creating a YouTube Channel (if needed)"}),(0,u.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[(0,u.jsx)("li",{children:"If you don't see a YouTube option on the second screen, you need to create a channel first"}),(0,u.jsx)("li",{children:(0,u.jsxs)("a",{href:"https://www.youtube.com/create_channel",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline flex items-center",children:["Click here to create a YouTube channel",(0,u.jsx)(eb.Z,{className:"h-3 w-3 ml-1"})]})}),(0,u.jsx)("li",{children:"Sign in with your Google account"}),(0,u.jsx)("li",{children:"Follow the prompts to complete channel creation"}),(0,u.jsx)("li",{children:"Return to this page and try again - you should now see two options on the second screen"})]})]})]}),(0,u.jsx)(e_.cN,{children:(0,u.jsx)(x.z,{onClick:function(){k(!1),J(2),K()},children:"I Understand"})})]})}),(0,u.jsx)(e_.Vq,{open:U,onOpenChange:O,children:(0,u.jsxs)(e_.cZ,{className:"sm:max-w-md",children:[(0,u.jsx)(e_.fK,{children:(0,u.jsx)(e_.$N,{className:"text-center",children:(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,u.jsx)(ey.Z,{className:"h-5 w-5 text-green-600"}),(0,u.jsx)("span",{className:"text-xl",children:"Upload Successful!"})]})})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-6 py-6",children:[(0,u.jsxs)("div",{className:"text-center space-y-2",children:[(0,u.jsx)("p",{className:"text-lg",children:"Your video has been uploaded to YouTube"}),(0,u.jsx)("p",{className:"text-sm text-muted-foreground",children:"It's available as an unlisted video on your channel"})]}),(0,u.jsxs)("div",{className:"w-full p-4 bg-muted rounded-md",children:[(0,u.jsx)("p",{className:"font-medium mb-2",children:"Video Link:"}),(0,u.jsxs)("a",{href:es.youtubeUrl||"https://youtu.be/".concat(S||""),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 hover:underline flex items-center justify-center gap-2 p-3 bg-card rounded border border-border transition-colors",children:[(0,u.jsx)(ee.Z,{className:"h-5 w-5"}),es.youtubeUrl||"https://youtu.be/".concat(S||"")]})]}),(0,u.jsxs)("div",{className:"flex gap-4",children:[(0,u.jsxs)(x.z,{onClick:function(){navigator.clipboard.writeText(es.youtubeUrl||"https://youtu.be/".concat(S||"")),h({title:"Link copied",description:"YouTube URL copied to clipboard",duration:3e3})},variant:"outline",size:"sm",className:"text-xs",children:[(0,u.jsx)(ej.Z,{className:"mr-1.5 h-4 w-4"}),"Copy Link"]}),(0,u.jsxs)(x.z,{onClick:function(){return window.open(es.youtubeUrl||"https://youtu.be/".concat(S||""),"_blank")},size:"sm",className:"text-xs",children:[(0,u.jsx)(ee.Z,{className:"mr-1.5 h-4 w-4"}),"Open Video"]})]})]})]})})]})}function eE(e){var t=e.images,n=e.filter,a=(e.onFilterChange,e.onToggleFavorite),s=e.onCompleteInterview,r=e.onUpdateImage,d=(0,c._)((0,m.useState)("new"),2),f=d[0],p=d[1],h=(0,c._)((0,m.useState)(null),2),g=h[0],y=h[1],b=(0,c._)((0,m.useState)(!1),2),j=b[0],w=b[1],S=(0,c._)((0,m.useState)(!1),2),E=S[0],C=S[1],A=(0,c._)((0,m.useState)(t),2),D=A[0],I=A[1];(0,m.useEffect)(function(){I(t)},[t]);var T=(0,l._)(D).sort(function(e,t){return"completed"===f&&e.completedAt&&t.completedAt?t.completedAt.getTime()-e.completedAt.getTime():t.createdAt.getTime()-e.createdAt.getTime()}),k=T.filter(function(e){return!e.isCompleted}),R=T.filter(function(e){return e.isCompleted}),U=T.filter(function(e){return e.isFavorite&&e.isCompleted}),O="all"===n?"new"===f?k:"completed"===f?R:U:("new"===f?k:"completed"===f?R:U).filter(function(e){return e.url.includes(n)}),P=function(e){if(!e)return!1;if(e.includes("|")){var t=e.split("|");return t.length>1&&t[1].includes("youtu")}return e.includes("youtu")},q=function(e){var t=O[e],n=D.findIndex(function(e){return e===t});t.isCompleted?(y(n),w(!0),C(!1)):t.questionSetId&&(y(n),C(!0),w(!1))},L=function(){y(null),w(!1),C(!1)},M=function(e){switch(e){case"Easy":default:return"⭐";case"Medium":return"⭐⭐";case"Advanced":return"⭐⭐⭐"}},F=function(e){return(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:e.map(function(e,t){var n=e.complexity||"Easy",s=P(e.videoUrl);return(0,u.jsx)(Y.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex flex-col",children:(0,u.jsxs)("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-white hover:shadow-md hover:border-primary/20 transition-all duration-200 cursor-pointer overflow-hidden",onClick:function(){return q(t)},children:[(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsxs)("span",{className:"text-xs font-medium text-gray-500 mb-1",children:[M(n)," ",n]}),(0,u.jsx)("h3",{className:"font-medium text-lg text-foreground line-clamp-2",children:e.category})]}),e.isCompleted&&(0,u.jsx)(x.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:function(t){t.stopPropagation(),a(D.findIndex(function(t){return t===e}))},children:(0,u.jsx)($.Z,{className:"h-4 w-4 ".concat(e.isFavorite?"fill-yellow-400 text-yellow-400":"text-gray-400")})})]}),(0,u.jsx)("div",{className:"mb-3",children:e.isCompleted?(0,u.jsx)("div",{className:"flex items-center font-medium text-xs",children:s?(0,u.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,u.jsx)(ee.Z,{className:"w-3.5 h-3.5 mr-1"}),(0,u.jsx)("span",{children:"Private Video"})]}):(0,u.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,u.jsx)(et.Z,{className:"w-3.5 h-3.5 mr-1"}),(0,u.jsx)("span",{children:"Completed"})]})}):(0,u.jsxs)("div",{className:"flex items-center text-primary font-medium text-xs",children:[(0,u.jsx)(en.Z,{className:"w-3.5 h-3.5 mr-1"}),(0,u.jsx)("span",{children:"Ready to start"})]})}),(0,u.jsxs)("div",{className:"space-y-1.5 text-xs text-muted-foreground",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(N.Z,{className:"w-3 h-3 mr-1.5"}),(0,u.jsxs)("span",{children:["Created: ",(0,Q.WU)(e.createdAt,"MMM d, yyyy")]})]}),e.completedAt&&(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(N.Z,{className:"w-3 h-3 mr-1.5"}),(0,u.jsxs)("span",{children:["Completed: ",(0,Q.WU)(e.completedAt,"MMM d, yyyy")]})]})]})]}),(0,u.jsx)("div",{className:"px-4 py-2 text-xs font-medium ".concat(e.isCompleted?s?"bg-red-50 text-red-700":"bg-green-50 text-green-700":"bg-blue-50 text-primary"),children:e.isCompleted?"View Recording":"Start Interview"})]})},t)})})};return(0,u.jsxs)("div",{className:"flex flex-col h-full bg-background",children:[(0,u.jsx)("div",{className:"py-3 px-4 border-b",children:(0,u.jsx)("h2",{className:"text-lg font-semibold",children:"Assessment Vault"})}),(0,u.jsxs)(K.mQ,{value:f,onValueChange:function(e){return p(e)},className:"flex-1 flex flex-col",children:[(0,u.jsxs)(K.dr,{className:"grid w-full grid-cols-3 px-4 py-2",children:[(0,u.jsx)(K.SP,{value:"new",children:"New"}),(0,u.jsx)(K.SP,{value:"completed",children:"Completed"}),(0,u.jsx)(K.SP,{value:"favorites",children:"Favorites"})]}),(0,u.jsxs)(v,{className:"flex-1",children:[(0,u.jsx)(K.nU,{value:"new",className:"m-0",children:k.length>0?F(O):(0,u.jsxs)(_.bZ,{className:"m-4 border-primary/20 bg-primary/5",children:[(0,u.jsx)(_.Cd,{children:"No pending interviews"}),(0,u.jsx)(_.X,{children:"Please use the AI INTERVIEW ASSISTANT to generate interviews."})]})}),(0,u.jsx)(K.nU,{value:"completed",className:"m-0",children:R.length>0?F(O):(0,u.jsxs)(_.bZ,{className:"m-4 border-primary/20 bg-primary/5",children:[(0,u.jsx)(_.Cd,{children:"No completed interviews"}),(0,u.jsx)(_.X,{children:"Complete a mock interview to see it here."})]})}),(0,u.jsx)(K.nU,{value:"favorites",className:"m-0",children:U.length>0?F(O):(0,u.jsxs)(_.bZ,{className:"m-4 border-primary/20 bg-primary/5",children:[(0,u.jsx)(_.Cd,{children:"No favorites yet"}),(0,u.jsx)(_.X,{children:"Star your favorite completed interviews to see them here."})]})})]})]}),E&&null!==g&&!j&&(0,u.jsx)(eg,{onClose:L,onComplete:function(e){null!==g&&(s(g,e),L())},questionSetId:D[g].questionSetId,category:D[g].category,complexity:D[g].complexity}),j&&null!==g&&(0,u.jsx)(eS,{onClose:L,videoUrl:D[g].videoUrl||"",category:D[g].category,complexity:D[g].complexity,onUploadSuccess:function(e,t,n){if(console.log("5. InterviewVault - handleYoutubeUploadSuccess called with:",{localUrl:e,youtubeUrl:t,youtubeId:n,selectedImageIndex:g}),null!==g&&r){console.log("6. InterviewVault - Before update, current state:",{currentVideoUrl:D[g].videoUrl,isYouTube:null===(a=D[g].videoUrl)||void 0===a?void 0:a.includes("youtu")});var a,s="".concat(e,"|").concat(t),c=(0,l._)(D);c[g]=(0,i._)((0,o._)({},c[g]),{videoUrl:s}),console.log("7. InterviewVault - Setting local images with new videoUrl:",s),I(c),console.log("8. InterviewVault - Calling onUpdateImage to update parent state"),r(g,{videoUrl:s}),console.log("9. InterviewVault - YouTube upload success handling complete")}}})]})}function eC(){var e,t=(0,c._)((0,m.useState)([]),2),n=t[0],a=t[1],s=(0,c._)((0,m.useState)("all"),2),f=s[0],x=s[1],p=(0,em.pm)().toast,h=(e=(0,r._)(function(e,t,n,s){var r,o,i;return(0,d.Jh)(this,function(c){switch(c.label){case 0:console.log("Adding image with prompt:",e,"questionSetId:",t,"complexity:",n,"category:",s),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,new Promise(function(e){return setTimeout(e,3e3)})];case 2:return c.sent(),r="./placeholder.svg?height=300&width=300&text=".concat(encodeURIComponent(e)),t||console.warn("No questionSetId provided for image generation"),o={url:r,createdAt:new Date,isFavorite:!1,isCompleted:!1,questionSetId:t,complexity:n||"Easy",category:s||"General Interview"},a(function(e){return(0,l._)(e).concat([o])}),[2,r];case 3:throw console.error("Error adding image:",i=c.sent()),p({title:"Error",description:"Failed to generate image. Please try again.",variant:"destructive"}),i;case 4:return[2]}})}),function(t,n,a,s){return e.apply(this,arguments)});return(0,u.jsx)("div",{className:"container mx-auto px-2 py-4 h-[calc(100vh-4rem)] flex flex-col",children:(0,u.jsxs)("div",{className:"flex-1 grid grid-cols-10 gap-4 overflow-hidden",children:[(0,u.jsx)("div",{className:"col-span-4 border rounded-lg overflow-hidden",children:(0,u.jsx)(W,{onSendMessage:console.log,onGenerateImage:function(e,t,n,a){return console.log("Generating image with:",{questionSetId:t,complexity:n,category:a}),h(e,t,n,a)}})}),(0,u.jsx)("div",{className:"col-span-6 border rounded-lg overflow-hidden",children:(0,u.jsx)(eE,{images:n,filter:f,onFilterChange:x,onToggleFavorite:function(e){a(function(t){var n=(0,l._)(t),a=n.filter(function(e){return e.isFavorite&&e.isCompleted}).length;return!n[e].isFavorite&&a>=10?p({title:"Favorite limit reached",description:"You can only have up to 10 favorite interviews. Please remove a favorite before adding a new one."}):n[e]=(0,i._)((0,o._)({},n[e]),{isFavorite:!n[e].isFavorite}),n})},onCompleteInterview:function(e,t){if(console.log("completeInterview called in page with index:",e,"videoUrl:",t),e<0||e>=n.length){console.error("Invalid image index:",e);return}if(n[e].isCompleted){console.warn("Interview already completed");return}a(function(n){var a=(0,l._)(n);return a[e]=(0,i._)((0,o._)({},a[e]),{isCompleted:!0,completedAt:new Date,videoUrl:t}),a})},onUpdateImage:function(e,t){if(console.log("updateImage called with index:",e,"data:",t),e<0||e>=n.length){console.error("Invalid image index:",e);return}a(function(n){var a=(0,l._)(n);return a[e]=(0,o._)({},a[e],t),console.log("Updated image in parent state:",a[e]),a})}})})]})})}},37099:function(e,t,n){"use strict";n.d(t,{OL:function(){return y},_T:function(){return x},aR:function(){return u},f$:function(){return g},fY:function(){return p},le:function(){return b},xo:function(){return h},yT:function(){return v}});var a=n(5194),s=n(1780),r=n(46796),o=n(57437),i=n(2265),c=n(90277),l=n(94508),d=n(62869),u=c.fC;c.xz;var m=c.h_,f=i.forwardRef(function(e,t){var n=e.className,i=(0,r._)(e,["className"]);return(0,o.jsx)(c.aV,(0,s._)((0,a._)({className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},i),{ref:t}))});f.displayName=c.aV.displayName;var x=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{}),(0,o.jsx)(c.VY,(0,a._)({ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},s))]})});x.displayName=c.VY.displayName;var p=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,o.jsx)("div",(0,a._)({className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t)},n))};p.displayName="AlertDialogHeader";var h=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,o.jsx)("div",(0,a._)({className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};h.displayName="AlertDialogFooter";var g=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsx)(c.Dx,(0,a._)({ref:t,className:(0,l.cn)("text-lg font-semibold",n)},s))});g.displayName=c.Dx.displayName;var v=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsx)(c.dk,(0,a._)({ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n)},s))});v.displayName=c.dk.displayName;var y=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsx)(c.aU,(0,a._)({ref:t,className:(0,l.cn)((0,d.d)(),n)},s))});y.displayName=c.aU.displayName;var b=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsx)(c.$j,(0,a._)({ref:t,className:(0,l.cn)((0,d.d)({variant:"outline"}),"mt-2 sm:mt-0",n)},s))});b.displayName=c.$j.displayName},65613:function(e,t,n){"use strict";n.d(t,{Cd:function(){return u},X:function(){return m},bZ:function(){return d}});var a=n(5194),s=n(46796),r=n(57437),o=n(2265),i=n(90535),c=n(94508),l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=o.forwardRef(function(e,t){var n=e.className,o=e.variant,i=(0,s._)(e,["className","variant"]);return(0,r.jsx)("div",(0,a._)({ref:t,role:"alert",className:(0,c.cn)(l({variant:o}),n)},i))});d.displayName="Alert";var u=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("h5",(0,a._)({ref:t,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",n)},o))});u.displayName="AlertTitle";var m=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("div",(0,a._)({ref:t,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",n)},o))});m.displayName="AlertDescription"},16831:function(e,t,n){"use strict";n.d(t,{F$:function(){return d},Q5:function(){return u},qE:function(){return l}});var a=n(5194),s=n(46796),r=n(57437),o=n(2265),i=n(70650),c=n(94508),l=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)(i.fC,(0,a._)({ref:t,className:(0,c.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n)},o))});l.displayName=i.fC.displayName;var d=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)(i.Ee,(0,a._)({ref:t,className:(0,c.cn)("aspect-square h-full w-full",n)},o))});d.displayName=i.Ee.displayName;var u=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)(i.NY,(0,a._)({ref:t,className:(0,c.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n)},o))});u.displayName=i.NY.displayName},62869:function(e,t,n){"use strict";n.d(t,{d:function(){return d},z:function(){return u}});var a=n(5194),s=n(46796),r=n(57437),o=n(2265),i=n(37053),c=n(90535),l=n(94508),d=(0,c.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef(function(e,t){var n=e.className,o=e.variant,c=e.size,u=e.asChild,m=(0,s._)(e,["className","variant","size","asChild"]),f=void 0!==u&&u?i.g7:"button";return(0,r.jsx)(f,(0,a._)({className:(0,l.cn)(d({variant:o,size:c,className:n})),ref:t},m))});u.displayName="Button"},66070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return l},SZ:function(){return u},Zb:function(){return c},aY:function(){return m},eW:function(){return f},ll:function(){return d}});var a=n(5194),s=n(46796),r=n(57437),o=n(2265),i=n(94508),c=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("div",(0,a._)({ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n)},o))});c.displayName="Card";var l=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("div",(0,a._)({ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",n)},o))});l.displayName="CardHeader";var d=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("div",(0,a._)({ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",n)},o))});d.displayName="CardTitle";var u=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("div",(0,a._)({ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n)},o))});u.displayName="CardDescription";var m=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("div",(0,a._)({ref:t,className:(0,i.cn)("p-6 pt-0",n)},o))});m.displayName="CardContent";var f=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)("div",(0,a._)({ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",n)},o))});f.displayName="CardFooter"},26110:function(e,t,n){"use strict";n.d(t,{$N:function(){return g},Be:function(){return v},Vq:function(){return u},cN:function(){return h},cZ:function(){return x},fK:function(){return p}});var a=n(5194),s=n(1780),r=n(46796),o=n(57437),i=n(2265),c=n(49027),l=n(32489),d=n(94508),u=c.fC;c.xz;var m=c.h_;c.x8;var f=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsx)(c.aV,(0,a._)({ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},s))});f.displayName=c.aV.displayName;var x=i.forwardRef(function(e,t){var n=e.className,i=e.children,u=(0,r._)(e,["className","children"]);return(0,o.jsxs)(m,{children:[(0,o.jsx)(f,{}),(0,o.jsxs)(c.VY,(0,s._)((0,a._)({ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},u),{children:[i,(0,o.jsxs)(c.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(l.Z,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});x.displayName=c.VY.displayName;var p=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,o.jsx)("div",(0,a._)({className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};p.displayName="DialogHeader";var h=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,o.jsx)("div",(0,a._)({className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};h.displayName="DialogFooter";var g=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsx)(c.Dx,(0,a._)({ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",n)},s))});g.displayName=c.Dx.displayName;var v=i.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,o.jsx)(c.dk,(0,a._)({ref:t,className:(0,d.cn)("text-sm text-muted-foreground",n)},s))});v.displayName=c.dk.displayName},95186:function(e,t,n){"use strict";n.d(t,{I:function(){return c}});var a=n(5194),s=n(46796),r=n(57437),o=n(2265),i=n(94508),c=o.forwardRef(function(e,t){var n=e.className,o=e.type,c=(0,s._)(e,["className","type"]);return(0,r.jsx)("input",(0,a._)({type:o,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t},c))});c.displayName="Input"},26815:function(e,t,n){"use strict";n.d(t,{Label:function(){return u}});var a=n(5194),s=n(46796),r=n(57437),o=n(2265),i=n(6394),c=n(90535),l=n(94508),d=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)(i.f,(0,a._)({ref:t,className:(0,l.cn)(d(),n)},o))});u.displayName=i.f.displayName},32759:function(e,t,n){"use strict";n.d(t,{E:function(){return d}});var a=n(5194),s=n(1780),r=n(46796),o=n(57437),i=n(2265),c=n(60610),l=n(94508),d=i.forwardRef(function(e,t){var n=e.className,i=e.value,d=(0,r._)(e,["className","value"]);return(0,o.jsx)(c.fC,(0,s._)((0,a._)({ref:t,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n)},d),{children:(0,o.jsx)(c.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})}))});d.displayName=c.fC.displayName},12339:function(e,t,n){"use strict";n.d(t,{SP:function(){return u},dr:function(){return d},mQ:function(){return l},nU:function(){return m}});var a=n(5194),s=n(46796),r=n(57437),o=n(2265),i=n(20271),c=n(94508),l=i.fC,d=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)(i.aV,(0,a._)({ref:t,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n)},o))});d.displayName=i.aV.displayName;var u=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)(i.xz,(0,a._)({ref:t,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n)},o))});u.displayName=i.xz.displayName;var m=o.forwardRef(function(e,t){var n=e.className,o=(0,s._)(e,["className"]);return(0,r.jsx)(i.VY,(0,a._)({ref:t,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},o))});m.displayName=i.VY.displayName},35153:function(e,t,n){"use strict";n.d(t,{pm:function(){return v}});var a=n(84303),s=n(13477),r=n(5194),o=n(1780),i=n(50059),c=n(85735),l=n(2265),d=0,u=new Map,m=function(e){if(!u.has(e)){var t=setTimeout(function(){u.delete(e),h({type:"REMOVE_TOAST",toastId:e})},1e6);u.set(e,t)}},f=function(e,t){switch(t.type){case"ADD_TOAST":return(0,o._)((0,r._)({},e),{toasts:[t.toast].concat((0,c._)(e.toasts)).slice(0,1)});case"UPDATE_TOAST":return(0,o._)((0,r._)({},e),{toasts:e.toasts.map(function(e){return e.id===t.toast.id?(0,r._)({},e,t.toast):e})});case"DISMISS_TOAST":var n=t.toastId;return n?m(n):e.toasts.forEach(function(e){m(e.id)}),(0,o._)((0,r._)({},e),{toasts:e.toasts.map(function(e){return e.id===n||void 0===n?(0,o._)((0,r._)({},e),{open:!1}):e})});case"REMOVE_TOAST":if(void 0===t.toastId)return(0,o._)((0,r._)({},e),{toasts:[]});return(0,o._)((0,r._)({},e),{toasts:e.toasts.filter(function(e){return e.id!==t.toastId})})}},x=[],p={toasts:[]};function h(e){p=f(p,e),x.forEach(function(e){e(p)})}function g(e){var t=(0,a._)({},(0,s._)(e)),n=(d=(d+1)%Number.MAX_SAFE_INTEGER).toString(),i=function(){return h({type:"DISMISS_TOAST",toastId:n})};return h({type:"ADD_TOAST",toast:(0,o._)((0,r._)({},t),{id:n,open:!0,onOpenChange:function(e){e||i()}})}),{id:n,dismiss:i,update:function(e){return h({type:"UPDATE_TOAST",toast:(0,o._)((0,r._)({},e),{id:n})})}}}function v(){var e=(0,i._)(l.useState(p),2),t=e[0],n=e[1];return l.useEffect(function(){return x.push(n),function(){var e=x.indexOf(n);e>-1&&x.splice(e,1)}},[t]),(0,o._)((0,r._)({},t),{toast:g,dismiss:function(e){return h({type:"DISMISS_TOAST",toastId:e})}})}},94508:function(e,t,n){"use strict";n.d(t,{cn:function(){return r}});var a=n(61994),s=n(53335);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[337,518,60,711,865,896,374,295,980,268,971,117,744],function(){return e(e.s=62852)}),_N_E=e.O()}]);