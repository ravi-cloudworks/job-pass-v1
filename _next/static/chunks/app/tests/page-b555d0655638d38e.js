(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{57837:function(e,t,s){Promise.resolve().then(s.bind(s,67186))},67186:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return W}});var n=s(57437),r=s(2265),a=s(99376),i=s(76362),c=s(93113),l=s(2403),o=s(5194),d=s(1780),u=s(50059),m=s(85735),f=s(5853),h=s(280),x=s(66070),p=s(62869),v=s(73578),g=s(95186),j=s(26937),N=s(73247),y=s(90740),b=s(48736),w=s(91723),_=s(15868),C=s(14438),S=s(12144);function k(e){var t,s=e.companyId,i=(0,a.useRouter)(),c=(0,u._)((0,r.useState)([]),2),k=c[0],I=c[1],O=(0,u._)((0,r.useState)(!0),2),q=O[0],z=O[1],A=(0,u._)((0,r.useState)(""),2),Z=A[0],R=A[1],T=(0,u._)((0,r.useState)(null),2),Q=T[0],E=T[1],D=(0,u._)((0,r.useState)(null),2),V=D[0],J=D[1],F=(0,u._)((0,r.useState)([]),2),P=F[0],L=F[1];(0,r.useEffect)(function(){function e(){return(e=(0,l._)(function(){var e,t,n,r,a;return(0,f.Jh)(this,function(i){switch(i.label){case 0:z(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),e=h.OQ.from("tests").select("\n            *,\n            companies:company_id (\n              name\n            )\n          ").order("created_at",{ascending:!1}),s&&(e=e.eq("company_id",s)),[4,e];case 2:if(n=(t=i.sent()).data,r=t.error)throw r;return I(a=n.map(function(e){var t;return(0,d._)((0,o._)({},e),{company_name:(null===(t=e.companies)||void 0===t?void 0:t.name)||"Unknown"})})),L((0,m._)(new Set(a.map(function(e){return e.category}))).filter(Boolean).sort()),[3,5];case 3:return console.error("Error fetching tests:",i.sent()),C.Am.error("Failed to load tests"),[3,5];case 4:return z(!1),[7];case 5:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[s]);var M=function(e){switch(e){case"Easy":default:return"⭐";case"Medium":return"⭐⭐";case"Advanced":return"⭐⭐⭐"}},Y=k.filter(function(e){var t=e.title.toLowerCase().includes(Z.toLowerCase())||e.company_name.toLowerCase().includes(Z.toLowerCase()),s=!Q||e.complexity===Q,n=!V||e.category===V;return t&&s&&n}),B=(t=(0,l._)(function(e){var t,s,n,r,a,i,c,l,o;return(0,f.Jh)(this,function(d){switch(d.label){case 0:if(!confirm("Are you sure you want to delete this test?"))return[2];d.label=1;case 1:return d.trys.push([1,11,,12]),[4,h.OQ.from("tests").delete().eq("id",e)];case 2:if(t=d.sent().error)throw t;return[4,h.OQ.storage.from("test-content").remove(["".concat(e,".json")])];case 3:(s=d.sent().error)&&console.error("Error deleting test content file:",s),d.label=4;case 4:if(d.trys.push([4,9,,10]),!(n=k.find(function(t){return t.id===e})))return[3,8];return r="chatbot-flow-".concat(n.company_id,".json"),[4,h.OQ.storage.from("test-flows").download(r)];case 5:if(i=(a=d.sent()).data,!(!a.error&&i))return[3,8];return[4,i.text()];case 6:if(c=JSON.parse(d.sent()),l=!1,c.nodes&&Object.keys(c.nodes).forEach(function(t){var s=c.nodes[t];s.questionSetId&&s.questionSetId.standard&&["easy","medium","Advanced"].forEach(function(t){if(Array.isArray(s.questionSetId.standard[t])){var n=s.questionSetId.standard[t].indexOf(e);-1!==n&&(s.questionSetId.standard[t].splice(n,1),l=!0)}})}),!l)return[3,8];return c.metadata.lastUpdated=new Date().toISOString(),[4,h.OQ.storage.from("test-flows").upload(r,new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),{upsert:!0})];case 7:(o=d.sent().error)&&console.error("Error updating flow after test deletion:",o),d.label=8;case 8:return[3,10];case 9:return console.error("Error updating flow references:",d.sent()),[3,10];case 10:return I(k.filter(function(t){return t.id!==e})),C.Am.success("Test deleted successfully"),[3,12];case 11:return console.error("Error deleting test:",d.sent()),C.Am.error("Failed to delete test"),[3,12];case 12:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{items:[{label:"Companies",onClick:function(){return i.push("/companies?view=list")}}].concat((0,m._)(s?[{label:"Company Tests"}]:[{label:"All Tests"}]))}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:s?"Company Tests":"All Tests"}),s&&(0,n.jsxs)(p.z,{onClick:function(){return i.push("/tests?view=new&companyId=".concat(s))},className:"text-base",children:[(0,n.jsx)(j.Z,{className:"mr-2 h-5 w-5"}),"Create New Test"]})]}),(0,n.jsxs)(x.Zb,{children:[(0,n.jsx)(x.Ol,{className:"pb-2",children:(0,n.jsx)(x.ll,{className:"text-xl",children:"Tests"})}),(0,n.jsxs)(x.aY,{children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4 mb-4 md:flex-row md:space-y-0 md:space-x-4 md:items-center",children:[(0,n.jsxs)("div",{className:"relative flex-1",children:[(0,n.jsx)(N.Z,{className:"absolute left-2.5 top-3 h-4 w-4 text-gray-500"}),(0,n.jsx)(g.I,{type:"search",placeholder:"Search tests...",className:"pl-8 text-base h-10",value:Z,onChange:function(e){return R(e.target.value)}})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(y.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Complexity:"}),(0,n.jsx)("div",{className:"flex space-x-1",children:["Easy","Medium","Advanced"].map(function(e){return(0,n.jsxs)(p.z,{variant:Q===e?"default":"outline",size:"sm",onClick:function(){Q===e?E(null):E(e)},className:"text-xs h-8",children:[M(e)," ",e]},e)})})]}),P.length>0&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Category:"}),(0,n.jsxs)("select",{className:"text-sm p-1 border rounded",value:V||"",onChange:function(e){return J(e.target.value||null)},children:[(0,n.jsx)("option",{value:"",children:"All"}),P.map(function(e){return(0,n.jsx)("option",{value:e,children:e},e)})]})]})]}),q?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-primary"}),(0,n.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading tests..."})]}):0===Y.length?(0,n.jsxs)("div",{className:"text-center py-12 border rounded-md bg-gray-50",children:[(0,n.jsx)("p",{className:"text-gray-500 mb-4",children:0===k.length?"No tests found":"No tests match your search criteria"}),s&&(0,n.jsx)(p.z,{onClick:function(){return i.push("/tests?view=new&companyId=".concat(s))},children:"Create your first test"})]}):(0,n.jsxs)(v.iA,{children:[(0,n.jsx)(v.xD,{children:(0,n.jsxs)(v.SC,{children:[(0,n.jsx)(v.ss,{className:"w-[40%] text-base",children:"Test Title"}),!s&&(0,n.jsx)(v.ss,{className:"text-base",children:"Company"}),(0,n.jsx)(v.ss,{className:"text-base",children:"Complexity"}),(0,n.jsx)(v.ss,{className:"text-base",children:"Category"}),(0,n.jsx)(v.ss,{className:"text-base",children:"Time"}),(0,n.jsx)(v.ss,{className:"text-base",children:"Created"}),(0,n.jsx)(v.ss,{className:"text-base text-right",children:"Actions"})]})}),(0,n.jsx)(v.RM,{children:Y.map(function(e){var t;return(0,n.jsxs)(v.SC,{className:"cursor-pointer hover:bg-gray-50",onClick:function(){return i.push("/tests?view=detail&id=".concat(e.id,"&companyId=").concat(e.company_id))},children:[(0,n.jsx)(v.pj,{className:"font-medium text-base",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-5 w-5 mr-2 text-gray-500"}),e.title]})}),!s&&(0,n.jsx)(v.pj,{className:"text-base",children:e.company_name}),(0,n.jsx)(v.pj,{className:"text-base",children:(0,n.jsx)("span",{title:e.complexity,children:M(e.complexity)})}),(0,n.jsx)(v.pj,{className:"text-base",children:e.category}),(0,n.jsx)(v.pj,{className:"text-base",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(w.Z,{className:"h-4 w-4 mr-1 text-gray-500"}),(t=e.time_limit,"".concat(Math.floor(t/60)," min"))]})}),(0,n.jsx)(v.pj,{className:"text-base",children:new Date(e.created_at).toLocaleDateString()}),(0,n.jsxs)(v.pj,{className:"text-right",children:[(0,n.jsxs)(p.z,{variant:"ghost",size:"sm",onClick:function(t){t.stopPropagation(),i.push("/tests?view=edit&id=".concat(e.id,"&companyId=").concat(e.company_id))},children:[(0,n.jsx)(_.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,n.jsxs)(p.z,{variant:"ghost",size:"sm",onClick:function(t){t.stopPropagation(),B(e.id)},children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,n.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]},e.id)})})]})]})]})]})}var I=s(12249),O=s(26815),q=s(12339),z=s(962),A=z.fC,Z=z.wy,R=z.Fw,T=s(40875),Q=s(99397),E=s(27413),D=s(51817),V=s(49465),J=s(26110),F=s(53647),P=["i.postimg.cc","i.imgur.com","miro.medium.com","cdn-images-1.medium.com"],L=[{name:"Easy",time:15},{name:"Medium",time:30},{name:"Advanced",time:45}];function M(e){var t,s,i,c,v,j,N,y,b,w,_=e.companyId,k=e.user,z=e.testId,M=(0,a.useRouter)(),Y=(0,u._)((0,r.useState)([]),2),B=Y[0],U=Y[1],H=(0,u._)((0,r.useState)([]),2),G=H[0],$=H[1],K=(0,u._)((0,r.useState)(null),2),X=K[0],W=K[1],ee=(0,u._)((0,r.useState)(!1),2),et=ee[0],es=ee[1],en=(0,u._)((0,r.useState)(!1),2),er=en[0],ea=en[1],ei=(0,u._)((0,r.useState)(""),2),ec=ei[0],el=ei[1],eo=(0,u._)((0,r.useState)(""),2),ed=eo[0],eu=eo[1],em=(0,u._)((0,r.useState)(null),2),ef=em[0],eh=em[1],ex=(0,u._)((0,r.useState)("Easy"),2),ep=ex[0],ev=ex[1],eg=(0,u._)((0,r.useState)(null),2),ej=(eg[0],eg[1]),eN=(0,u._)((0,r.useState)(""),2),ey=eN[0],eb=eN[1],ew=(0,u._)((0,r.useState)(900),2),e_=ew[0],eC=ew[1],eS=(0,u._)((0,r.useState)("questions"),2);eS[0],eS[1];var ek=(0,u._)((0,r.useState)(!0),2),eI=ek[0],eO=ek[1],eq=(0,u._)((0,r.useState)(!1),2),ez=eq[0],eA=eq[1],eZ=(0,u._)((0,r.useState)([]),2),eR=eZ[0],eT=eZ[1],eQ=(0,u._)((0,r.useState)(null),2),eE=eQ[0],eD=eQ[1],eV=(0,u._)((0,r.useState)(0),2);eV[0],eV[1];var eJ=(0,u._)((0,r.useState)(!1),2),eF=eJ[0],eP=eJ[1],eL=(0,u._)((0,r.useState)(null),2),eM=eL[0],eY=eL[1],eB=(0,u._)((0,r.useState)(""),2),eU=eB[0],eH=eB[1],eG=(0,u._)((0,r.useState)(!1),2),e$=eG[0],eK=eG[1],eX=(0,u._)((0,r.useState)({Easy:{markdown:"",preview:null},Medium:{markdown:"",preview:null},Advanced:{markdown:"",preview:null}}),2),eW=eX[0],e0=eX[1];(0,r.useEffect)(function(){function e(){return(e=(0,l._)(function(){var e,t,s,n,r,a,i,c,l,o,d,u,m,x,p,v,g,j,N,y,b,w,S,k,I,O,q,A,Z;return(0,f.Jh)(this,function(f){switch(f.label){case 0:eO(!0),f.label=1;case 1:return f.trys.push([1,7,8,9]),[4,h.OQ.from("companies").select("name").eq("id",_).single()];case 2:if(t=(e=f.sent()).data,s=e.error)throw s;return eH(t.name),[4,h.OQ.from("test_menus").select("menu_json").eq("company_id",_).single()];case 3:if(r=(n=f.sent()).data,!(a=n.error))return[3,4];if("PGRST116"===a.code)U([]);else throw a;return[3,6];case 4:if(U(r.menu_json||[]),!z)return[3,6];i=null,c=null,l=!0,o=!1,d=void 0;try{for(u=(r.menu_json||[])[Symbol.iterator]();!(l=(m=u.next()).done);l=!0){if((x=m.value).children){p=!0,v=!1,g=void 0;try{for(j=x.children[Symbol.iterator]();!(p=(N=j.next()).done);p=!0)if((y=N.value).testIds){b=!0,w=!1,S=void 0;try{for(k=L[Symbol.iterator]();!(b=(I=k.next()).done);b=!0)if(q=(O=I.value).name.toLowerCase(),y.testIds[q]===z){i=y,c=O.name;break}}catch(e){w=!0,S=e}finally{try{b||null==k.return||k.return()}finally{if(w)throw S}}if(i)break}}catch(e){v=!0,g=e}finally{try{p||null==j.return||j.return()}finally{if(v)throw g}}}if(i)break}}catch(e){o=!0,d=e}finally{try{l||null==u.return||u.return()}finally{if(o)throw d}}if(!(i&&c))return[3,6];return W(i),ev(c),[4,h.OQ.from("tests").select("*").eq("id",z).single()];case 5:Z=(A=f.sent()).data,!A.error&&Z&&(ej(Z),eb(Z.markdown_content),eC(Z.time_limit)),f.label=6;case 6:return[3,9];case 7:return console.error("Error loading data:",f.sent()),C.Am.error("Failed to load data"),[3,9];case 8:return eO(!1),[7];case 9:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[_,z]);var e1=function(e){$(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):(0,m._)(t).concat([e])})},e2=(t=(0,l._)(function(e){var t,s,n,r,a,i,c;return(0,f.Jh)(this,function(l){switch(l.label){case 0:if(W(e),!e.testIds)return[3,6];if(!(t=e.testIds[ep.toLowerCase()]||""))return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,h.OQ.from("tests").select("*").eq("id",t).single()];case 2:if(n=(s=l.sent()).data,r=s.error){if("PGRST116"===r.code)console.log("No content found for this test/complexity yet"),ej(null),eb(""),eC((a=L.find(function(e){return e.name===ep}))?60*a.time:900);else throw r}else ej(n),eb(n.markdown_content||""),eC(n.time_limit||900),n.markdown_content&&(i=n.markdown_content.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question}),eD({id:t,title:e.name,time_limit:n.time_limit,questions:i}));return[3,4];case 3:return console.error("Error loading test:",l.sent()),C.Am.error("Failed to load test content"),[3,4];case 4:return[3,6];case 5:ej(null),eb(""),eC((c=L.find(function(e){return e.name===ep}))?60*c.time:900),l.label=6;case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),e4=(s=(0,l._)(function(){var e,t,s,n,r;return(0,f.Jh)(this,function(a){switch(a.label){case 0:if(!ec.trim())return C.Am.error("Category name cannot be empty"),[2];e={id:"category-".concat(Date.now()),name:ec.trim(),children:[]},U(t=(0,m._)(B).concat([e])),a.label=1;case 1:return a.trys.push([1,7,,8]),[4,h.OQ.from("test_menus").select("id").eq("company_id",_).maybeSingle()];case 2:if(n=(s=a.sent()).data,(r=s.error)&&"PGRST116"!==r.code)throw r;if(!(null==n?void 0:n.id))return[3,4];return[4,h.OQ.from("test_menus").update({menu_json:t,last_modified_by:k.id,updated_at:new Date().toISOString()}).eq("company_id",_)];case 3:return a.sent(),[3,6];case 4:return[4,h.OQ.from("test_menus").insert({company_id:_,menu_json:t,last_modified_by:k.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})];case 5:a.sent(),a.label=6;case 6:return C.Am.success("Category added successfully"),el(""),es(!1),[3,8];case 7:return console.error("Error saving category:",a.sent()),C.Am.error("Failed to save category"),[3,8];case 8:return[2]}})}),function(){return s.apply(this,arguments)}),e5=(i=(0,l._)(function(){var e,t,s,n,r,a,i,c,l,o,d,u,x;return(0,f.Jh)(this,function(p){switch(p.label){case 0:if(!ef)return C.Am.error("No category selected"),[2];if(!ed.trim())return C.Am.error("Test name cannot be empty"),[2];e=Date.now(),t=ed.trim().toUpperCase().replace(/[^A-Z0-9]/g,"-").substring(0,20),s={easy:"".concat(t,"-EASY-").concat(e),medium:"".concat(t,"-MED-").concat(e),advanced:"".concat(t,"-ADV-").concat(e)},n={id:"test-".concat(e),name:ed.trim(),testIds:s},p.label=1;case 1:p.trys.push([1,15,,16]),r=!0,a=!1,i=void 0,p.label=2;case 2:p.trys.push([2,7,8,9]),c=function(){var e,t,n,r;return(0,f.Jh)(this,function(a){switch(a.label){case 0:return t=s[e=o.value],n=e.toLowerCase(),r=60*(L.find(function(e){return e.name.toLowerCase()===n})||L[0]).time,[4,h.OQ.from("tests").insert({id:t,title:ed.trim(),company_id:_,complexity:e.toUpperCase(),category:ef.name,time_limit:r,created_at:new Date().toISOString()})];case 1:return a.sent(),[2]}})},l=Object.keys(s)[Symbol.iterator](),p.label=3;case 3:if(r=(o=l.next()).done)return[3,6];return[5,(0,f.XA)(c())];case 4:p.sent(),p.label=5;case 5:return r=!0,[3,3];case 6:return[3,9];case 7:return d=p.sent(),a=!0,i=d,[3,9];case 8:try{r||null==l.return||l.return()}finally{if(a)throw i}return[7];case 9:return u=(0,m._)(B),(x=function(e){if(!ef)return!1;for(var t=0;t<e.length;t++){if(e[t].id===ef.id){var s=e[t];return s.children||(s.children=[]),s.children.push(n),!0}var r=e[t].children;if(r&&r.length>0&&x((0,m._)(r)))return!0}return!1})(u),U(u),[4,h.OQ.from("test_menus").select("id").eq("company_id",_).single()];case 10:if(!p.sent().data)return[3,12];return[4,h.OQ.from("test_menus").update({menu_json:u,menu_text:JSON.stringify(u),updated_at:new Date().toISOString(),last_modified_by:k.id}).eq("company_id",_)];case 11:return p.sent(),[3,14];case 12:return[4,h.OQ.from("test_menus").insert({company_id:_,menu_json:u,menu_text:JSON.stringify(u),last_modified_by:k.id})];case 13:p.sent(),p.label=14;case 14:return ea(!1),eu(""),C.Am.success("Test added successfully"),[3,16];case 15:return console.error("Error adding test:",p.sent()),C.Am.error("Failed to add test"),[3,16];case 16:return[2]}})}),function(){return i.apply(this,arguments)}),e3=(c=(0,l._)(function(){var e,t,s,n,r,a,i,c,l,u,m,x;return(0,f.Jh)(this,function(f){switch(f.label){case 0:if(!eM)return[2];f.label=1;case 1:if(f.trys.push([1,16,,17]),!eM.children)return[3,2];return e=B.filter(function(e){return e.id!==eM.id}),[3,10];case 2:if(e=B.map(function(e){var t;return(null===(t=e.children)||void 0===t?void 0:t.some(function(e){return e.id===eM.id}))?(0,d._)((0,o._)({},e),{children:e.children.filter(function(e){return e.id!==eM.id})}):e}),!eM.testIds)return[3,10];t=!0,s=!1,n=void 0,f.label=3;case 3:f.trys.push([3,8,9,10]),r=Object.keys(eM.testIds)[Symbol.iterator](),f.label=4;case 4:if(t=(a=r.next()).done)return[3,7];if(i=a.value,!(c=eM.testIds[i]))return[3,6];return[4,h.OQ.from("tests").delete().eq("id",c)];case 5:f.sent(),f.label=6;case 6:return t=!0,[3,4];case 7:return[3,10];case 8:return l=f.sent(),s=!0,n=l,[3,10];case 9:try{t||null==r.return||r.return()}finally{if(s)throw n}return[7];case 10:return[4,h.OQ.from("test_menus").select("id").eq("company_id",_).maybeSingle()];case 11:if(m=(u=f.sent()).data,(x=u.error)&&"PGRST116"!==x.code)throw x;if(!(null==m?void 0:m.id))return[3,13];return[4,h.OQ.from("test_menus").update({menu_json:e,menu_text:JSON.stringify(e),updated_at:new Date().toISOString(),last_modified_by:(null==k?void 0:k.id)||null}).eq("company_id",_)];case 12:return f.sent(),[3,15];case 13:return[4,h.OQ.from("test_menus").insert({company_id:_,menu_json:e,menu_text:JSON.stringify(e),last_modified_by:(null==k?void 0:k.id)||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})];case 14:f.sent(),f.label=15;case 15:return U(e),C.Am.success("Deleted successfully"),eP(!1),eY(null),(null==X?void 0:X.id)===eM.id&&(W(null),ej(null),eb("")),[3,17];case 16:return console.error("Error deleting:",f.sent()),C.Am.error("Failed to delete"),[3,17];case 17:return[2]}})}),function(){return c.apply(this,arguments)}),e6=(v=(0,l._)(function(e){var t,s,n,r;return(0,f.Jh)(this,function(a){switch(a.label){case 0:if(X&&e0(function(e){return(0,d._)((0,o._)({},e),(0,I._)({},ep,{markdown:ey,preview:eE}))}),ev(e),eC((n=L.find(function(t){return t.name===e}))?60*n.time:900),eb((null===(t=eW[e])||void 0===t?void 0:t.markdown)||""),eD(null===(s=eW[e])||void 0===s?void 0:s.preview),!(X&&X.testIds)||!(r=X.testIds[e.toLowerCase()]))return[3,2];return[4,e7(r).catch(function(e){console.log("Could not load test from database, using cached content")})];case 1:a.sent(),a.label=2;case 2:return[2]}})}),function(e){return v.apply(this,arguments)}),e7=(j=(0,l._)(function(e){var t,s,n,r,a,i,c,l;return(0,f.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,h.OQ.from("tests").select("*").eq("id",e).single()];case 1:if(s=(t=u.sent()).data,n=t.error){if("PGRST116"===n.code)return console.log("No content found for this test/complexity yet"),ej(null),eb(""),eC((r=L.find(function(e){return e.name===ep}))?60*r.time:900),X&&eD({id:e,title:X.name,time_limit:r?60*r.time:900,questions:[]}),[2,null];throw n}return ej(s),eb(s.markdown_content||""),eC((a=L.find(function(e){return e.name===ep}))?60*a.time:900),s.markdown_content&&(i=s.markdown_content.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question}),eD(c={id:e,title:s.title,time_limit:s.time_limit,questions:i}),e0(function(e){return(0,d._)((0,o._)({},e),(0,I._)({},ep,{markdown:s.markdown_content,preview:c}))})),[2,s];case 2:throw console.error("Error loading test:",l=u.sent()),l;case 3:return[2]}})}),function(e){return j.apply(this,arguments)}),e9=(N=(0,l._)(function(){var e,t,s,n,r;return(0,f.Jh)(this,function(a){switch(a.label){case 0:if(!X||!X.testIds)return C.Am.error("No test selected"),[2];eA(!0),a.label=1;case 1:if(a.trys.push([1,7,8,9]),!(t=null===(e=X.testIds)||void 0===e?void 0:e[ep.toLowerCase()]))return C.Am.error("Test ID not found for selected complexity"),eA(!1),[2];if((s=te(ey)).errors.length>0)return eT(s.errors),eK(!0),eA(!1),[2];return n=ey.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question}),r={id:t,title:X.name,time_limit:e_,questions:n},[4,h.OQ.from("tests").select("id").eq("id",t).single()];case 2:if(a.sent().data)return[3,4];return[4,h.OQ.from("tests").insert({id:t,title:X.name,company_id:_,complexity:ep.toUpperCase(),category:X.name,time_limit:e_,markdown_content:ey,created_at:new Date().toISOString()})];case 3:return a.sent(),[3,6];case 4:return[4,h.OQ.from("tests").update({title:X.name,complexity:ep.toUpperCase(),category:X.name,time_limit:e_,markdown_content:ey}).eq("id",t)];case 5:a.sent(),a.label=6;case 6:return e0(function(e){return(0,d._)((0,o._)({},e),(0,I._)({},ep,{markdown:ey,preview:r}))}),eD(r),C.Am.success("Saved successfully"),[3,9];case 7:return console.error("Error saving content:",a.sent()),C.Am.error("Failed to save content"),[3,9];case 8:return eA(!1),[7];case 9:return[2]}})}),function(){return N.apply(this,arguments)}),e8=function(e){var t=!!e.children;return(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsxs)(A,{open:G.includes(e.id),onOpenChange:function(){return e1(e.id)},children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md ".concat((null==X?void 0:X.id)===e.id?"bg-muted":"hover:bg-muted/50"),onClick:function(){return e2(e)},children:[(0,n.jsxs)("div",{className:"flex items-center",children:[t?(0,n.jsx)(Z,{asChild:!0,children:(0,n.jsx)(p.z,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0",children:(0,n.jsx)(T.Z,{className:"h-4 w-4 transition-transform duration-200 ".concat(G.includes(e.id)?"":"-rotate-90")})})}):(0,n.jsx)("div",{className:"w-6"}),(0,n.jsx)("span",{className:"ml-1 ".concat(t?"font-medium":""),children:e.name})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[t?(0,n.jsx)(p.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:function(t){t.stopPropagation(),eh(e),ea(!0)},children:(0,n.jsx)(Q.Z,{className:"h-3 w-3"})}):null,(0,n.jsx)(p.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:function(t){t.stopPropagation(),eY(e),eP(!0)},children:(0,n.jsx)(E.Z,{className:"h-3 w-3"})})]})]}),t&&e.children&&(0,n.jsx)(R,{children:(0,n.jsx)("div",{className:"pl-4 mt-1 border-l-2 border-muted",children:e.children.map(function(e){return(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md ".concat((null==X?void 0:X.id)===e.id?"bg-muted":"hover:bg-muted/50"),onClick:function(){return e2(e)},children:[(0,n.jsx)("span",{className:e.testIds&&!Object.keys(e.testIds).every(function(t){var s,n=null===(s=e.testIds)||void 0===s?void 0:s[t];return n&&n.length>0})?"text-red-500":"",children:e.name}),(0,n.jsx)(p.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:function(t){t.stopPropagation(),eY(e),eP(!0)},children:(0,n.jsx)(E.Z,{className:"h-3 w-3"})})]},e.id)})})})]})},e.id)},te=function(e){var t,s=[];e.length>5e3&&s.push({type:"error",message:"Content exceeds maximum length (".concat(e.length,"/").concat(5e3," characters)")});var n=e.split("---").filter(function(e){return e.trim()});0===n.length?s.push({type:"error",message:'No questions found. Use "---" to separate questions.'}):n.length>30&&s.push({type:"error",message:"Too many questions (".concat(n.length,"/").concat(30," max)")});for(var r=/!\[.*?\]\((https?:\/\/[^)]+)\)/g,a=[];null!==(t=r.exec(e));){var i=t[1];try{var c=new URL(i).hostname;P.includes(c)||a.push(i)}catch(e){a.push(i)}}return a.length>0&&s.push({type:"warning",message:"Found ".concat(a.length," images from untrusted domains. Only use images from: ").concat(P.join(", "))}),{errors:s}},tt=function(){var e=ey.split("---").map(function(e,t){return{id:"q".concat(t+1),question:e.trim()}}).filter(function(e){return e.question}),t="";if(null==X?void 0:X.testIds){var s=ep.toLowerCase();t=X.testIds[s]||""}eD({id:t,title:(null==X?void 0:X.name)||"",time_limit:e_,questions:e})};return eI?(0,n.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,n.jsx)(D.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,n.jsx)("span",{className:"ml-2 text-lg",children:"Loading..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{items:[{label:"Companies",onClick:function(){return M.push("/companies?view=list")}},{label:eU,onClick:function(){return M.push("/companies?view=detail&id=".concat(_))}},{label:"Test Manager"}]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Test Manager"}),(0,n.jsx)("p",{className:"text-gray-500",children:"Manage test structure and content"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)(x.Zb,{className:"lg:col-span-1",children:[(0,n.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(x.ll,{children:"Test Structure"}),(0,n.jsxs)(p.z,{size:"sm",onClick:function(){return es(!0)},children:[(0,n.jsx)(V.Z,{className:"h-4 w-4 mr-1"}),"Add Category"]})]}),(0,n.jsx)(x.aY,{children:(0,n.jsx)("div",{className:"space-y-1",children:B.length>0?B.map(function(e){return e8(e)}):(0,n.jsxs)("div",{className:"text-center p-8 text-muted-foreground",children:[(0,n.jsx)("p",{children:"No categories defined"}),(0,n.jsx)("p",{className:"text-sm mt-2",children:"Add a category to get started"})]})})})]}),(0,n.jsx)(x.Zb,{className:"lg:col-span-2",children:X&&X.testIds?(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:(null==X?void 0:X.name)||"Test Editor"}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(p.z,{onClick:e9,disabled:ez||!X,className:"bg-green-600 hover:bg-green-700",children:ez?"Saving...":"Save Test"}),(0,n.jsxs)(F.Ph,{value:ep,onValueChange:e6,children:[(0,n.jsx)(F.i4,{className:"w-[180px]",children:(0,n.jsx)(F.ki,{placeholder:"Select complexity"})}),(0,n.jsxs)(F.Bw,{children:[(0,n.jsx)(F.Ql,{value:"easy",children:"Easy (15 min)"}),(0,n.jsx)(F.Ql,{value:"medium",children:"Medium (30 min)"}),(0,n.jsx)(F.Ql,{value:"advanced",children:"Advanced (45 min)"})]})]})]})]}),(0,n.jsxs)(q.mQ,{defaultValue:"questions",className:"flex-1 flex flex-col",children:[(0,n.jsxs)(q.dr,{children:[(0,n.jsx)(q.SP,{value:"questions",children:"Questions"}),(0,n.jsx)(q.SP,{value:"preview",onClick:function(){return tt()},children:"Preview"})]}),(0,n.jsxs)(q.nU,{value:"questions",className:"flex-1 flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block mb-2",children:"Time Limit (seconds):"}),(0,n.jsx)(g.I,{type:"number",value:e_,onChange:function(e){return eC(parseInt(e.target.value))},min:"60",max:"3600"})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{className:"block mb-2",children:"Test Questions:"}),(0,n.jsx)("textarea",{value:ey,onChange:function(e){return eb(e.target.value)},className:"w-full h-full min-h-[400px] p-4 border rounded font-mono",placeholder:"Enter test questions here. Separate questions with ---",style:{whiteSpace:"pre-wrap"}})]})]}),(0,n.jsx)(q.nU,{value:"preview",className:"flex-1 overflow-auto",children:(0,n.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,n.jsx)("h3",{className:"text-xl font-bold mb-4",children:(null==eE?void 0:eE.title)||(null==X?void 0:X.name)||"Test Preview"}),(0,n.jsxs)("p",{className:"mb-4",children:["Time Limit: ",(b=Math.floor((y=(null==eE?void 0:eE.time_limit)||e_)/60),w=y%60,"".concat(b," min").concat(1!==b?"s":""," ").concat(w>0?"".concat(w," sec").concat(1!==w?"s":""):""))]}),(null==eE?void 0:eE.questions)&&eE.questions.length>0?eE.questions.map(function(e,t){return(0,n.jsxs)("div",{className:"mb-6 p-4 bg-white rounded shadow",children:[(0,n.jsxs)("h4",{className:"font-bold mb-2",children:["Question ",t+1]}),(0,n.jsx)("div",{className:"whitespace-pre-wrap",children:e.question})]},e.id)}):(0,n.jsx)("div",{className:"text-center p-4 bg-yellow-100 rounded",children:(0,n.jsx)("p",{children:"No questions to preview. Add questions in the Questions tab."})})]})})]})]}):(0,n.jsx)("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Select a test from the left panel to edit its content"})})})]}),(0,n.jsx)(J.Vq,{open:et,onOpenChange:es,children:(0,n.jsxs)(J.cZ,{children:[(0,n.jsxs)(J.fK,{children:[(0,n.jsx)(J.$N,{children:"Add Category"}),(0,n.jsx)(J.Be,{children:"Create a new category for organizing tests"})]}),(0,n.jsxs)("div",{className:"py-4",children:[(0,n.jsx)(O._,{htmlFor:"category-name",children:"Category Name"}),(0,n.jsx)(g.I,{id:"category-name",value:ec,onChange:function(e){return el(e.target.value)},placeholder:"e.g., ML Engineer"})]}),(0,n.jsxs)(J.cN,{children:[(0,n.jsx)(p.z,{variant:"outline",onClick:function(){return es(!1)},children:"Cancel"}),(0,n.jsx)(p.z,{onClick:e4,children:"Add Category"})]})]})}),(0,n.jsx)(J.Vq,{open:er,onOpenChange:ea,children:(0,n.jsxs)(J.cZ,{children:[(0,n.jsxs)(J.fK,{children:[(0,n.jsx)(J.$N,{children:"Add Test"}),(0,n.jsxs)(J.Be,{children:["Add a new test to ",null==ef?void 0:ef.name]})]}),(0,n.jsxs)("div",{className:"py-4",children:[(0,n.jsx)(O._,{htmlFor:"test-name",children:"Test Name"}),(0,n.jsx)(g.I,{id:"test-name",value:ed,onChange:function(e){return eu(e.target.value)},placeholder:"e.g., Mathematics"})]}),(0,n.jsxs)(J.cN,{children:[(0,n.jsx)(p.z,{variant:"outline",onClick:function(){return ea(!1)},children:"Cancel"}),(0,n.jsx)(p.z,{onClick:e5,children:"Add Test"})]})]})}),(0,n.jsx)(J.Vq,{open:eF,onOpenChange:eP,children:(0,n.jsxs)(J.cZ,{children:[(0,n.jsxs)(J.fK,{children:[(0,n.jsx)(J.$N,{children:"Confirm Deletion"}),(0,n.jsxs)(J.Be,{children:["Are you sure you want to delete ",(null==eM?void 0:eM.children)?"category":"test",' "',null==eM?void 0:eM.name,'"?',(null==eM?void 0:eM.children)&&eM.children.length>0&&(0,n.jsx)("p",{className:"text-destructive mt-2",children:"This will also delete all tests within this category!"})]})]}),(0,n.jsxs)(J.cN,{children:[(0,n.jsx)(p.z,{variant:"outline",onClick:function(){return eP(!1)},children:"Cancel"}),(0,n.jsx)(p.z,{variant:"destructive",onClick:e3,children:"Delete"})]})]})}),(0,n.jsx)(J.Vq,{open:e$,onOpenChange:eK,children:(0,n.jsxs)(J.cZ,{children:[(0,n.jsx)(J.fK,{children:(0,n.jsx)(J.$N,{children:"Validation Errors"})}),(0,n.jsx)("div",{className:"max-h-[400px] overflow-auto",children:(0,n.jsx)("ul",{className:"list-disc pl-5",children:eR.map(function(e,t){return(0,n.jsx)("li",{className:"text-red-500 mb-2",children:e.message},t)})})}),(0,n.jsx)(J.cN,{children:(0,n.jsx)(p.z,{onClick:function(){return eK(!1)},children:"Close"})})]})})]})}var Y=s(57970),B=s(11411),U=s.n(B),H=s(32660),G=s(92451),$=s(10407);function K(e){var t,s,i,c=e.testId,m=(0,a.useRouter)(),v=(0,u._)((0,r.useState)(null),2),g=v[0],j=v[1],N=(0,u._)((0,r.useState)([]),2),y=N[0],b=N[1],k=(0,u._)((0,r.useState)(0),2),I=k[0],O=k[1],q=(0,u._)((0,r.useState)(!0),2),z=q[0],A=q[1],Z=(0,u._)((0,r.useState)(""),2),R=Z[0];return(Z[1],(0,r.useEffect)(function(){function e(){return(e=(0,l._)(function(){var e,t,s,n,r,a,i;return(0,f.Jh)(this,function(l){switch(l.label){case 0:A(!0),l.label=1;case 1:return l.trys.push([1,5,6,7]),[4,h.OQ.from("tests").select("\n            *,\n            companies:company_id (\n              name\n            )\n          ").eq("id",c).single()];case 2:if(s=(t=l.sent()).data,n=t.error)throw n;return j((0,d._)((0,o._)({},s),{company_name:(null===(e=s.companies)||void 0===e?void 0:e.name)||"Unknown"})),[4,h.OQ.storage.from("test-content").download("".concat(c,".json"))];case 3:if(a=(r=l.sent()).data,i=r.error)throw i;return[4,a.text()];case 4:return b(JSON.parse(l.sent()).questions||[]),[3,7];case 5:return console.error("Error fetching test:",l.sent()),C.Am.error("Failed to load test details"),[3,7];case 6:return A(!1),[7];case 7:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c]),z)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{items:[{label:"Companies",onClick:function(){return m.push("/companies?view=list")}},{label:"Loading..."}]}),(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-primary"}),(0,n.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading test details..."})]})]}):g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{items:[{label:"Companies",onClick:function(){return m.push("/companies?view=list")}},{label:g.company_name,onClick:function(){return m.push("/companies?view=detail&id=".concat(g.company_id))}},{label:g.title}]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-1",children:g.title}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-1",children:function(e){switch(e){case"Easy":default:return"⭐";case"Medium":return"⭐⭐";case"Advanced":return"⭐⭐⭐"}}(g.complexity)}),(0,n.jsx)("span",{children:g.complexity})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:(t=g.time_limit,"".concat(Math.floor(t/60),":").concat((t%60).toString().padStart(2,"0")))})]}),(0,n.jsx)("div",{children:g.category})]})]}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsxs)(p.z,{variant:"outline",onClick:function(){return m.push("/companies?view=detail&id=".concat(g.company_id))},children:[(0,n.jsx)(H.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,n.jsxs)(p.z,{onClick:function(){return m.push("/tests?view=edit&id=".concat(c,"&companyId=").concat(g.company_id))},children:[(0,n.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),"Edit Test"]})]})]}),0===y.length?(0,n.jsx)(x.Zb,{children:(0,n.jsx)(x.aY,{className:"py-12 text-center",children:(0,n.jsx)("p",{className:"text-gray-500",children:"No questions found in this test"})})}):(0,n.jsxs)(x.Zb,{className:"mb-6",children:[(0,n.jsx)(x.Ol,{className:"pb-0",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(x.ll,{className:"text-xl",children:"Question Preview"}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:["Question ",I+1," of ",y.length]})]})}),(0,n.jsx)(x.aY,{className:"py-6",children:(0,n.jsx)("div",{className:"prose prose-gray max-w-none",children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:(s=y[I].question,i=Y.TU.parse(s),U().sanitize(i))}})})}),(0,n.jsxs)(x.eW,{className:"flex justify-between py-4 border-t",children:[(0,n.jsxs)(p.z,{variant:"outline",size:"sm",onClick:function(){I>0&&O(function(e){return e-1})},disabled:0===I,children:[(0,n.jsx)(G.Z,{className:"mr-1 h-4 w-4"}),"Previous"]}),(0,n.jsxs)(p.z,{variant:"outline",size:"sm",onClick:function(){I<y.length-1&&O(function(e){return e+1})},disabled:I===y.length-1,children:["Next",(0,n.jsx)($.Z,{className:"ml-1 h-4 w-4"})]})]})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Markdown Source"}),(0,n.jsx)(x.Zb,{children:(0,n.jsx)(x.aY,{className:"p-4",children:(0,n.jsx)("pre",{className:"bg-gray-50 p-4 rounded-md overflow-auto max-h-96 text-sm font-mono",children:R})})})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{items:[{label:"Companies",onClick:function(){return m.push("/companies?view=list")}},{label:"Test Not Found"}]}),(0,n.jsxs)("div",{className:"text-center py-12 border rounded-md bg-gray-50",children:[(0,n.jsx)("p",{className:"text-gray-500 mb-4",children:"Test not found"}),(0,n.jsx)(p.z,{variant:"outline",onClick:function(){return m.push("/companies?view=list")},children:"Back to Companies"})]})]})}function X(){var e=(0,i.a)(),t=e.user,s=e.loading,r=(0,a.useRouter)(),c=(0,a.useSearchParams)(),l=c.get("view")||"list",o=c.get("id"),d=c.get("companyId");return s?(0,n.jsx)("div",{children:"Loading..."}):t?(0,n.jsxs)(n.Fragment,{children:["list"===l&&(0,n.jsx)(k,{companyId:d}),"new"===l&&d&&(0,n.jsx)(M,{companyId:d,user:t}),"edit"===l&&o&&d&&(0,n.jsx)(M,{testId:o,companyId:d,user:t}),"detail"===l&&o&&(0,n.jsx)(K,{testId:o})]}):(r.push("/login"),null)}function W(){return(0,n.jsx)(c.Z,{children:(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(X,{})})})}},12144:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(57437);s(2265);var r=s(27648),a=s(14938);function i(e){var t=e.items;return(0,n.jsxs)("nav",{className:"flex items-center text-sm mb-6 bg-gray-50 p-3 rounded-md",children:[(0,n.jsxs)(r.default,{href:"/",className:"flex items-center text-gray-600 hover:text-blue-600",children:[(0,n.jsx)(a.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:"Home"})]}),t.map(function(e,s){return(0,n.jsx)("li",{children:s<t.length-1?(0,n.jsx)("button",{onClick:e.onClick,className:"hover:text-blue-600",children:e.label}):(0,n.jsx)("span",{className:"text-gray-500",children:e.label})},s)})]})}},93113:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(57437);s(2265);var r=s(12339),a=s(99376);function i(e){var t=e.children,s=(0,a.useRouter)(),i=(0,a.usePathname)();return(0,n.jsxs)("div",{className:"container mx-auto p-4 max-w-6xl",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Interview Management System"}),(0,n.jsx)(r.mQ,{defaultValue:(null==i?void 0:i.includes("/tests"))?"tests":(null==i?void 0:i.includes("/question-sets"))?"question-sets":"companies",className:"mb-8",onValueChange:function(e){switch(e){case"companies":s.push("/companies");break;case"tests":s.push("/tests");break;case"question-sets":s.push("/question-sets")}},children:(0,n.jsxs)(r.dr,{className:"grid w-full grid-cols-3 h-14 text-lg",children:[(0,n.jsx)(r.SP,{value:"companies",className:"py-3",children:"Companies"}),(0,n.jsx)(r.SP,{value:"tests",className:"py-3",children:"Tests"}),(0,n.jsx)(r.SP,{value:"question-sets",className:"py-3",children:"Question Sets"})]})}),(0,n.jsx)("main",{children:t})]})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return d},z:function(){return u}});var n=s(5194),r=s(46796),a=s(57437),i=s(2265),c=s(37053),l=s(90535),o=s(94508),d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef(function(e,t){var s=e.className,i=e.variant,l=e.size,u=e.asChild,m=(0,r._)(e,["className","variant","size","asChild"]),f=void 0!==u&&u?c.g7:"button";return(0,a.jsx)(f,(0,n._)({className:(0,o.cn)(d({variant:i,size:l,className:s})),ref:t},m))});u.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return u},Zb:function(){return l},aY:function(){return m},eW:function(){return f},ll:function(){return d}});var n=s(5194),r=s(46796),a=s(57437),i=s(2265),c=s(94508),l=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},i))});l.displayName="Card";var o=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",s)},i))});o.displayName="CardHeader";var d=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",s)},i))});d.displayName="CardTitle";var u=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("text-sm text-muted-foreground",s)},i))});u.displayName="CardDescription";var m=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("p-6 pt-0",s)},i))});m.displayName="CardContent";var f=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("flex items-center p-6 pt-0",s)},i))});f.displayName="CardFooter"},26110:function(e,t,s){"use strict";s.d(t,{$N:function(){return v},Be:function(){return g},Vq:function(){return u},cN:function(){return p},cZ:function(){return h},fK:function(){return x}});var n=s(5194),r=s(1780),a=s(46796),i=s(57437),c=s(2265),l=s(49027),o=s(32489),d=s(94508),u=l.fC;l.xz;var m=l.h_;l.x8;var f=c.forwardRef(function(e,t){var s=e.className,r=(0,a._)(e,["className"]);return(0,i.jsx)(l.aV,(0,n._)({ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},r))});f.displayName=l.aV.displayName;var h=c.forwardRef(function(e,t){var s=e.className,c=e.children,u=(0,a._)(e,["className","children"]);return(0,i.jsxs)(m,{children:[(0,i.jsx)(f,{}),(0,i.jsxs)(l.VY,(0,r._)((0,n._)({ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},u),{children:[c,(0,i.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(o.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});h.displayName=l.VY.displayName;var x=function(e){var t=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t)},s))};x.displayName="DialogHeader";var p=function(e){var t=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},s))};p.displayName="DialogFooter";var v=c.forwardRef(function(e,t){var s=e.className,r=(0,a._)(e,["className"]);return(0,i.jsx)(l.Dx,(0,n._)({ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",s)},r))});v.displayName=l.Dx.displayName;var g=c.forwardRef(function(e,t){var s=e.className,r=(0,a._)(e,["className"]);return(0,i.jsx)(l.dk,(0,n._)({ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s)},r))});g.displayName=l.dk.displayName},95186:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var n=s(5194),r=s(46796),a=s(57437),i=s(2265),c=s(94508),l=i.forwardRef(function(e,t){var s=e.className,i=e.type,l=(0,r._)(e,["className","type"]);return(0,a.jsx)("input",(0,n._)({type:i,className:(0,c.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t},l))});l.displayName="Input"},26815:function(e,t,s){"use strict";s.d(t,{_:function(){return u}});var n=s(5194),r=s(46796),a=s(57437),i=s(2265),c=s(6394),l=s(90535),o=s(94508),d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(c.f,(0,n._)({ref:t,className:(0,o.cn)(d(),s)},i))});u.displayName=c.f.displayName},53647:function(e,t,s){"use strict";s.d(t,{Bw:function(){return g},Ph:function(){return f},Ql:function(){return j},i4:function(){return x},ki:function(){return h}});var n=s(5194),r=s(1780),a=s(46796),i=s(57437),c=s(2265),l=s(1913),o=s(40875),d=s(22135),u=s(30401),m=s(94508),f=l.fC;l.ZA;var h=l.B4,x=c.forwardRef(function(e,t){var s=e.className,c=e.children,d=(0,a._)(e,["className","children"]);return(0,i.jsxs)(l.xz,(0,r._)((0,n._)({ref:t,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s)},d),{children:[c,(0,i.jsx)(l.JO,{asChild:!0,children:(0,i.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]}))});x.displayName=l.xz.displayName;var p=c.forwardRef(function(e,t){var s=e.className,c=(0,a._)(e,["className"]);return(0,i.jsx)(l.u_,(0,r._)((0,n._)({ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",s)},c),{children:(0,i.jsx)(d.Z,{className:"h-4 w-4"})}))});p.displayName=l.u_.displayName;var v=c.forwardRef(function(e,t){var s=e.className,c=(0,a._)(e,["className"]);return(0,i.jsx)(l.$G,(0,r._)((0,n._)({ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",s)},c),{children:(0,i.jsx)(o.Z,{className:"h-4 w-4"})}))});v.displayName=l.$G.displayName;var g=c.forwardRef(function(e,t){var s=e.className,c=e.children,o=e.position,d=void 0===o?"popper":o,u=(0,a._)(e,["className","children","position"]);return(0,i.jsx)(l.h_,{children:(0,i.jsxs)(l.VY,(0,r._)((0,n._)({ref:t,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:d},u),{children:[(0,i.jsx)(p,{}),(0,i.jsx)(l.l_,{className:(0,m.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:c}),(0,i.jsx)(v,{})]}))})});g.displayName=l.VY.displayName,c.forwardRef(function(e,t){var s=e.className,r=(0,a._)(e,["className"]);return(0,i.jsx)(l.__,(0,n._)({ref:t,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s)},r))}).displayName=l.__.displayName;var j=c.forwardRef(function(e,t){var s=e.className,c=e.children,o=(0,a._)(e,["className","children"]);return(0,i.jsxs)(l.ck,(0,r._)((0,n._)({ref:t,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},o),{children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(l.wU,{children:(0,i.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(l.eT,{children:c})]}))});j.displayName=l.ck.displayName,c.forwardRef(function(e,t){var s=e.className,r=(0,a._)(e,["className"]);return(0,i.jsx)(l.Z0,(0,n._)({ref:t,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",s)},r))}).displayName=l.Z0.displayName},73578:function(e,t,s){"use strict";s.d(t,{RM:function(){return d},SC:function(){return u},iA:function(){return l},pj:function(){return f},ss:function(){return m},xD:function(){return o}});var n=s(5194),r=s(46796),a=s(57437),i=s(2265),c=s(94508),l=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",(0,n._)({ref:t,className:(0,c.cn)("w-full caption-bottom text-sm",s)},i))})});l.displayName="Table";var o=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("thead",(0,n._)({ref:t,className:(0,c.cn)("[&_tr]:border-b",s)},i))});o.displayName="TableHeader";var d=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("tbody",(0,n._)({ref:t,className:(0,c.cn)("[&_tr:last-child]:border-0",s)},i))});d.displayName="TableBody",i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("tfoot",(0,n._)({ref:t,className:(0,c.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s)},i))}).displayName="TableFooter";var u=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("tr",(0,n._)({ref:t,className:(0,c.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s)},i))});u.displayName="TableRow";var m=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("th",(0,n._)({ref:t,className:(0,c.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s)},i))});m.displayName="TableHead";var f=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("td",(0,n._)({ref:t,className:(0,c.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s)},i))});f.displayName="TableCell",i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("caption",(0,n._)({ref:t,className:(0,c.cn)("mt-4 text-sm text-muted-foreground",s)},i))}).displayName="TableCaption"},12339:function(e,t,s){"use strict";s.d(t,{SP:function(){return u},dr:function(){return d},mQ:function(){return o},nU:function(){return m}});var n=s(5194),r=s(46796),a=s(57437),i=s(2265),c=s(20271),l=s(94508),o=c.fC,d=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(c.aV,(0,n._)({ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s)},i))});d.displayName=c.aV.displayName;var u=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(c.xz,(0,n._)({ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s)},i))});u.displayName=c.xz.displayName;var m=i.forwardRef(function(e,t){var s=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(c.VY,(0,n._)({ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s)},i))});m.displayName=c.VY.displayName},46281:function(e,t,s){"use strict";s.d(t,{H:function(){return l},V:function(){return c}});var n=s(50059),r=s(57437),a=s(2265),i=s(280),c=(0,a.createContext)(null);function l(e){var t=e.children,s=(0,n._)((0,a.useState)(null),2),l=s[0],o=s[1],d=(0,n._)((0,a.useState)(!0),2),u=d[0],m=d[1];return(0,a.useEffect)(function(){i.OQ.auth.getSession().then(function(e){var t,s=e.data.session;o(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),m(!1)});var e=i.OQ.auth.onAuthStateChange(function(e,t){var s;o(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)}).data.subscription;return function(){return e.unsubscribe()}},[]),(0,r.jsx)(c.Provider,{value:{user:l,loading:u},children:t})}},76362:function(e,t,s){"use strict";s.d(t,{a:function(){return a}});var n=s(2265),r=s(46281),a=function(){var e=(0,n.useContext)(r.V);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},280:function(e,t,s){"use strict";s.d(t,{OQ:function(){return n}});var n=(0,s(93777).eI)("https://xwrjwvspbayowtwbrbcd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3cmp3dnNwYmF5b3d0d2JyYmNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEzNDQ4OTksImV4cCI6MjA1NjkyMDg5OX0.mrgp3CeKu8eeoC0tRN_y-XpFgklVltYBqQYjY4HSIhQ")},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var n=s(61994),r=s(53335);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,n.W)(t))}}},function(e){e.O(0,[518,457,61,513,438,8,648,960,74,411,606,971,117,744],function(){return e(e.s=57837)}),_N_E=e.O()}]);