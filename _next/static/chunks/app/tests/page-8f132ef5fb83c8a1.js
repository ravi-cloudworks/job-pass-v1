(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{57837:function(e,s,t){Promise.resolve().then(t.bind(t,96696))},96696:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return R}});var a=t(57437),n=t(2265),r=t(99376),i=t(93113),l=t(2403),c=t(5194),o=t(1780),d=t(50059),u=t(85735),m=t(5853),x=t(280),h=t(66070),p=t(62869),f=t(73578),j=t(95186),v=t(26937),g=t(73247),y=t(90740),N=t(48736),b=t(91723),w=t(15868),_=t(14438),C=t(32832),S=t(4506);function k(e){var s,t=e.companyId,i=(0,r.useRouter)(),k=(0,d._)((0,n.useState)([]),2),q=k[0],I=k[1],E=(0,d._)((0,n.useState)(!0),2),O=E[0],T=E[1],Z=(0,d._)((0,n.useState)(""),2),A=Z[0],z=Z[1],L=(0,d._)((0,n.useState)(null),2),Q=L[0],M=L[1],P=(0,d._)((0,n.useState)(null),2),F=P[0],G=P[1],D=(0,d._)((0,n.useState)([]),2),U=D[0],B=D[1];(0,n.useEffect)(function(){function e(){return(e=(0,l._)(function(){var e,s,a,n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:T(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),e=x.OQ.from("tests").select("\n            *,\n            companies:company_id (\n              name\n            )\n          ").order("created_at",{ascending:!1}),t&&(e=e.eq("company_id",t)),[4,e];case 2:if(a=(s=i.sent()).data,n=s.error)throw n;return I(r=a.map(function(e){var s;return(0,o._)((0,c._)({},e),{company_name:(null===(s=e.companies)||void 0===s?void 0:s.name)||"Unknown"})})),B((0,u._)(new Set(r.map(function(e){return e.category}))).filter(Boolean).sort()),[3,5];case 3:return console.error("Error fetching tests:",i.sent()),_.Am.error("Failed to load tests"),[3,5];case 4:return T(!1),[7];case 5:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]);var R=function(e){switch(e){case"Easy":default:return"⭐";case"Medium":return"⭐⭐";case"Advanced":return"⭐⭐⭐"}},J=q.filter(function(e){var s=e.title.toLowerCase().includes(A.toLowerCase())||e.company_name.toLowerCase().includes(A.toLowerCase()),t=!Q||e.complexity===Q,a=!F||e.category===F;return s&&t&&a}),V=(s=(0,l._)(function(e){var s,t,a,n,r,i,l,c,o;return(0,m.Jh)(this,function(d){switch(d.label){case 0:if(!confirm("Are you sure you want to delete this test?"))return[2];d.label=1;case 1:return d.trys.push([1,11,,12]),[4,x.OQ.from("tests").delete().eq("id",e)];case 2:if(s=d.sent().error)throw s;return[4,x.OQ.storage.from("test-content").remove(["".concat(e,".json")])];case 3:(t=d.sent().error)&&console.error("Error deleting test content file:",t),d.label=4;case 4:if(d.trys.push([4,9,,10]),!(a=q.find(function(s){return s.id===e})))return[3,8];return n="chatbot-flow-".concat(a.company_id,".json"),[4,x.OQ.storage.from("test-flows").download(n)];case 5:if(i=(r=d.sent()).data,!(!r.error&&i))return[3,8];return[4,i.text()];case 6:if(l=JSON.parse(d.sent()),c=!1,l.nodes&&Object.keys(l.nodes).forEach(function(s){var t=l.nodes[s];t.questionSetId&&t.questionSetId.standard&&["easy","medium","Advanced"].forEach(function(s){if(Array.isArray(t.questionSetId.standard[s])){var a=t.questionSetId.standard[s].indexOf(e);-1!==a&&(t.questionSetId.standard[s].splice(a,1),c=!0)}})}),!c)return[3,8];return l.metadata.lastUpdated=new Date().toISOString(),[4,x.OQ.storage.from("test-flows").upload(n,new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),{upsert:!0})];case 7:(o=d.sent().error)&&console.error("Error updating flow after test deletion:",o),d.label=8;case 8:return[3,10];case 9:return console.error("Error updating flow references:",d.sent()),[3,10];case 10:return I(q.filter(function(s){return s.id!==e})),_.Am.success("Test deleted successfully"),[3,12];case 11:return console.error("Error deleting test:",d.sent()),_.Am.error("Failed to delete test"),[3,12];case 12:return[2]}})}),function(e){return s.apply(this,arguments)});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{items:[{label:"Companies",href:(0,S.G)("/companies?view=list")}].concat((0,u._)(t?[{label:"Company Tests"}]:[{label:"All Tests"}]))}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:t?"Company Tests":"All Tests"}),t&&(0,a.jsxs)(p.z,{onClick:function(){return i.push((0,S.G)("/tests?view=new&companyId=".concat(t)))},className:"text-base",children:[(0,a.jsx)(v.Z,{className:"mr-2 h-5 w-5"}),"Create New Test"]})]}),(0,a.jsxs)(h.Zb,{children:[(0,a.jsx)(h.Ol,{className:"pb-2",children:(0,a.jsx)(h.ll,{className:"text-xl",children:"Tests"})}),(0,a.jsxs)(h.aY,{children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-4 mb-4 md:flex-row md:space-y-0 md:space-x-4 md:items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(g.Z,{className:"absolute left-2.5 top-3 h-4 w-4 text-gray-500"}),(0,a.jsx)(j.I,{type:"search",placeholder:"Search tests...",className:"pl-8 text-base h-10",value:A,onChange:function(e){return z(e.target.value)}})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Complexity:"}),(0,a.jsx)("div",{className:"flex space-x-1",children:["Easy","Medium","Advanced"].map(function(e){return(0,a.jsxs)(p.z,{variant:Q===e?"default":"outline",size:"sm",onClick:function(){Q===e?M(null):M(e)},className:"text-xs h-8",children:[R(e)," ",e]},e)})})]}),U.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Category:"}),(0,a.jsxs)("select",{className:"text-sm p-1 border rounded",value:F||"",onChange:function(e){return G(e.target.value||null)},children:[(0,a.jsx)("option",{value:"",children:"All"}),U.map(function(e){return(0,a.jsx)("option",{value:e,children:e},e)})]})]})]}),O?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-primary"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading tests..."})]}):0===J.length?(0,a.jsxs)("div",{className:"text-center py-12 border rounded-md bg-gray-50",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:0===q.length?"No tests found":"No tests match your search criteria"}),t&&(0,a.jsx)(p.z,{onClick:function(){return i.push((0,S.G)("/tests?view=new&companyId=".concat(t)))},children:"Create your first test"})]}):(0,a.jsxs)(f.iA,{children:[(0,a.jsx)(f.xD,{children:(0,a.jsxs)(f.SC,{children:[(0,a.jsx)(f.ss,{className:"w-[40%] text-base",children:"Test Title"}),!t&&(0,a.jsx)(f.ss,{className:"text-base",children:"Company"}),(0,a.jsx)(f.ss,{className:"text-base",children:"Complexity"}),(0,a.jsx)(f.ss,{className:"text-base",children:"Category"}),(0,a.jsx)(f.ss,{className:"text-base",children:"Time"}),(0,a.jsx)(f.ss,{className:"text-base",children:"Created"}),(0,a.jsx)(f.ss,{className:"text-base text-right",children:"Actions"})]})}),(0,a.jsx)(f.RM,{children:J.map(function(e){var s;return(0,a.jsxs)(f.SC,{className:"cursor-pointer hover:bg-gray-50",onClick:function(){return i.push((0,S.G)("/tests?view=detail&id=".concat(e.id,"&companyId=").concat(e.company_id)))},children:[(0,a.jsx)(f.pj,{className:"font-medium text-base",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5 mr-2 text-gray-500"}),e.title]})}),!t&&(0,a.jsx)(f.pj,{className:"text-base",children:e.company_name}),(0,a.jsx)(f.pj,{className:"text-base",children:(0,a.jsx)("span",{title:e.complexity,children:R(e.complexity)})}),(0,a.jsx)(f.pj,{className:"text-base",children:e.category}),(0,a.jsx)(f.pj,{className:"text-base",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-1 text-gray-500"}),(s=e.time_limit,"".concat(Math.floor(s/60)," min"))]})}),(0,a.jsx)(f.pj,{className:"text-base",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsxs)(f.pj,{className:"text-right",children:[(0,a.jsxs)(p.z,{variant:"ghost",size:"sm",onClick:function(s){s.stopPropagation(),i.push((0,S.G)("/tests?view=edit&id=".concat(e.id,"&companyId=").concat(e.company_id)))},children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,a.jsxs)(p.z,{variant:"ghost",size:"sm",onClick:function(s){s.stopPropagation(),V(e.id)},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]},e.id)})})]})]})]})]})}var q=t(26815),I=t(12339),E=t(53647),O=t(76818),T=t(32759),Z=t(51817),A=t(32660),z=t(83229),L=["Absolute Beginners","Web Development","Frameworks","Languages Platforms","Devops","Mobile Development","Databases","Computer Science","Machine Learning","Management","Game Development","Design","Block Chain","Cyber Security"];function Q(e){var s,t,i=e.testId,c=e.companyId,o=(0,r.useRouter)(),u=!!i,f=(0,d._)((0,n.useState)(null),2),v=f[0],g=f[1],y=(0,d._)((0,n.useState)(""),2),N=y[0],b=y[1],w=(0,d._)((0,n.useState)(""),2),k=w[0],Q=w[1],M=(0,d._)((0,n.useState)(900),2),P=M[0],F=M[1],G=(0,d._)((0,n.useState)("Medium"),2),D=G[0],U=G[1],B=(0,d._)((0,n.useState)(""),2),R=B[0],J=B[1],V=(0,d._)((0,n.useState)(""),2),W=V[0],Y=V[1],H=(0,d._)((0,n.useState)(!0),2),$=H[0],X=H[1],K=(0,d._)((0,n.useState)(!1),2),ee=K[0],es=K[1],et=(0,d._)((0,n.useState)("settings"),2),ea=et[0],en=et[1],er=(0,d._)((0,n.useState)([]),2),ei=er[0],el=er[1],ec=(0,d._)((0,n.useState)(!1),2),eo=ec[0],ed=ec[1],eu=(0,d._)((0,n.useState)(0),2),em=eu[0],ex=eu[1];(0,n.useEffect)(function(){function e(){return(e=(0,l._)(function(){var e,s,t,a,n,r,l,o,d,h,p,f;return(0,m.Jh)(this,function(m){switch(m.label){case 0:X(!0),m.label=1;case 1:return m.trys.push([1,12,13,14]),[4,x.OQ.from("companies").select("id, name").eq("id",c).single()];case 2:if(s=(e=m.sent()).data,t=e.error)throw t;if(g(s),!(u&&i))return[3,10];return[4,x.OQ.from("tests").select("*").eq("id",i).single()];case 3:if(n=(a=m.sent()).data,r=a.error)throw r;return b(n.id),Q(n.title),F(n.time_limit),U(n.complexity),J(n.category),[4,x.OQ.storage.from("test-content").download("".concat(n.id,".json"))];case 4:if(o=(l=m.sent()).data,!(d=l.error))return[3,7];return console.error("Error loading test content:",d),[4,x.OQ.storage.from("test-content").download("".concat(n.id,".md"))];case 5:if(p=(h=m.sent()).data,f=h.error)throw f;return[4,p.text()];case 6:return Y(m.sent()),[3,9];case 7:return[4,o.text()];case 8:Y(JSON.parse(m.sent()).questions.map(function(e){return e.question}).join("\n\n---\n\n")),m.label=9;case 9:return[3,11];case 10:b("TEST-".concat(Math.random().toString(36).substring(2,8).toUpperCase())),L.length>0&&J(L[0]),m.label=11;case 11:return[3,14];case 12:return console.error("Error loading data:",m.sent()),_.Am.error("Failed to load test data"),[3,14];case 13:return X(!1),[7];case 14:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,i,u]);var eh=(s=(0,l._)(function(e){var s,t;return(0,m.Jh)(this,function(a){ed(!0),ex(0),s=[];try{e.length>5e3&&s.push({type:"character_limit",message:"Content exceeds maximum ".concat(5e3," characters (").concat(e.length," chars)")}),ex(30),(t=e.split("---").filter(function(e){return e.trim().length>0})).length>30&&s.push({type:"question_limit",message:"Too many questions: ".concat(t.length,"/").concat(30," maximum")}),0===t.length&&s.push({type:"empty_content",message:"No questions found. Use --- to separate questions."}),ex(100)}catch(e){s.push({type:"validation_error",message:"Error validating content"})}finally{ed(!1)}return el(s),[2,s]})}),function(e){return s.apply(this,arguments)}),ep=(t=(0,l._)(function(){var e,s,t,a,n,r,l,d,h,p,f,j,g,y,b,w;return(0,m.Jh)(this,function(m){switch(m.label){case 0:if(!k.trim())return _.Am.error("Please enter a test title"),[2];return[4,eh(W)];case 1:if((e=m.sent()).length>0)return en("questions"),_.Am.error("Please fix ".concat(e.length," errors before saving")),[2];es(!0),m.label=2;case 2:if(m.trys.push([2,16,17,18]),s={id:N,title:k,time_limit:P,complexity:D,category:R,company_id:c},t=W.split("---").map(function(e){return e.trim()}).filter(Boolean).map(function(e,s){return{id:"q".concat(s+1),question:e}}),a={id:N,title:"# ".concat(k),time_limit:P,questions:t},!u)return[3,4];return[4,x.OQ.from("tests").update(s).eq("id",i)];case 3:if(n=m.sent().error)throw n;return[3,6];case 4:return[4,x.OQ.from("tests").insert([s])];case 5:if(r=m.sent().error)throw r;m.label=6;case 6:return[4,x.OQ.storage.from("test-content").upload("".concat(N,".json"),new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),{upsert:!0})];case 7:if(l=m.sent().error)throw l;m.label=8;case 8:return m.trys.push([8,14,,15]),d="chatbot-flow-".concat(c,".json"),[4,x.OQ.storage.from("test-flows").download(d)];case 9:if(p=(h=m.sent()).data,!h.error)return[3,10];return f={metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),company:(null==v?void 0:v.name)||"Unknown",description:"".concat((null==v?void 0:v.name)||"Company"," interview questions")},nodes:{root:{question:"Which area are you interested in exploring?",options:[]}},options:{}},[3,12];case 10:return[4,null==p?void 0:p.text()];case 11:j=m.sent()||"{}";try{f=JSON.parse(j)}catch(e){f={metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),company:(null==v?void 0:v.name)||"Unknown",description:"".concat((null==v?void 0:v.name)||"Company"," interview questions")},nodes:{root:{question:"Which area are you interested in exploring?",options:[]}},options:{}}}m.label=12;case 12:return g=R.toLowerCase().replace(/\s+/g,"_"),f.nodes.root.options.includes(g)||(f.nodes.root.options.push(g),f.options[g]={text:R},f.nodes[g]={text:R,question:"Choose a ".concat(R," topic to focus on:"),options:[],isEndpoint:!0,questionSetId:{standard:{easy:[],medium:[],Advanced:[]}}}),y=D.toLowerCase(),f.nodes[g].questionSetId||(f.nodes[g].questionSetId={standard:{easy:[],medium:[],Advanced:[]}}),f.nodes[g].questionSetId.standard||(f.nodes[g].questionSetId.standard={easy:[],medium:[],Advanced:[]}),b="Advanced"===D?"Advanced":y,Array.isArray(f.nodes[g].questionSetId.standard[b])?f.nodes[g].questionSetId.standard[b].includes(N)||f.nodes[g].questionSetId.standard[b].push(N):f.nodes[g].questionSetId.standard[b]=[N],f.metadata.lastUpdated=new Date().toISOString(),[4,x.OQ.storage.from("test-flows").upload(d,new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),{upsert:!0})];case 13:return(w=m.sent().error)&&console.error("Error saving flow:",w),[3,15];case 14:return console.error("Error updating flow:",m.sent()),[3,15];case 15:return _.Am.success(u?"Test updated successfully":"Test created successfully"),o.push((0,S.G)("/companies?view=detail&id=".concat(c))),[3,18];case 16:return console.error("Error saving test:",m.sent()),_.Am.error(u?"Failed to update test":"Failed to create test"),[3,18];case 17:return es(!1),[7];case 18:return[2]}})}),function(){return t.apply(this,arguments)}),ef=function(){return W.split("---").filter(function(e){return e.trim()}).length};return $?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{items:[{label:"Companies",href:(0,S.G)("/companies?view=list")},{label:"Loading..."}]}),(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)(Z.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("span",{className:"ml-2 text-lg",children:"Loading..."})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{items:[{label:"Companies",href:(0,S.G)("/companies?view=list")},{label:(null==v?void 0:v.name)||"",href:(0,S.G)("/companies?view=detail&id=".concat(c))},{label:u?"Edit Test":"Create Test"}]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:u?"Edit Test":"Create New Test"}),(0,a.jsx)("p",{className:"text-gray-500",children:u?"Update test details and questions":"Define the test settings and add questions"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsx)(h.Zb,{children:(0,a.jsx)(h.aY,{className:"pt-6",children:(0,a.jsxs)(I.mQ,{defaultValue:"settings",value:ea,onValueChange:en,children:[(0,a.jsxs)(I.dr,{className:"grid w-full grid-cols-2 mb-6",children:[(0,a.jsx)(I.SP,{value:"settings",className:"text-base py-3",children:"Test Information"}),(0,a.jsx)(I.SP,{value:"questions",className:"text-base py-3",children:"Questions"})]}),(0,a.jsxs)(I.nU,{value:"settings",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"test-id",className:"text-sm font-medium",children:"Test ID"}),(0,a.jsx)(j.I,{id:"test-id",placeholder:"TEST-001",value:N,onChange:function(e){return b(e.target.value)},disabled:u,className:"h-10 text-base"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"title",className:"text-sm font-medium",children:"Title (max 30 chars)"}),(0,a.jsx)(j.I,{id:"title",placeholder:"Frontend Development Basics",value:k,onChange:function(e){e.target.value.length<=30&&Q(e.target.value)},maxLength:30,className:"h-10 text-base"}),(0,a.jsxs)("div",{className:"text-xs text-right text-muted-foreground",children:[k.length,"/30"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"complexity",className:"text-sm font-medium",children:"Complexity"}),(0,a.jsxs)(E.Ph,{value:D,onValueChange:U,children:[(0,a.jsx)(E.i4,{className:"h-10 text-base",children:(0,a.jsx)(E.ki,{placeholder:"Select complexity"})}),(0,a.jsxs)(E.Bw,{children:[(0,a.jsx)(E.Ql,{value:"Easy",children:"Easy"}),(0,a.jsx)(E.Ql,{value:"Medium",children:"Medium"}),(0,a.jsx)(E.Ql,{value:"Advanced",children:"Advanced"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"category",className:"text-sm font-medium",children:"Category"}),(0,a.jsxs)(E.Ph,{value:R,onValueChange:J,children:[(0,a.jsx)(E.i4,{className:"h-10 text-base",children:(0,a.jsx)(E.ki,{placeholder:"Select category"})}),(0,a.jsx)(E.Bw,{children:L.map(function(e){return(0,a.jsx)(E.Ql,{value:e,children:e},e)})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{className:"text-sm font-medium",children:"Time Limit"}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(p.z,{type:"button",variant:900===P?"default":"outline",className:"flex-1 h-10 text-base",onClick:function(){return F(900)},children:"15 Minutes"}),(0,a.jsx)(p.z,{type:"button",variant:1800===P?"default":"outline",className:"flex-1 h-10 text-base",onClick:function(){return F(1800)},children:"30 Minutes"}),(0,a.jsx)(p.z,{type:"button",variant:2700===P?"default":"outline",className:"flex-1 h-10 text-base",onClick:function(){return F(2700)},children:"45 Minutes"})]})]})]}),(0,a.jsxs)(I.nU,{value:"questions",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:W.length>5e3?"text-red-500 font-medium":"text-muted-foreground",children:[W.length,"/",5e3," chars"]}),(0,a.jsxs)("div",{className:ef()>30?"text-red-500 font-medium":"text-muted-foreground",children:[ef(),"/",30," questions"]})]}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){Y('# Basic Concept\nExplain what is X and how it differs from Y.\n\n---\n\n# Code Analysis\nLook at this code snippet:\n\n```javascript\nfunction example() {\n  console.log("Hello world");\n}\n```\n\nWhat does this code do and how would you improve it?\n\n---\n\n# Implementation Challenge\nWrite a function that does Z with these requirements:\n1. Must handle edge cases\n2. Should be efficient\n\nExplain your approach.')},children:"Insert Example"})]}),(0,a.jsx)(O.g,{value:W,onChange:function(e){(e.target.value.length<=5e3||e.target.value.length<W.length)&&Y(e.target.value)},placeholder:"Enter your questions here. Use --- to separate questions.",className:"min-h-[400px] font-mono text-sm"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:"Use markdown to format your questions:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("code",{children:"# Heading"})," - Main heading"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("code",{children:"**bold**"})," - ",(0,a.jsx)("strong",{children:"Bold text"})]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("code",{children:"```code```"})," - Code blocks"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("code",{children:"---"})," - Question separator"]})]})]}),ei.length>0&&(0,a.jsxs)("div",{className:"p-4 border border-red-200 bg-red-50 rounded-md",children:[(0,a.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"Please fix the following issues:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700",children:ei.map(function(e,s){return(0,a.jsx)("li",{children:e.message},s)})})]}),eo&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Validating content..."}),(0,a.jsxs)("span",{children:[em,"%"]})]}),(0,a.jsx)(T.E,{value:em,className:"h-1"})]})]})]})})}),(0,a.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,a.jsxs)(p.z,{variant:"outline",onClick:function(){return o.push((0,S.G)("/companies?view=detail&id=".concat(c)))},className:"h-12 px-6 text-base",children:[(0,a.jsx)(A.Z,{className:"mr-2 h-5 w-5"}),"Back"]}),(0,a.jsx)(p.z,{onClick:ep,disabled:ee||!k||0===W.length,className:"h-12 px-8 text-base",children:ee?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"mr-2 h-5 w-5 animate-spin"}),u?"Updating...":"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.Z,{className:"mr-2 h-5 w-5"}),u?"Update Test":"Create Test"]})})]})]})]})}var M=t(57970),P=t(11411),F=t.n(P),G=t(92451),D=t(10407);function U(e){var s,t,i,u=e.testId,f=(0,r.useRouter)(),j=(0,d._)((0,n.useState)(null),2),v=j[0],g=j[1],y=(0,d._)((0,n.useState)([]),2),N=y[0],k=y[1],q=(0,d._)((0,n.useState)(0),2),I=q[0],E=q[1],O=(0,d._)((0,n.useState)(!0),2),T=O[0],Z=O[1],z=(0,d._)((0,n.useState)(""),2),L=z[0];return(z[1],(0,n.useEffect)(function(){function e(){return(e=(0,l._)(function(){var e,s,t,a,n,r,i;return(0,m.Jh)(this,function(l){switch(l.label){case 0:Z(!0),l.label=1;case 1:return l.trys.push([1,5,6,7]),[4,x.OQ.from("tests").select("\n            *,\n            companies:company_id (\n              name\n            )\n          ").eq("id",u).single()];case 2:if(t=(s=l.sent()).data,a=s.error)throw a;return g((0,o._)((0,c._)({},t),{company_name:(null===(e=t.companies)||void 0===e?void 0:e.name)||"Unknown"})),[4,x.OQ.storage.from("test-content").download("".concat(u,".json"))];case 3:if(r=(n=l.sent()).data,i=n.error)throw i;return[4,r.text()];case 4:return k(JSON.parse(l.sent()).questions||[]),[3,7];case 5:return console.error("Error fetching test:",l.sent()),_.Am.error("Failed to load test details"),[3,7];case 6:return Z(!1),[7];case 7:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[u]),T)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{items:[{label:"Companies",href:(0,S.G)("/companies?view=list")},{label:"Loading..."}]}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-primary"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading test details..."})]})]}):v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{items:[{label:"Companies",href:(0,S.G)("/companies?view=list")},{label:v.company_name,href:(0,S.G)("/companies?view=detail&id=".concat(v.company_id))},{label:v.title}]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-1",children:v.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-1",children:function(e){switch(e){case"Easy":default:return"⭐";case"Medium":return"⭐⭐";case"Advanced":return"⭐⭐⭐"}}(v.complexity)}),(0,a.jsx)("span",{children:v.complexity})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{children:(s=v.time_limit,"".concat(Math.floor(s/60),":").concat((s%60).toString().padStart(2,"0")))})]}),(0,a.jsx)("div",{children:v.category})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)(p.z,{variant:"outline",onClick:function(){return f.push((0,S.G)("/companies?view=detail&id=".concat(v.company_id)))},children:[(0,a.jsx)(A.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,a.jsxs)(p.z,{onClick:function(){return f.push((0,S.G)("/tests?view=edit&id=".concat(u,"&companyId=").concat(v.company_id)))},children:[(0,a.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"Edit Test"]})]})]}),0===N.length?(0,a.jsx)(h.Zb,{children:(0,a.jsx)(h.aY,{className:"py-12 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No questions found in this test"})})}):(0,a.jsxs)(h.Zb,{className:"mb-6",children:[(0,a.jsx)(h.Ol,{className:"pb-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h.ll,{className:"text-xl",children:"Question Preview"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Question ",I+1," of ",N.length]})]})}),(0,a.jsx)(h.aY,{className:"py-6",children:(0,a.jsx)("div",{className:"prose prose-gray max-w-none",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:(t=N[I].question,i=M.TU.parse(t),F().sanitize(i))}})})}),(0,a.jsxs)(h.eW,{className:"flex justify-between py-4 border-t",children:[(0,a.jsxs)(p.z,{variant:"outline",size:"sm",onClick:function(){I>0&&E(function(e){return e-1})},disabled:0===I,children:[(0,a.jsx)(G.Z,{className:"mr-1 h-4 w-4"}),"Previous"]}),(0,a.jsxs)(p.z,{variant:"outline",size:"sm",onClick:function(){I<N.length-1&&E(function(e){return e+1})},disabled:I===N.length-1,children:["Next",(0,a.jsx)(D.Z,{className:"ml-1 h-4 w-4"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Markdown Source"}),(0,a.jsx)(h.Zb,{children:(0,a.jsx)(h.aY,{className:"p-4",children:(0,a.jsx)("pre",{className:"bg-gray-50 p-4 rounded-md overflow-auto max-h-96 text-sm font-mono",children:L})})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{items:[{label:"Companies",href:(0,S.G)("/companies?view=list")},{label:"Test Not Found"}]}),(0,a.jsxs)("div",{className:"text-center py-12 border rounded-md bg-gray-50",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Test not found"}),(0,a.jsx)(p.z,{variant:"outline",onClick:function(){return f.push((0,S.G)("/companies?view=list"))},children:"Back to Companies"})]})]})}function B(){var e=(0,r.useSearchParams)(),s=e.get("view")||"list",t=e.get("id"),n=e.get("companyId");return(0,a.jsxs)(a.Fragment,{children:["list"===s&&(0,a.jsx)(k,{companyId:n}),"new"===s&&n&&(0,a.jsx)(Q,{companyId:n}),"edit"===s&&t&&n&&(0,a.jsx)(Q,{testId:t,companyId:n}),"detail"===s&&t&&(0,a.jsx)(U,{testId:t})]})}function R(){return(0,a.jsx)(i.Z,{children:(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"p-4 text-center",children:"Loading..."}),children:(0,a.jsx)(B,{})})})}},32759:function(e,s,t){"use strict";t.d(s,{E:function(){return d}});var a=t(5194),n=t(1780),r=t(46796),i=t(57437),l=t(2265),c=t(60610),o=t(94508),d=l.forwardRef(function(e,s){var t=e.className,l=e.value,d=(0,r._)(e,["className","value"]);return(0,i.jsx)(c.fC,(0,n._)((0,a._)({ref:s,className:(0,o.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t)},d),{children:(0,i.jsx)(c.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})}))});d.displayName=c.fC.displayName},53647:function(e,s,t){"use strict";t.d(s,{Bw:function(){return v},Ph:function(){return x},Ql:function(){return g},i4:function(){return p},ki:function(){return h}});var a=t(5194),n=t(1780),r=t(46796),i=t(57437),l=t(2265),c=t(1913),o=t(40875),d=t(22135),u=t(30401),m=t(94508),x=c.fC;c.ZA;var h=c.B4,p=l.forwardRef(function(e,s){var t=e.className,l=e.children,d=(0,r._)(e,["className","children"]);return(0,i.jsxs)(c.xz,(0,n._)((0,a._)({ref:s,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t)},d),{children:[l,(0,i.jsx)(c.JO,{asChild:!0,children:(0,i.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]}))});p.displayName=c.xz.displayName;var f=l.forwardRef(function(e,s){var t=e.className,l=(0,r._)(e,["className"]);return(0,i.jsx)(c.u_,(0,n._)((0,a._)({ref:s,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",t)},l),{children:(0,i.jsx)(d.Z,{className:"h-4 w-4"})}))});f.displayName=c.u_.displayName;var j=l.forwardRef(function(e,s){var t=e.className,l=(0,r._)(e,["className"]);return(0,i.jsx)(c.$G,(0,n._)((0,a._)({ref:s,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",t)},l),{children:(0,i.jsx)(o.Z,{className:"h-4 w-4"})}))});j.displayName=c.$G.displayName;var v=l.forwardRef(function(e,s){var t=e.className,l=e.children,o=e.position,d=void 0===o?"popper":o,u=(0,r._)(e,["className","children","position"]);return(0,i.jsx)(c.h_,{children:(0,i.jsxs)(c.VY,(0,n._)((0,a._)({ref:s,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:d},u),{children:[(0,i.jsx)(f,{}),(0,i.jsx)(c.l_,{className:(0,m.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,i.jsx)(j,{})]}))})});v.displayName=c.VY.displayName,l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(c.__,(0,a._)({ref:s,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t)},n))}).displayName=c.__.displayName;var g=l.forwardRef(function(e,s){var t=e.className,l=e.children,o=(0,r._)(e,["className","children"]);return(0,i.jsxs)(c.ck,(0,n._)((0,a._)({ref:s,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},o),{children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(c.wU,{children:(0,i.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(c.eT,{children:l})]}))});g.displayName=c.ck.displayName,l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(c.Z0,(0,a._)({ref:s,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",t)},n))}).displayName=c.Z0.displayName},76818:function(e,s,t){"use strict";t.d(s,{g:function(){return c}});var a=t(5194),n=t(46796),r=t(57437),i=t(2265),l=t(94508),c=i.forwardRef(function(e,s){var t=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)("textarea",(0,a._)({className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s},i))});c.displayName="Textarea"},60610:function(e,s,t){"use strict";t.d(s,{fC:function(){return C},z$:function(){return S}});var a=t(5194),n=t(1780),r=t(46796),i=t(50059),l=t(2265),c=t(73966),o=t(66840),d=t(57437),u="Progress",m=(0,i._)((0,c.b)(u),2),x=m[0];m[1];var h=(0,i._)(x(u),2),p=h[0],f=h[1],j=l.forwardRef(function(e,s){var t,i,l,c,u=e.__scopeProgress,m=e.value,x=void 0===m?null:m,h=e.max,f=e.getValueLabel,j=void 0===f?y:f,v=(0,r._)(e,["__scopeProgress","value","max","getValueLabel"]);(h||0===h)&&!w(h)&&console.error((t="".concat(h),i="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(i,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));var g=w(h)?h:100;null===x||_(x,g)||console.error((l="".concat(x),c="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(c,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));var C=_(x,g)?x:null,S=b(C)?j(C,g):void 0;return(0,d.jsx)(p,{scope:u,value:C,max:g,children:(0,d.jsx)(o.WV.div,(0,n._)((0,a._)({"aria-valuemax":g,"aria-valuemin":0,"aria-valuenow":b(C)?C:void 0,"aria-valuetext":S,role:"progressbar","data-state":N(C,g),"data-value":null!=C?C:void 0,"data-max":g},v),{ref:s}))})});j.displayName=u;var v="ProgressIndicator",g=l.forwardRef(function(e,s){var t,i=e.__scopeProgress,l=(0,r._)(e,["__scopeProgress"]),c=f(v,i);return(0,d.jsx)(o.WV.div,(0,n._)((0,a._)({"data-state":N(c.value,c.max),"data-value":null!==(t=c.value)&&void 0!==t?t:void 0,"data-max":c.max},l),{ref:s}))});function y(e,s){return"".concat(Math.round(e/s*100),"%")}function N(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function b(e){return"number"==typeof e}function w(e){return b(e)&&!isNaN(e)&&e>0}function _(e,s){return b(e)&&!isNaN(e)&&e<=s&&e>=0}g.displayName=v;var C=j,S=g}},function(e){e.O(0,[518,825,347,266,648,8,438,0,411,74,969,971,117,744],function(){return e(e.s=57837)}),_N_E=e.O()}]);